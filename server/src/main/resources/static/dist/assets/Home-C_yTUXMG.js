var Hs=e=>{throw TypeError(e)};var kr=(e,t,n)=>t.has(e)||Hs("Cannot "+n);var H=(e,t,n)=>(kr(e,t,"read from private field"),n?n.call(e):t.get(e)),he=(e,t,n)=>t.has(e)?Hs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ce=(e,t,n,r)=>(kr(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ue=(e,t,n)=>(kr(e,t,"access private method"),n);import{S as ii,p as Bs,e as Ee,s as Bn,f as Gt,n as Fn,i as Hr,g as Fs,t as xl,h as bl,k as wl,l as Vs,m as nr,o as qs,q as vl,r as k,v as ai,c as Ze,j as m,R as Ne,w as Cl,b as Je,x as Sl,y as kl,z as Nl,A as pe,B as ci,C as _l}from"./index-CaDJcIAC.js";import{u as rr}from"./index.esm-CTmXC53e.js";import{u as He,a as Be,g as ie,d as El,r as Fe,e as Ml,t as Le,c as sr,B as _e}from"./Button-DEEPTaOg.js";import{u as Il,p as Al,d as jl,g as Ll,h as Tl,c as Pl,q as $l,r as Dl,F as Rl}from"./floating-ui.react-B6caULWt.js";import{V as je}from"./index-Dt85R2py.js";import{S as zl,u as vt,z as Ce,s as Ol,I as Hl,T as Bl}from"./signUpSchema-BligH9ZK.js";var be,re,dn,ye,ht,It,ot,it,fn,At,jt,mt,gt,at,Lt,ae,Qt,Br,Fr,Vr,qr,Xr,Yr,Wr,li,si,Fl=(si=class extends ii{constructor(t,n){super();he(this,ae);he(this,be);he(this,re);he(this,dn);he(this,ye);he(this,ht);he(this,It);he(this,ot);he(this,it);he(this,fn);he(this,At);he(this,jt);he(this,mt);he(this,gt);he(this,at);he(this,Lt,new Set);this.options=n,ce(this,be,t),ce(this,it,null),ce(this,ot,Bs()),this.options.experimental_prefetchInRender||H(this,ot).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,re).addObserver(this),Xs(H(this,re),this.options)?ue(this,ae,Qt).call(this):this.updateResult(),ue(this,ae,qr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Qr(H(this,re),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Qr(H(this,re),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ue(this,ae,Xr).call(this),ue(this,ae,Yr).call(this),H(this,re).removeObserver(this)}setOptions(t){const n=this.options,r=H(this,re);if(this.options=H(this,be).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ee(this.options.enabled,H(this,re))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ue(this,ae,Wr).call(this),H(this,re).setOptions(this.options),n._defaulted&&!Bn(this.options,n)&&H(this,be).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,re),observer:this});const s=this.hasListeners();s&&Ys(H(this,re),r,this.options,n)&&ue(this,ae,Qt).call(this),this.updateResult(),s&&(H(this,re)!==r||Ee(this.options.enabled,H(this,re))!==Ee(n.enabled,H(this,re))||Gt(this.options.staleTime,H(this,re))!==Gt(n.staleTime,H(this,re)))&&ue(this,ae,Br).call(this);const o=ue(this,ae,Fr).call(this);s&&(H(this,re)!==r||Ee(this.options.enabled,H(this,re))!==Ee(n.enabled,H(this,re))||o!==H(this,at))&&ue(this,ae,Vr).call(this,o)}getOptimisticResult(t){const n=H(this,be).getQueryCache().build(H(this,be),t),r=this.createResult(n,t);return ql(this,r)&&(ce(this,ye,r),ce(this,It,this.options),ce(this,ht,H(this,re).state)),r}getCurrentResult(){return H(this,ye)}trackResult(t,n){return new Proxy(t,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(t){H(this,Lt).add(t)}getCurrentQuery(){return H(this,re)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=H(this,be).defaultQueryOptions(t),r=H(this,be).getQueryCache().build(H(this,be),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ue(this,ae,Qt).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,ye)))}createResult(t,n){var L;const r=H(this,re),s=this.options,o=H(this,ye),i=H(this,ht),a=H(this,It),u=t!==r?t.state:H(this,dn),{state:l}=t;let f={...l},d=!1,h;if(n._optimisticResults){const z=this.hasListeners(),T=!z&&Xs(t,n),P=z&&Ys(t,r,n,s);(T||P)&&(f={...f,...wl(l.data,t.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:p,status:x}=f;h=f.data;let b=!1;if(n.placeholderData!==void 0&&h===void 0&&x==="pending"){let z;o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(z=o.data,b=!0):z=typeof n.placeholderData=="function"?n.placeholderData((L=H(this,jt))==null?void 0:L.state.data,H(this,jt)):n.placeholderData,z!==void 0&&(x="success",h=Vs(o==null?void 0:o.data,z,n),d=!0)}if(n.select&&h!==void 0&&!b)if(o&&h===(i==null?void 0:i.data)&&n.select===H(this,fn))h=H(this,At);else try{ce(this,fn,n.select),h=n.select(h),h=Vs(o==null?void 0:o.data,h,n),ce(this,At,h),ce(this,it,null)}catch(z){ce(this,it,z)}H(this,it)&&(y=H(this,it),h=H(this,At),p=Date.now(),x="error");const C=f.fetchStatus==="fetching",g=x==="pending",w=x==="error",S=g&&C,_=h!==void 0,M={status:x,fetchStatus:f.fetchStatus,isPending:g,isSuccess:x==="success",isError:w,isInitialLoading:S,isLoading:S,data:h,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:p,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:C,isRefetching:C&&!g,isLoadingError:w&&!_,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:w&&_,isStale:ds(t,n),refetch:this.refetch,promise:H(this,ot),isEnabled:Ee(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const z=R=>{M.status==="error"?R.reject(M.error):M.data!==void 0&&R.resolve(M.data)},T=()=>{const R=ce(this,ot,M.promise=Bs());z(R)},P=H(this,ot);switch(P.status){case"pending":t.queryHash===r.queryHash&&z(P);break;case"fulfilled":(M.status==="error"||M.data!==P.value)&&T();break;case"rejected":(M.status!=="error"||M.error!==P.reason)&&T();break}}return M}updateResult(){const t=H(this,ye),n=this.createResult(H(this,re),this.options);if(ce(this,ht,H(this,re).state),ce(this,It,this.options),H(this,ht).data!==void 0&&ce(this,jt,H(this,re)),Bn(n,t))return;ce(this,ye,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!H(this,Lt).size)return!0;const i=new Set(o??H(this,Lt));return this.options.throwOnError&&i.add("error"),Object.keys(H(this,ye)).some(a=>{const c=a;return H(this,ye)[c]!==t[c]&&i.has(c)})};ue(this,ae,li).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ue(this,ae,qr).call(this)}},be=new WeakMap,re=new WeakMap,dn=new WeakMap,ye=new WeakMap,ht=new WeakMap,It=new WeakMap,ot=new WeakMap,it=new WeakMap,fn=new WeakMap,At=new WeakMap,jt=new WeakMap,mt=new WeakMap,gt=new WeakMap,at=new WeakMap,Lt=new WeakMap,ae=new WeakSet,Qt=function(t){ue(this,ae,Wr).call(this);let n=H(this,re).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Fn)),n},Br=function(){ue(this,ae,Xr).call(this);const t=Gt(this.options.staleTime,H(this,re));if(Hr||H(this,ye).isStale||!Fs(t))return;const r=xl(H(this,ye).dataUpdatedAt,t)+1;ce(this,mt,setTimeout(()=>{H(this,ye).isStale||this.updateResult()},r))},Fr=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,re)):this.options.refetchInterval)??!1},Vr=function(t){ue(this,ae,Yr).call(this),ce(this,at,t),!(Hr||Ee(this.options.enabled,H(this,re))===!1||!Fs(H(this,at))||H(this,at)===0)&&ce(this,gt,setInterval(()=>{(this.options.refetchIntervalInBackground||bl.isFocused())&&ue(this,ae,Qt).call(this)},H(this,at)))},qr=function(){ue(this,ae,Br).call(this),ue(this,ae,Vr).call(this,ue(this,ae,Fr).call(this))},Xr=function(){H(this,mt)&&(clearTimeout(H(this,mt)),ce(this,mt,void 0))},Yr=function(){H(this,gt)&&(clearInterval(H(this,gt)),ce(this,gt,void 0))},Wr=function(){const t=H(this,be).getQueryCache().build(H(this,be),this.options);if(t===H(this,re))return;const n=H(this,re);ce(this,re,t),ce(this,dn,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},li=function(t){nr.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(H(this,ye))}),H(this,be).getQueryCache().notify({query:H(this,re),type:"observerResultsUpdated"})})},si);function Vl(e,t){return Ee(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Xs(e,t){return Vl(e,t)||e.state.data!==void 0&&Qr(e,t,t.refetchOnMount)}function Qr(e,t,n){if(Ee(t.enabled,e)!==!1&&Gt(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ds(e,t)}return!1}function Ys(e,t,n,r){return(e!==t||Ee(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ds(e,n)}function ds(e,t){return Ee(t.enabled,e)!==!1&&e.isStaleByTime(Gt(t.staleTime,e))}function ql(e,t){return!Bn(e.getCurrentResult(),t)}var ct,lt,we,We,Ke,$n,Ur,oi,Xl=(oi=class extends ii{constructor(t,n){super();he(this,Ke);he(this,ct);he(this,lt);he(this,we);he(this,We);ce(this,ct,t),this.setOptions(n),this.bindMethods(),ue(this,Ke,$n).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const n=this.options;this.options=H(this,ct).defaultMutationOptions(t),Bn(this.options,n)||H(this,ct).getMutationCache().notify({type:"observerOptionsUpdated",mutation:H(this,we),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&qs(n.mutationKey)!==qs(this.options.mutationKey)?this.reset():((r=H(this,we))==null?void 0:r.state.status)==="pending"&&H(this,we).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=H(this,we))==null||t.removeObserver(this)}onMutationUpdate(t){ue(this,Ke,$n).call(this),ue(this,Ke,Ur).call(this,t)}getCurrentResult(){return H(this,lt)}reset(){var t;(t=H(this,we))==null||t.removeObserver(this),ce(this,we,void 0),ue(this,Ke,$n).call(this),ue(this,Ke,Ur).call(this)}mutate(t,n){var r;return ce(this,We,n),(r=H(this,we))==null||r.removeObserver(this),ce(this,we,H(this,ct).getMutationCache().build(H(this,ct),this.options)),H(this,we).addObserver(this),H(this,we).execute(t)}},ct=new WeakMap,lt=new WeakMap,we=new WeakMap,We=new WeakMap,Ke=new WeakSet,$n=function(){var n;const t=((n=H(this,we))==null?void 0:n.state)??vl();ce(this,lt,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Ur=function(t){nr.batch(()=>{var n,r,s,o,i,a,c,u;if(H(this,We)&&this.hasListeners()){const l=H(this,lt).variables,f=H(this,lt).context;(t==null?void 0:t.type)==="success"?((r=(n=H(this,We)).onSuccess)==null||r.call(n,t.data,l,f),(o=(s=H(this,We)).onSettled)==null||o.call(s,t.data,null,l,f)):(t==null?void 0:t.type)==="error"&&((a=(i=H(this,We)).onError)==null||a.call(i,t.error,l,f),(u=(c=H(this,We)).onSettled)==null||u.call(c,void 0,t.error,l,f))}this.listeners.forEach(l=>{l(H(this,lt))})})},oi),ui=k.createContext(!1),Yl=()=>k.useContext(ui);ui.Provider;function Wl(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Ql=k.createContext(Wl()),Ul=()=>k.useContext(Ql),Kl=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Gl=e=>{k.useEffect(()=>{e.clearReset()},[e])},Zl=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||ai(n,[e.error,r])),Jl=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...r)=>t(n(...r)):t(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},eu=(e,t)=>e.isLoading&&e.isFetching&&!t,tu=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ws=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function nu(e,t,n){var f,d,h,y,p;const r=Yl(),s=Ul(),o=Ze(),i=o.defaultQueryOptions(e);(d=(f=o.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||d.call(f,i),i._optimisticResults=r?"isRestoring":"optimistic",Jl(i),Kl(i,s),Gl(s);const a=!o.getQueryCache().get(i.queryHash),[c]=k.useState(()=>new t(o,i)),u=c.getOptimisticResult(i),l=!r&&e.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(x=>{const b=l?c.subscribe(nr.batchCalls(x)):Fn;return c.updateResult(),b},[c,l]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(i)},[i,c]),tu(i,u))throw Ws(i,c,s);if(Zl({result:u,errorResetBoundary:s,throwOnError:i.throwOnError,query:o.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw u.error;if((y=(h=o.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||y.call(h,i,u),i.experimental_prefetchInRender&&!Hr&&eu(u,r)){const x=a?Ws(i,c,s):(p=o.getQueryCache().get(i.queryHash))==null?void 0:p.promise;x==null||x.catch(Fn).finally(()=>{c.updateResult()})}return i.notifyOnChangeProps?u:c.trackResult(u)}function Qe(e,t){return nu(e,Fl)}function Bt(e,t){const n=Ze(),[r]=k.useState(()=>new Xl(n,e));k.useEffect(()=>{r.setOptions(e)},[r,e]);const s=k.useSyncExternalStore(k.useCallback(i=>r.subscribe(nr.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=k.useCallback((i,a)=>{r.mutate(i,a).catch(Fn)},[r]);if(s.error&&ai(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}const di=k.forwardRef((e,t)=>{var u,l;const n=He(),r=Be([El,(u=n.theme)==null?void 0:u.buttonGroup,e.theme],[ie(n.clearTheme,"buttonGroup"),e.clearTheme],[ie(n.applyTheme,"buttonGroup"),e.applyTheme]),{children:s,className:o,outline:i,pill:a,...c}=Fe(e,(l=n.props)==null?void 0:l.buttonGroup);return m.jsx(Ml.Provider,{value:{outline:i,pill:a},children:m.jsx("div",{ref:t,className:Le(r.base,o),role:"group",...c,children:s})})});di.displayName="ButtonGroup";const fi=k.createContext(void 0);function hi(){const e=k.useContext(fi);if(!e)throw new Error("useDrawerContext should be used within the DrawerContext provider!");return e}const fs=sr({root:{base:"fixed z-40 overflow-y-auto bg-white p-4 transition-transform dark:bg-gray-800",backdrop:"fixed inset-0 z-30 bg-gray-900/50 dark:bg-gray-900/80",edge:"bottom-16",position:{top:{on:"left-0 right-0 top-0 w-full transform-none",off:"left-0 right-0 top-0 w-full -translate-y-full"},right:{on:"right-0 top-0 h-screen w-80 transform-none",off:"right-0 top-0 h-screen w-80 translate-x-full"},bottom:{on:"bottom-0 left-0 right-0 w-full transform-none",off:"bottom-0 left-0 right-0 w-full translate-y-full"},left:{on:"left-0 top-0 h-screen w-80 transform-none",off:"left-0 top-0 h-screen w-80 -translate-x-full"}}},header:{inner:{closeButton:"absolute end-2.5 top-2.5 flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",closeIcon:"h-4 w-4",titleCloseIcon:"sr-only",titleIcon:"me-2.5 h-4 w-4",titleText:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400"},collapsed:{on:"hidden",off:"block"}},items:{base:""}}),mi=k.forwardRef((e,t)=>{var h,y;const n=k.useId(),r=He(),s=Be([fs,(h=r.theme)==null?void 0:h.drawer,e.theme],[ie(r.clearTheme,"drawer"),e.clearTheme],[ie(r.applyTheme,"drawer"),e.applyTheme]),{backdrop:o=!0,children:i,className:a,edge:c=!1,position:u="left",onClose:l,open:f=!1,...d}=Fe(e,(y=r.props)==null?void 0:y.drawer);return k.useEffect(()=>{const p=x=>{x.key==="Escape"&&f&&l&&l()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[l,f]),m.jsxs(fi.Provider,{value:{theme:e.theme,clearTheme:e.clearTheme,applyTheme:e.applyTheme,onClose:l,isOpen:f,id:n},children:[m.jsx("div",{ref:t,"aria-modal":!0,"aria-describedby":`drawer-dialog-${n}`,role:"dialog",tabIndex:-1,"data-testid":"flowbite-drawer",className:Le(s.root.base,s.root.position[u][f?"on":"off"],c&&!f&&s.root.edge,a),...d,children:i}),f&&o&&m.jsx("div",{onClick:()=>l(),className:s.root.backdrop})]})});mi.displayName="Drawer";const gi=k.forwardRef((e,t)=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor",strokeWidth:0,viewBox:"0 0 24 24",ref:t,...e,children:[m.jsx("path",{fill:"none",stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{stroke:"none",d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}));gi.displayName="CloseIcon";const pi=k.forwardRef((e,t)=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor",strokeWidth:0,viewBox:"0 0 24 24",ref:t,...e,children:[m.jsx("path",{fill:"none",stroke:"none",d:"M0 0h24v24H0z"}),m.jsx("path",{stroke:"none",d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})]}));pi.displayName="HomeIcon";const yi=k.forwardRef((e,t)=>{var b,C,g;const n=k.useId(),{id:r,isOpen:s,onClose:o,theme:i,clearTheme:a,applyTheme:c}=hi(),u=He(),l=Be([fs.header,(C=(b=u.theme)==null?void 0:b.drawer)==null?void 0:C.header,i==null?void 0:i.header,e.theme],[ie(u.clearTheme,"drawer.header"),ie(a,"header"),e.clearTheme],[ie(u.applyTheme,"drawer.header"),ie(c,"header"),e.applyTheme]),{children:f,className:d,closeIcon:h=gi,title:y,titleIcon:p=pi,...x}=Fe(e,(g=u.props)==null?void 0:g.drawerHeader);return m.jsxs("div",{ref:t,className:d,...x,children:[m.jsxs("h5",{className:l.inner.titleText,id:r,children:[m.jsx(p,{"aria-hidden":!0,className:l.inner.titleIcon}),y]}),m.jsxs("button",{onClick:o,type:"button","data-testid":"close-drawer",className:l.inner.closeButton,children:[m.jsx(h,{"aria-hidden":!0,className:l.inner.closeIcon}),m.jsx("span",{className:l.inner.titleCloseIcon,children:"Close menu"})]}),m.jsx("span",{className:l.collapsed[s?"on":"off"],id:`flowbite-drawer-header-${n}`,children:f})]})});yi.displayName="DrawerHeader";const Kr=k.forwardRef((e,t)=>{var l,f,d;const{theme:n,clearTheme:r,applyTheme:s}=hi(),o=He(),i=Be([fs.items,(f=(l=o.theme)==null?void 0:l.drawer)==null?void 0:f.items,n==null?void 0:n.items,e.theme],[ie(o.clearTheme,"drawer.items"),ie(r,"items"),e.clearTheme],[ie(o.applyTheme,"drawer.items"),ie(s,"items"),e.applyTheme]),{children:a,className:c,...u}=Fe(e,(d=o.props)==null?void 0:d.drawerItems);return m.jsx("div",{ref:t,"data-testid":"flowbite-drawer-items",className:Le(i.base,c),...u,children:a})});Kr.displayName="DrawerItems";const xi=k.createContext(void 0);function hs(){const e=k.useContext(xi);if(!e)throw new Error("useModalContext should be used within the ModalContext provider!");return e}const or=sr({root:{base:"fixed inset-x-0 top-0 z-50 h-screen overflow-y-auto overflow-x-hidden md:inset-0 md:h-full",show:{on:"flex bg-gray-900/50 dark:bg-gray-900/80",off:"hidden"},sizes:{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl"},positions:{"top-left":"items-start justify-start","top-center":"items-start justify-center","top-right":"items-start justify-end","center-left":"items-center justify-start",center:"items-center justify-center","center-right":"items-center justify-end","bottom-right":"items-end justify-end","bottom-center":"items-end justify-center","bottom-left":"items-end justify-start"}},content:{base:"relative h-full w-full p-4 md:h-auto",inner:"relative flex max-h-[90dvh] flex-col rounded-lg bg-white shadow dark:bg-gray-700"},body:{base:"flex-1 overflow-auto p-6",popup:"pt-0"},header:{base:"flex items-start justify-between rounded-t border-b p-5 dark:border-gray-600",popup:"border-b-0 p-2",title:"text-xl font-medium text-gray-900 dark:text-white",close:{base:"ml-auto inline-flex items-center rounded-lg bg-transparent p-1.5 text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white",icon:"h-5 w-5"}},footer:{base:"flex items-center space-x-2 rounded-b border-gray-200 p-6 dark:border-gray-600",popup:"border-t"}}),hn=k.forwardRef((e,t)=>{var E,M;const[n,r]=k.useState(void 0),s=He(),o=Be([or,(E=s.theme)==null?void 0:E.modal,e.theme],[ie(s.clearTheme,"modal"),e.clearTheme],[ie(s.applyTheme,"modal"),e.applyTheme]),{children:i,className:a,dismissible:c=!1,onClose:u,popup:l,position:f="center",root:d,show:h,size:y="2xl",initialFocus:p,...x}=Fe(e,(M=s.props)==null?void 0:M.modal),{context:b}=Il({open:h,onOpenChange:()=>u&&u()}),C=Al([b.refs.setFloating,t]),g=jl(b),w=Ll(b,{outsidePressEvent:"mousedown",enabled:c}),S=Tl(b),{getFloatingProps:_}=Pl([g,w,S]);return h?m.jsx(xi.Provider,{value:{theme:e.theme,clearTheme:e.clearTheme,applyTheme:e.applyTheme,popup:l,onClose:u,setHeaderId:r},children:m.jsx($l,{root:d,children:m.jsx(Dl,{lockScroll:!0,"data-testid":"modal-overlay",className:Le(o.root.base,o.root.positions[f],h?o.root.show.on:o.root.show.off,a),...x,children:m.jsx(Rl,{context:b,initialFocus:p,children:m.jsx("div",{ref:C,..._(x),"aria-labelledby":n,className:Le(o.content.base,o.root.sizes[y]),children:m.jsx("div",{className:o.content.inner,children:i})})})})})}):null});hn.displayName="Modal";const mn=k.forwardRef((e,t)=>{var l,f,d;const{theme:n,clearTheme:r,applyTheme:s,popup:o}=hs(),i=He(),a=Be([or.body,(f=(l=i.theme)==null?void 0:l.modal)==null?void 0:f.body,n==null?void 0:n.body,e.theme],[ie(i.clearTheme,"modal.body"),ie(r,"body"),e.clearTheme],[ie(i.applyTheme,"modal.body"),ie(s,"body"),e.applyTheme]),{className:c,...u}=Fe(e,(d=i.props)==null?void 0:d.modalBody);return m.jsx("div",{ref:t,className:Le(a.base,o&&a.popup,c),...u})});mn.displayName="ModalBody";const bi=k.forwardRef((e,t)=>{var l,f,d;const{theme:n,clearTheme:r,applyTheme:s,popup:o}=hs(),i=He(),a=Be([or.footer,(f=(l=i.theme)==null?void 0:l.modal)==null?void 0:f.footer,n==null?void 0:n.footer,e.theme],[ie(i.clearTheme,"modal.footer"),ie(r,"footer"),e.clearTheme],[ie(i.applyTheme,"modal.footer"),ie(s,"footer"),e.applyTheme]),{className:c,...u}=Fe(e,(d=i.props)==null?void 0:d.modalFooter);return m.jsx("div",{ref:t,className:Le(a.base,!o&&a.popup,c),...u})});bi.displayName="ModalFooter";const wi=k.forwardRef((e,t)=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",ref:t,...e,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}));wi.displayName="OutlineXIcon";const ir=k.forwardRef((e,t)=>{var b,C,g;const{theme:n,clearTheme:r,applyTheme:s,popup:o,onClose:i,setHeaderId:a}=hs(),c=He(),u=Be([or.header,(C=(b=c.theme)==null?void 0:b.modal)==null?void 0:C.header,n==null?void 0:n.header,e.theme],[ie(c.clearTheme,"modal.header"),ie(r,"header"),e.clearTheme],[ie(c.applyTheme,"modal.header"),ie(s,"header"),e.applyTheme]),{as:l="h3",children:f,className:d,id:h,...y}=Fe(e,(g=c.props)==null?void 0:g.modalHeader),p=k.useId(),x=h||p;return k.useLayoutEffect(()=>(a(x),()=>a(void 0)),[x,a]),m.jsxs("div",{ref:t,className:Le(u.base,o&&u.popup,d),...y,children:[m.jsx(l,{id:x,className:u.title,children:f}),m.jsx("button",{"aria-label":"Close",className:u.close.base,type:"button",onClick:i,children:m.jsx(wi,{"aria-hidden":!0,className:u.close.icon})})]})});ir.displayName="ModalHeader";const ru=sr({base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},select:{base:"block w-full appearance-none border bg-arrow-down-icon bg-[length:0.75em_0.75em] bg-[position:right_12px_center] bg-no-repeat pr-10 focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50",withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""},sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"}}}}),vi=k.forwardRef((e,t)=>{var f,d;const n=He(),r=Be([ru,(f=n.theme)==null?void 0:f.select,e.theme],[ie(n.clearTheme,"select"),e.clearTheme],[ie(n.applyTheme,"select"),e.applyTheme]),{addon:s,className:o,color:i="gray",icon:a,shadow:c,sizing:u="md",...l}=Fe(e,(d=n.props)==null?void 0:d.select);return m.jsxs("div",{className:Le(r.base,o),children:[s&&m.jsx("span",{className:r.addon,children:s}),m.jsxs("div",{className:r.field.base,children:[a&&m.jsx("div",{className:r.field.icon.base,children:m.jsx(a,{className:r.field.icon.svg})}),m.jsx("select",{ref:t,className:Le(r.field.select.base,r.field.select.colors[i],r.field.select.sizes[u],r.field.select.withIcon[a?"on":"off"],r.field.select.withAddon[s?"on":"off"],r.field.select.withShadow[c?"on":"off"]),...l})]})]})});vi.displayName="Select";const su=sr({base:"block w-full rounded-lg border p-2.5 text-sm focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50",colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}),ms=k.forwardRef((e,t)=>{var c,u;const n=He(),r=Be([su,(c=n.theme)==null?void 0:c.textarea,e.theme],[ie(n.clearTheme,"textarea"),e.clearTheme],[ie(n.applyTheme,"textarea"),e.applyTheme]),{className:s,color:o="gray",shadow:i,...a}=Fe(e,(u=n.props)==null?void 0:u.textarea);return m.jsx("textarea",{ref:t,className:Le(r.base,r.colors[o],r.withShadow[i?"on":"off"],s),...a})});ms.displayName="Textarea";function ou({openModal:e,setOpenModal:t,onDelete:n}){return m.jsx(hn,{show:e,onClose:()=>t(!1),className:"cursor-not-allowed z-150",theme:{header:{close:{base:"cursor-pointer text-gray-500 hover:text-gray-700"}}},children:m.jsxs("div",{className:"bg-[#171717] rounded-lg",children:[" ",m.jsx(ir,{className:"bg-[#171717] text-white",children:"Delete Comment"}),m.jsxs(mn,{className:"bg-[#171717]",children:[m.jsx("div",{className:"space-y-6",children:m.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this comment? This Action cannot be undone."})}),m.jsxs("div",{className:"flex justify-end mt-5 gap-2",children:[m.jsx(_e,{className:"cursor-pointer",onClick:()=>t(!1),color:"alternative",children:"Close"}),m.jsx(_e,{className:"cursor-pointer",color:"red",onClick:()=>n(),children:"Delete"})]})]})]})})}const Ci={borderRadius:"10px",background:"#10B981",color:"#fff"},Si={borderRadius:"10px",background:"#EF4444",color:"#fff"};var ki={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Qs=Ne.createContext&&Ne.createContext(ki),iu=["attr","size","title"];function au(e,t){if(e==null)return{};var n=cu(e,t),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function cu(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vn(){return Vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vn.apply(this,arguments)}function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Us(Object(n),!0).forEach(function(r){lu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lu(e,t,n){return t=uu(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uu(e){var t=du(e,"string");return typeof t=="symbol"?t:t+""}function du(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ni(e){return e&&e.map((t,n)=>Ne.createElement(t.tag,qn({key:n},t.attr),Ni(t.child)))}function gn(e){return t=>Ne.createElement(fu,Vn({attr:qn({},e.attr)},t),Ni(e.child))}function fu(e){var t=n=>{var{attr:r,size:s,title:o}=e,i=au(e,iu),a=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Ne.createElement("svg",Vn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:c,style:qn(qn({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&Ne.createElement("title",null,o),e.children)};return Qs!==void 0?Ne.createElement(Qs.Consumer,null,n=>t(n)):t(ki)}function hu(e){return gn({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function mu({isOpen:e,onClose:t}){return m.jsx(m.Fragment,{children:m.jsxs(hn,{show:e,onClose:t,children:[m.jsxs(mn,{children:[m.jsxs("div",{className:"flex items-center justify-between border-b pb-2 mb-4",children:[m.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-900 dark:hover:text-white cursor-pointer",children:m.jsx(hu,{className:"w-5 h-5"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white ml-auto",children:"ملاحظات هامة"})]}),m.jsxs("div",{className:"space-y-4 text-right",children:[m.jsxs("p",{className:"text-base leading-relaxed text-gray-700 dark:text-gray-300",children:[m.jsxs("span",{children:[": ",m.jsx("strong",{children:"متطلبات أخرى"})]}),m.jsx("br",{}),m.jsxs(m.Fragment,{children:[m.jsx("span",{children:" - الرسم الهندسي والهندسة الوصفية "}),m.jsx("span",{children:" - المشاغل الهندسية"}),m.jsx("span",{children:" - الكتابةالفنية "}),m.jsx("span",{children:" (بعد مهارات الاتصال باللغة الإنجليزية)"})]}),m.jsx("br",{}),m.jsx("span",{children:"الاقتصاد الهندسي (بعد ٩ ساعات) - التدريب العملي (بعد ١٢٠ ساعة) *"}),m.jsx("br",{}),m.jsx("span",{children:"(بعد ١٢٠ ساعة) - مشروع 1 , مشروع ٢ *"})]}),m.jsxs("p",{className:"text-base leading-relaxed text-gray-700 dark:text-gray-300",children:[m.jsxs("span",{children:[": ",m.jsx("strong",{children:"ملاحظات "})]}),m.jsx("br",{}),m.jsxs("span",{children:[" ","الخط الاسود المتقطع يدل على ان المادة تعتمد على ما قبلها"]}),m.jsx("br",{}),m.jsxs("span",{children:[" ","الخط المتقطع يدل على ان المادة يمكن تسجيلها بشكل متزامن , نفس الفصل"," "]}),m.jsx("br",{}),m.jsx("span",{children:"متطلب التخصص الاختياري مكتوب بجانب المادة (اختياري)"}),m.jsx("br",{})]})]})]}),m.jsxs(bi,{className:"flex flex-col items-end text-right space-y-1",children:[m.jsxs("span",{className:"text-white mb-4",children:[": ",m.jsx(m.Fragment,{children:"دلالة الوان الخطة"})]}),m.jsxs("p",{className:"text-sm text-[#828282] ",children:[m.jsx("span",{className:"text-gray-300",children:"مواد هندسة الحاسوب"})," ■"]}),m.jsxs("p",{className:"text-sm text-[#631d3b]",children:[m.jsx("span",{className:"text-gray-300",children:"مواد هندسة الميكاترونيكس"})," ■"]}),m.jsxs("p",{className:"text-sm text-[#166e25]",children:[m.jsx("span",{className:"text-gray-300",children:"مواد هندسة الكهربائية"})," ■"]}),m.jsxs("p",{className:"text-sm text-[#a87716]",children:[m.jsxs("span",{className:"text-gray-300",children:["مواد كلية تكنولوجيا المعلومات"," "]})," ","■"]}),m.jsxs("p",{className:"text-sm text-[#0f3460]",children:[m.jsx("span",{className:"text-gray-300",children:"مواد كلية العلوم"})," ■"]})]})]})})}const ar=()=>{const e=Cl(),{userInfo:t,accessToken:n,refreshToken:r,loading:s,error:o}=Je(h=>h.auth),i=async()=>e(Nl()),a=async()=>e(kl()),c=()=>{e(Sl())},u=!!(n&&t),l=h=>{var y;return((y=t==null?void 0:t.roles)==null?void 0:y.includes(`ROLE_${h}`))||!1},f=l("ADMIN"),d=l("USER");return{userInfo:t,accessToken:n,refreshToken:r,loading:s,error:o,isAuthenticated:u,isAdmin:f,isUser:d,logout:i,refreshTokens:a,clearError:c,hasRole:l}},gu=({courseId:e})=>{const t=Ze(),{accessToken:n}=ar(),{register:r,handleSubmit:s,reset:o,formState:{errors:i}}=rr({defaultValues:{comment:""}}),c=Bt({mutationFn:async({content:l,courseId:f})=>(await pe.post("/api/comments",{courseId:f,content:l},{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["CourseByCourseId",e]}),t.invalidateQueries({queryKey:["commentsCount",e]}),o()},onError:l=>{console.error("Failed to create comment:",l)}});return{register:r,handleSubmit:s,errors:i,submitComment:l=>{if(!n){console.error("No access token available");return}c.mutate({content:l.comment,courseId:e})},accessToken:n}},pu=({courseId:e})=>{const{register:t,handleSubmit:n,errors:r,submitComment:s,accessToken:o}=gu({courseId:e});return m.jsx("form",{onSubmit:n(s),className:"p-4 border-t w-full",children:o?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-4",children:m.jsx(ms,{id:"comment",placeholder:"Write Comment...",rows:2,...t("comment",{required:"Comment is required",minLength:{value:2,message:"Comment must be at least 2 characters"}})})}),r.comment&&m.jsx("p",{className:"text-red-600 text-sm mt-1",children:r.comment.message}),m.jsx(_e,{type:"submit",className:"w-full cursor-pointer",children:"Comment"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-4 text-sm text-center text-red-600 font-medium",children:"You must be logged in to comment."}),m.jsx(_e,{disabled:!0,type:"button",className:"w-full cursor-not-allowed",children:"Login to Comment"})]})})},yu=({comment:e})=>{const[t,n]=k.useState(!1),{accessToken:r}=Je(a=>a.auth),s=Ze(),i=Bt({mutationFn:async()=>{try{return await pe.delete(`/api/comments/${e.id}`,{headers:{Authorization:`Bearer ${r}`}})}catch(a){throw new Error(`Failed to delete comment ${a}`)}},onSuccess:()=>{s.invalidateQueries({queryKey:["CourseByCourseId",e.courseId]}),s.invalidateQueries({queryKey:["commentsCount",e.courseId]}),n(!1),je.success("Comment deleted successfully!",{icon:"🗑️",style:Ci})},onError:a=>{je.error("Failed to delete comment. Please try again.",{icon:"❌",style:Si})}});return{openModal:t,setOpenModal:n,mutation:i}},xu=({comment:e})=>{const t=async()=>{try{return(await pe.get(`/api/users/${e.userId}`)).data.username}catch(r){throw new Error(`User Not Found , ${r}`)}},{data:n}=Qe({queryKey:["userName",e.userId],queryFn:t});return{username:n}},bu=({comment:e,setOpenEdit:t})=>{const{accessToken:n}=Je(d=>d.auth),r=Ze(),[s,o]=k.useState(null),{register:i,handleSubmit:a,formState:{errors:c}}=rr({defaultValues:{comment:e.content}}),l=Bt({mutationFn:async({content:d})=>(await pe.put(`/api/comments/${e.id}`,{content:d},{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:()=>{r.invalidateQueries({queryKey:["CourseByCourseId",e.courseId]}),t(!1),o(null),je.success("Comment updated successfully!",{icon:"",style:Ci})},onError:()=>{var d;je.error(`Failed to Update comment. ${(d=l.error)==null?void 0:d.message}`,{icon:"❌",style:Si})}});return{register:i,handleSubmit:a,error:s,errors:c,onSubmit:d=>{l.mutate({content:d.comment})},mutation:l}},wu=({comment:e,setOpenEdit:t})=>{const{register:n,handleSubmit:r,error:s,errors:o,onSubmit:i,mutation:a}=bu({comment:e,setOpenEdit:t});return m.jsxs("form",{onSubmit:r(i),className:"my-4 w-full",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx(ms,{className:"text-end",id:"comment",rows:2,defaultValue:e.content,...n("comment",{required:"Comment is required"})}),o.comment&&m.jsx("p",{className:"text-red-500 text-sm",children:o.comment.message}),s&&m.jsx("p",{className:"text-red-500 text-sm",children:s})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(_e,{className:"cursor-pointer",type:"button",color:"alternative",onClick:()=>t(!1),children:"Close"}),m.jsx(_e,{className:"cursor-pointer ",type:"submit",disabled:a.isPending,children:"Save"})]})]})},vu=({comment:e})=>{const{username:t}=xu({comment:e}),[n,r]=k.useState(!1);return m.jsxs("div",{className:"space-y-4 rounded-lg border-2 border-neutral-200 bg-neutral-100 p-4 dark:border-neutral-800 dark:bg-neutral-900 ",children:[m.jsx(Cu,{username:t,comment:e}),m.jsx(Su,{comment:e,openEdit:n}),m.jsx(ku,{comment:e,openEdit:n,setOpenEdit:r})]})};function Cu({username:e,comment:t}){return m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{children:e}),m.jsx("time",{className:"text-sm text-neutral-500",children:new Date(t.createdAt).toLocaleDateString()})]})}function Su({comment:e,openEdit:t}){return m.jsx(m.Fragment,{children:!t&&m.jsx("p",{className:"flex justify-end",children:e.content})})}function ku({comment:e,openEdit:t,setOpenEdit:n}){const{openModal:r,setOpenModal:s,mutation:o}=yu({comment:e}),{userInfo:i}=Je(c=>c.auth),a=e.userId===(i==null?void 0:i.id);return m.jsxs("div",{className:"flex justify-start",children:[!t&&a&&m.jsxs("div",{className:"flex justify-end",children:[m.jsx("button",{className:"cursor-pointer",onClick:()=>n(!0),children:"Edit"}),m.jsx("button",{className:`text-red-800 cursor-pointer \r
        p-4`,onClick:()=>s(!0),children:"Delete"})]}),t&&m.jsx(wu,{comment:e,setOpenEdit:n}),m.jsx(ou,{openModal:r,setOpenModal:s,onDelete:o.mutate})]})}const Nu=Ne.memo(vu),_u=({comments:e,isLoading:t,noCommentsMessage:n="No comments yet"})=>m.jsxs("div",{className:"space-y-4",children:[e.map(r=>m.jsx(Nu,{comment:r},r.id)),t&&m.jsx("div",{className:"flex justify-center",children:m.jsx(zl,{})}),!t&&e.length===0&&m.jsx("div",{className:"flex justify-center",children:n})]}),Eu=Ne.memo(_u),Mu=()=>{const{courseId:e}=vt(),t=async()=>{try{return(await pe.get(`/api/comments/course/${e}/count`)).data}catch(u){throw new Error(`Failed to fetch comment count , ${u}`)}},n=async()=>{try{return(await pe.get(`/api/comments/course/${e}`)).data}catch(u){throw new Error(`Failed to fetch course Comment, ${u}`)}},{data:r,isLoading:s,error:o}=Qe({queryKey:["commentsCount",e],queryFn:t,enabled:!!e}),{data:i,isLoading:a,error:c}=Qe({queryKey:["CourseByCourseId",e],queryFn:n,enabled:!!e});return{commentCount:r,comments:i,isCommentsLoading:a,countError:o,commentsError:c,isCountLoading:s}},Iu=()=>{const{commentCount:e,comments:t,isCommentsLoading:n,countError:r,commentsError:s,isCountLoading:o}=Mu();return o||n?m.jsx("div",{children:"Loading..."}):r?m.jsxs("div",{children:["Error: ",r.message]}):s?m.jsxs("div",{children:["Error: ",s.message]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h3",{className:"font-semibold",children:["Comments (",e,")"]}),m.jsx(Eu,{comments:t??[],isLoading:n})]})},Au=Ne.memo(Iu),_i=()=>{const{courseId:e}=vt();return Qe({queryKey:["resource",e],queryFn:async()=>(await pe.get(`/api/resource/course/${e}`,{})).data,enabled:!!e,retry:1})},ju=()=>{const{courseId:e}=vt(),t=Ze(),{data:n,isLoading:r,isError:s}=_i(),{accessToken:o,userInfo:i}=Je(c=>c.auth),a=Bt({mutationFn:c=>pe.delete(`/api/resource/${c}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}}),onSuccess:()=>{t.invalidateQueries({queryKey:["resource",e]}),je.success("Material deleted successfully")},onError:c=>{var l,f;const u=((l=c.response)==null?void 0:l.status)===403?"You are not authorized to delete this material":((f=c.response)==null?void 0:f.status)===404?"Material not found":"Failed to delete material";je.error(u)}});return{data:n,isLoading:r,isError:s,courseId:e,deleteMaterial:a,userId:i==null?void 0:i.id}};function Lu(e){return gn({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M952.08 1.552L529.039 116.144c-10.752 2.88-34.096 2.848-44.815-.16L72.08 1.776C35.295-8.352-.336 18.176-.336 56.048V834.16c0 32.096 24.335 62.785 55.311 71.409l412.16 114.224c11.025 3.055 25.217 4.751 39.937 4.751 10.095 0 25.007-.784 38.72-4.528l423.023-114.592c31.056-8.4 55.504-39.024 55.504-71.248V56.048c.016-37.84-35.616-64.464-72.24-54.496zM479.999 956.943L71.071 843.887c-3.088-.847-7.408-6.496-7.408-9.712V66.143L467.135 177.68c3.904 1.088 8.288 1.936 12.864 2.656v776.608zm480.336-122.767c0 3.152-5.184 8.655-8.256 9.503L544 954.207v-775.92c.592-.144 1.2-.224 1.792-.384L960.32 65.775v768.4h.016zM641.999 366.303c2.88 0 5.81-.367 8.69-1.184l223.935-63.024c17.025-4.816 26.945-22.465 22.16-39.473s-22.56-26.88-39.472-22.16l-223.936 63.025c-17.024 4.816-26.944 22.464-22.16 39.472 3.968 14.128 16.815 23.344 30.783 23.344zm.002 192.001c2.88 0 5.81-.368 8.69-1.185l223.935-63.024c17.025-4.816 26.945-22.465 22.16-39.473-4.783-17.008-22.56-26.88-39.472-22.16l-223.936 63.025c-17.024 4.816-26.944 22.464-22.16 39.457 3.968 14.127 16.815 23.36 30.783 23.36zm.002 192c2.88 0 5.81-.368 8.69-1.185l223.935-63.024c17.025-4.816 26.945-22.465 22.16-39.473s-22.56-26.88-39.472-22.16L633.38 687.487c-17.024 4.816-26.944 22.464-22.16 39.472 3.968 14.113 16.815 23.345 30.783 23.345zM394.629 303.487l-223.934-63.025c-16.912-4.72-34.688 5.152-39.473 22.16s5.12 34.656 22.16 39.473l223.937 63.024a31.827 31.827 0 0 0 8.687 1.184c13.968 0 26.815-9.215 30.783-23.343 4.784-16.993-5.12-34.657-22.16-39.473zm.002 191.999l-223.934-63.025c-16.912-4.72-34.689 5.152-39.473 22.16s5.12 34.656 22.16 39.473l223.936 63.024a31.827 31.827 0 0 0 8.688 1.184c13.968 0 26.815-9.215 30.783-23.343 4.784-16.993-5.12-34.657-22.16-39.473zm.002 191.999L170.699 624.46c-16.912-4.72-34.689 5.152-39.473 22.16s5.12 34.656 22.16 39.473l223.936 63.024a31.827 31.827 0 0 0 8.688 1.184c13.968 0 26.815-9.215 30.783-23.343 4.784-17.008-5.12-34.657-22.16-39.473z"},child:[]}]})(e)}function Tu(e){return gn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function Pu(e){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M363 277h-86v86h-42v-86h-86v-42h86v-86h42v86h86v42z"},child:[]},{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422c-44.3 0-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256c0-44.3 17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}function $u(e){return gn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 90c44.3 0 86 17.3 117.4 48.6C404.7 170 422 211.7 422 256s-17.3 86-48.6 117.4C342 404.7 300.3 422 256 422s-86-17.3-117.4-48.6C107.3 342 90 300.3 90 256s17.3-86 48.6-117.4C170 107.3 211.7 90 256 90m0-42C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]},{tag:"path",attr:{d:"M360 330.9L330.9 360 256 285.1 181.1 360 152 330.9l74.9-74.9-74.9-74.9 29.1-29.1 74.9 74.9 74.9-74.9 29.1 29.1-74.9 74.9z"},child:[]}]})(e)}const Du=Ce.object({books:Ce.string().url().optional().or(Ce.literal("")),summaries:Ce.string().url().optional().or(Ce.literal("")),slides:Ce.string().url().optional().or(Ce.literal("")),labs:Ce.string().url().optional().or(Ce.literal("")),exams:Ce.string().url().optional().or(Ce.literal("")),videos:Ce.string().url().optional().or(Ce.literal(""))}),Ru=({setOpenModal:e})=>{const{accessToken:t}=Je(l=>l.auth),{courseId:n}=vt(),r=Ze(),{register:s,handleSubmit:o,formState:{errors:i},reset:a}=rr({mode:"onBlur",resolver:Ol(Du)});return{register:s,handleSubmit:o,errors:i,submitMaterial:async l=>{try{const f=Object.fromEntries(Object.entries(l).filter(([d,h])=>h!==""));await pe.post(`/api/resource/course/${n}`,{...f,courseId:n},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),await r.invalidateQueries({queryKey:["resource",n]}),e(!1),a(),je.success("Material added successfully")}catch(f){throw console.error("Error submitting material:",f),je.error("Failed to add material"),f}},onCloseModal:()=>{e(!1),a()}}};function zu({openModal:e,setOpenModal:t,item:n}){var c;const{register:r,handleSubmit:s,errors:o,submitMaterial:i,onCloseModal:a}=Ru({setOpenModal:t});return m.jsxs(hn,{show:e,size:"md",onClose:a,popup:!0,className:"z-150 ",children:[m.jsx(ir,{className:"p-6 !bg-[#171717]",children:"Add Material"}),m.jsx(mn,{className:"!bg-[#171717]",children:m.jsxs("form",{className:"space-y-6",onSubmit:s(i),children:[m.jsx(Hl,{label:n!=null&&n.key?n.key.charAt(0).toUpperCase()+n.key.slice(1):"",id:(n==null?void 0:n.key)||"",name:(n==null?void 0:n.key)||"",register:r,placeholder:`Enter ${n==null?void 0:n.key} URL Link`,error:(c=o.books)==null?void 0:c.message}),m.jsxs("div",{className:"flex gap-2  justify-end",children:[m.jsx(_e,{className:"cursor-pointer",color:"gray",onClick:a,children:"Close"}),m.jsx(_e,{className:"cursor-pointer",type:"submit",children:"ADD"})]})]})})]})}const Ou=({item:e,data:t,isLoading:n,isError:r,deleteMaterial:s,userId:o})=>{const[i,a]=k.useState(!1),{userInfo:c}=Je(u=>u.auth);return m.jsxs("div",{className:"flex flex-col gap-1 mb-2",children:[m.jsxs("div",{className:"flex flex-row items-center gap-2 transition justify-end relative mb-3",children:[c&&m.jsx(Pu,{className:"text-2xl absolute left-0 cursor-pointer",onClick:()=>a(!0)}),m.jsx("span",{className:"font-semibold",children:e.label}),m.jsx(Lu,{className:"text-lg"})]}),m.jsx(zu,{openModal:i,setOpenModal:a,item:e}),n?m.jsx("span",{className:"text-sm text-end text-gray-500",children:"Loading..."}):r?m.jsx("span",{className:"text-sm text-end text-red-500",children:"خطأ في جلب المواد"}):!t||t.length===0?m.jsx("span",{className:"text-sm text-end text-gray-400",children:"لا توجد مواد متاحة"}):t.map((u,l)=>u[e.key]&&u[e.key]!==null?m.jsxs("div",{className:"flex flex-row items-center gap-2 justify-end",children:[m.jsx("a",{href:u[e.key],target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:text-blue-600",children:u[e.key]}),o&&u.userId===o&&m.jsx("button",{onClick:()=>s.mutate(u.id),disabled:s.isPending,className:"hover:text-red-800 disabled:opacity-50",children:m.jsx(Tu,{className:"cursor-pointer text-2xl"})})]},`${e.key}-${l}`):null)]})},Hu=Ne.memo(Ou),Bu=[{label:"الكتب",key:"books"},{label:"ملخصات",key:"summaries"},{label:"سلايدات ",key:"slides"},{label:"مختبرات",key:"labs"},{label:"امتحانات",key:"exams"},{label:"فيديوهات",key:"videos"}],Fu=()=>{const{data:e,isLoading:t,isError:n}=_i(),{deleteMaterial:r,userId:s}=ju();return m.jsx("div",{className:"flex flex-col gap-3 items-end ",children:Bu.map(o=>m.jsxs("div",{className:"w-full ",children:[m.jsx(Hu,{item:o,data:e,isLoading:t,isError:n,deleteMaterial:r,userId:s}),m.jsx("hr",{className:"border-t border-gray-300 my-2"})]},o.key))})},Vu=()=>m.jsxs("div",{className:"flex flex-col ",children:[m.jsx("div",{className:"flex flex-row items-center justify-end mb-4 gap-2",children:m.jsx("h2",{className:"text-xl font-semibold mb-4 text-end",children:"المواد التعليمية"})}),m.jsx(Fu,{})]}),qu=({courseId:e,onSuccess:t,onError:n})=>{const{accessToken:r}=ar(),s=Ze(),o=rr({defaultValues:{mark:""}}),a=Bt({mutationFn:async l=>{if(!e)throw new Error("Course ID is required");await pe.post(`/api/courses/${e}/mark`,l,{headers:{Authorization:`Bearer ${r}`}})},onSuccess:()=>{s.invalidateQueries({queryKey:["allUserMarks"]}),s.invalidateQueries({queryKey:["oneMark",e]}),je.success("Mark has been added successfully!"),o.reset(),t==null||t()},onError:l=>{const f=l.message==="Course ID is required"?"Please select a valid course":"Failed to add mark. Please try again.";je.error(f),n==null||n(l)}}),c=o.handleSubmit(l=>{if(!l.mark){je.error("Please select a mark");return}a.mutate(l)}),u=[{value:"",label:"-- Select a Mark --",disabled:!0},{value:"A",label:"A"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B",label:"B"},{value:"B-",label:"B-"},{value:"C+",label:"C+"},{value:"C",label:"C"},{value:"C-",label:"C-"},{value:"D+",label:"D+"},{value:"D",label:"D"},{value:"D-",label:"D-"},{value:"F",label:"F"}];return{register:o.register,handleSubmit:c,formState:o.formState,reset:o.reset,watch:o.watch,isLoading:a.isPending,isError:a.isError,isSuccess:a.isSuccess,error:a.error,isDisabled:a.isPending||!e,buttonText:a.isPending?"Adding...":"Add Mark",markOptions:u,validationRules:{mark:{required:"Please select a mark",validate:l=>l!==""||"Please select a valid mark"}}}},Xu=({onSuccess:e,onError:t,className:n=""})=>{const{courseId:r}=vt(),{register:s,handleSubmit:o,formState:{errors:i},isDisabled:a,buttonText:c,markOptions:u,validationRules:l}=qu({courseId:r,onSuccess:e,onError:t});return m.jsx("form",{className:n,onSubmit:o,children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(vi,{id:"mark-select",...s("mark",l.mark),className:i.mark?"border-red-500":"",disabled:a,children:u.map(f=>m.jsx("option",{value:f.value,disabled:f.disabled,children:f.label},f.value))}),i.mark&&m.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.mark.message})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx(_e,{type:"submit",disabled:a,className:"cursor-pointer",children:c})})]})})};function Yu({openModal:e,setOpenModal:t}){return m.jsx(m.Fragment,{children:m.jsxs(hn,{show:e,onClose:()=>t(!1),size:"md",className:"z-150",children:[m.jsx(ir,{className:"!bg-[#171717]",children:"Add your Mark"}),m.jsx(mn,{className:"!bg-[#171717]",children:m.jsx(Xu,{})})]})})}function Wu({isOpen:e,onClose:t,title:n,courseId:r}){const[s,o]=k.useState(!0),[i,a]=k.useState(!1),{accessToken:c}=ar();return m.jsx("div",{className:"relative z-100 ",children:m.jsxs(mi,{open:e,onClose:t,position:"right",className:"w-full sm:max-w-sm md:max-w-xl lg:max-w-2xl !bg-[#171717] ",children:[m.jsxs("div",{className:"flex flex-col h-full w-full",children:[m.jsx(yi,{title:n}),m.jsx("div",{className:"text-center mb-4",children:m.jsxs(di,{children:[m.jsx(_e,{className:"cursor-pointer",color:"alternative",onClick:()=>o(!0),children:"CommentSection"}),m.jsx(_e,{className:"cursor-pointer",color:"alternative",onClick:()=>o(!1),children:"Material"}),c&&m.jsx(m.Fragment,{children:m.jsx(_e,{className:"cursor-pointer",color:"alternative",onClick:()=>a(!0),children:"AddMark"})})]})}),s?m.jsxs(m.Fragment,{children:[m.jsx(Kr,{className:"flex-1 overflow-y-auto p-4",children:m.jsx(Au,{})}),m.jsx(pu,{courseId:r})]}):m.jsx(m.Fragment,{children:m.jsxs(Kr,{className:"flex-1 overflow-y-auto p-4",children:[" ",m.jsx(Vu,{})]})})]}),m.jsx(m.Fragment,{children:m.jsx(Yu,{setOpenModal:a,openModal:i})})]})})}function ge(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ge(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Qu={value:()=>{}};function cr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Dn(n)}function Dn(e){this._=e}function Uu(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Dn.prototype=cr.prototype={constructor:Dn,on:function(e,t){var n=this._,r=Uu(e+"",n),s,o=-1,i=r.length;if(arguments.length<2){for(;++o<i;)if((s=(e=r[o]).type)&&(s=Ku(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<i;)if(s=(e=r[o]).type)n[s]=Ks(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Ks(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dn(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,o=r.length;s<o;++s)r[s].value.apply(t,n)}};function Ku(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function Ks(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Qu,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Gr="http://www.w3.org/1999/xhtml";const Gs={svg:"http://www.w3.org/2000/svg",xhtml:Gr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Gs.hasOwnProperty(t)?{space:Gs[t],local:e}:e}function Gu(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Gr&&t.documentElement.namespaceURI===Gr?t.createElement(e):t.createElementNS(n,e)}}function Zu(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ei(e){var t=lr(e);return(t.local?Zu:Gu)(t)}function Ju(){}function gs(e){return e==null?Ju:function(){return this.querySelector(e)}}function ed(e){typeof e!="function"&&(e=gs(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=new Array(i),c,u,l=0;l<i;++l)(c=o[l])&&(u=e.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ke(r,this._parents)}function td(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nd(){return[]}function Mi(e){return e==null?nd:function(){return this.querySelectorAll(e)}}function rd(e){return function(){return td(e.apply(this,arguments))}}function sd(e){typeof e=="function"?e=rd(e):e=Mi(e);for(var t=this._groups,n=t.length,r=[],s=[],o=0;o<n;++o)for(var i=t[o],a=i.length,c,u=0;u<a;++u)(c=i[u])&&(r.push(e.call(c,c.__data__,u,i)),s.push(c));return new ke(r,s)}function Ii(e){return function(){return this.matches(e)}}function Ai(e){return function(t){return t.matches(e)}}var od=Array.prototype.find;function id(e){return function(){return od.call(this.children,e)}}function ad(){return this.firstElementChild}function cd(e){return this.select(e==null?ad:id(typeof e=="function"?e:Ai(e)))}var ld=Array.prototype.filter;function ud(){return Array.from(this.children)}function dd(e){return function(){return ld.call(this.children,e)}}function fd(e){return this.selectAll(e==null?ud:dd(typeof e=="function"?e:Ai(e)))}function hd(e){typeof e!="function"&&(e=Ii(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=[],c,u=0;u<i;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&a.push(c);return new ke(r,this._parents)}function ji(e){return new Array(e.length)}function md(){return new ke(this._enter||this._groups.map(ji),this._parents)}function Xn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Xn.prototype={constructor:Xn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function gd(e){return function(){return e}}function pd(e,t,n,r,s,o){for(var i=0,a,c=t.length,u=o.length;i<u;++i)(a=t[i])?(a.__data__=o[i],r[i]=a):n[i]=new Xn(e,o[i]);for(;i<c;++i)(a=t[i])&&(s[i]=a)}function yd(e,t,n,r,s,o,i){var a,c,u=new Map,l=t.length,f=o.length,d=new Array(l),h;for(a=0;a<l;++a)(c=t[a])&&(d[a]=h=i.call(c,c.__data__,a,t)+"",u.has(h)?s[a]=c:u.set(h,c));for(a=0;a<f;++a)h=i.call(e,o[a],a,o)+"",(c=u.get(h))?(r[a]=c,c.__data__=o[a],u.delete(h)):n[a]=new Xn(e,o[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(d[a])===c&&(s[a]=c)}function xd(e){return e.__data__}function bd(e,t){if(!arguments.length)return Array.from(this,xd);var n=t?yd:pd,r=this._parents,s=this._groups;typeof e!="function"&&(e=gd(e));for(var o=s.length,i=new Array(o),a=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],f=s[u],d=f.length,h=wd(e.call(l,l&&l.__data__,u,r)),y=h.length,p=a[u]=new Array(y),x=i[u]=new Array(y),b=c[u]=new Array(d);n(l,f,p,x,b,h,t);for(var C=0,g=0,w,S;C<y;++C)if(w=p[C]){for(C>=g&&(g=C+1);!(S=x[g])&&++g<y;);w._next=S||null}}return i=new ke(i,r),i._enter=a,i._exit=c,i}function wd(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vd(){return new ke(this._exit||this._groups.map(ji),this._parents)}function Cd(e,t,n){var r=this.enter(),s=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function Sd(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,o=r.length,i=Math.min(s,o),a=new Array(s),c=0;c<i;++c)for(var u=n[c],l=r[c],f=u.length,d=a[c]=new Array(f),h,y=0;y<f;++y)(h=u[y]||l[y])&&(d[y]=h);for(;c<s;++c)a[c]=n[c];return new ke(a,this._parents)}function kd(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,o=r[s],i;--s>=0;)(i=r[s])&&(o&&i.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(i,o),o=i);return this}function Nd(e){e||(e=_d);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var i=n[o],a=i.length,c=s[o]=new Array(a),u,l=0;l<a;++l)(u=i[l])&&(c[l]=u);c.sort(t)}return new ke(s,this._parents).order()}function _d(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ed(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Md(){return Array.from(this)}function Id(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length;s<o;++s){var i=r[s];if(i)return i}return null}function Ad(){let e=0;for(const t of this)++e;return e}function jd(){return!this.node()}function Ld(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],o=0,i=s.length,a;o<i;++o)(a=s[o])&&e.call(a,a.__data__,o,s);return this}function Td(e){return function(){this.removeAttribute(e)}}function Pd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $d(e,t){return function(){this.setAttribute(e,t)}}function Dd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Rd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function zd(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Od(e,t){var n=lr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pd:Td:typeof t=="function"?n.local?zd:Rd:n.local?Dd:$d)(n,t))}function Li(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Hd(e){return function(){this.style.removeProperty(e)}}function Bd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fd(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vd(e,t,n){return arguments.length>1?this.each((t==null?Hd:typeof t=="function"?Fd:Bd)(e,t,n??"")):Tt(this.node(),e)}function Tt(e,t){return e.style.getPropertyValue(t)||Li(e).getComputedStyle(e,null).getPropertyValue(t)}function qd(e){return function(){delete this[e]}}function Xd(e,t){return function(){this[e]=t}}function Yd(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Wd(e,t){return arguments.length>1?this.each((t==null?qd:typeof t=="function"?Yd:Xd)(e,t)):this.node()[e]}function Ti(e){return e.trim().split(/^|\s+/)}function ps(e){return e.classList||new Pi(e)}function Pi(e){this._node=e,this._names=Ti(e.getAttribute("class")||"")}Pi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $i(e,t){for(var n=ps(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Di(e,t){for(var n=ps(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Qd(e){return function(){$i(this,e)}}function Ud(e){return function(){Di(this,e)}}function Kd(e,t){return function(){(t.apply(this,arguments)?$i:Di)(this,e)}}function Gd(e,t){var n=Ti(e+"");if(arguments.length<2){for(var r=ps(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Kd:t?Qd:Ud)(n,t))}function Zd(){this.textContent=""}function Jd(e){return function(){this.textContent=e}}function ef(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function tf(e){return arguments.length?this.each(e==null?Zd:(typeof e=="function"?ef:Jd)(e)):this.node().textContent}function nf(){this.innerHTML=""}function rf(e){return function(){this.innerHTML=e}}function sf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function of(e){return arguments.length?this.each(e==null?nf:(typeof e=="function"?sf:rf)(e)):this.node().innerHTML}function af(){this.nextSibling&&this.parentNode.appendChild(this)}function cf(){return this.each(af)}function lf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uf(){return this.each(lf)}function df(e){var t=typeof e=="function"?e:Ei(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ff(){return null}function hf(e,t){var n=typeof e=="function"?e:Ei(e),r=t==null?ff:typeof t=="function"?t:gs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function mf(){var e=this.parentNode;e&&e.removeChild(this)}function gf(){return this.each(mf)}function pf(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yf(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xf(e){return this.select(e?yf:pf)}function bf(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wf(e){return function(t){e.call(this,t,this.__data__)}}function vf(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Cf(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,o;n<s;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Sf(e,t,n){return function(){var r=this.__on,s,o=wf(t);if(r){for(var i=0,a=r.length;i<a;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=t;return}}this.addEventListener(e.type,o,n),s={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(s):this.__on=[s]}}function kf(e,t,n){var r=vf(e+""),s,o=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(s=0,l=a[c];s<o;++s)if((i=r[s]).type===l.type&&i.name===l.name)return l.value}return}for(a=t?Sf:Cf,s=0;s<o;++s)this.each(a(r[s],t,n));return this}function Ri(e,t,n){var r=Li(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Nf(e,t){return function(){return Ri(this,e,t)}}function _f(e,t){return function(){return Ri(this,e,t.apply(this,arguments))}}function Ef(e,t){return this.each((typeof t=="function"?_f:Nf)(e,t))}function*Mf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,o=r.length,i;s<o;++s)(i=r[s])&&(yield i)}var zi=[null];function ke(e,t){this._groups=e,this._parents=t}function pn(){return new ke([[document.documentElement]],zi)}function If(){return this}ke.prototype=pn.prototype={constructor:ke,select:ed,selectAll:sd,selectChild:cd,selectChildren:fd,filter:hd,data:bd,enter:md,exit:vd,join:Cd,merge:Sd,selection:If,order:kd,sort:Nd,call:Ed,nodes:Md,node:Id,size:Ad,empty:jd,each:Ld,attr:Od,style:Vd,property:Wd,classed:Gd,text:tf,html:of,raise:cf,lower:uf,append:df,insert:hf,remove:gf,clone:xf,datum:bf,on:kf,dispatch:Ef,[Symbol.iterator]:Mf};function Se(e){return typeof e=="string"?new ke([[document.querySelector(e)]],[document.documentElement]):new ke([[e]],zi)}function Af(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Me(e,t){if(e=Af(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const jf={passive:!1},en={capture:!0,passive:!1};function Nr(e){e.stopImmediatePropagation()}function Et(e){e.preventDefault(),e.stopImmediatePropagation()}function Oi(e){var t=e.document.documentElement,n=Se(e).on("dragstart.drag",Et,en);"onselectstart"in t?n.on("selectstart.drag",Et,en):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hi(e,t){var n=e.document.documentElement,r=Se(e).on("dragstart.drag",null);t&&(r.on("click.drag",Et,en),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _n=e=>()=>e;function Zr(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:o,x:i,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Zr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lf(e){return!e.ctrlKey&&!e.button}function Tf(){return this.parentNode}function Pf(e,t){return t??{x:e.x,y:e.y}}function $f(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bi(){var e=Lf,t=Tf,n=Pf,r=$f,s={},o=cr("start","drag","end"),i=0,a,c,u,l,f=0;function d(w){w.on("mousedown.drag",h).filter(r).on("touchstart.drag",x).on("touchmove.drag",b,jf).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(w,S){if(!(l||!e.call(this,w,S))){var _=g(this,t.call(this,w,S),w,S,"mouse");_&&(Se(w.view).on("mousemove.drag",y,en).on("mouseup.drag",p,en),Oi(w.view),Nr(w),u=!1,a=w.clientX,c=w.clientY,_("start",w))}}function y(w){if(Et(w),!u){var S=w.clientX-a,_=w.clientY-c;u=S*S+_*_>f}s.mouse("drag",w)}function p(w){Se(w.view).on("mousemove.drag mouseup.drag",null),Hi(w.view,u),Et(w),s.mouse("end",w)}function x(w,S){if(e.call(this,w,S)){var _=w.changedTouches,E=t.call(this,w,S),M=_.length,L,z;for(L=0;L<M;++L)(z=g(this,E,w,S,_[L].identifier,_[L]))&&(Nr(w),z("start",w,_[L]))}}function b(w){var S=w.changedTouches,_=S.length,E,M;for(E=0;E<_;++E)(M=s[S[E].identifier])&&(Et(w),M("drag",w,S[E]))}function C(w){var S=w.changedTouches,_=S.length,E,M;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),E=0;E<_;++E)(M=s[S[E].identifier])&&(Nr(w),M("end",w,S[E]))}function g(w,S,_,E,M,L){var z=o.copy(),T=Me(L||_,S),P,R,v;if((v=n.call(w,new Zr("beforestart",{sourceEvent:_,target:d,identifier:M,active:i,x:T[0],y:T[1],dx:0,dy:0,dispatch:z}),E))!=null)return P=v.x-T[0]||0,R=v.y-T[1]||0,function I(N,A,$){var j=T,D;switch(N){case"start":s[M]=I,D=i++;break;case"end":delete s[M],--i;case"drag":T=Me($||A,S),D=i;break}z.call(N,w,new Zr(N,{sourceEvent:A,subject:v,target:d,identifier:M,active:D,x:T[0]+P,y:T[1]+R,dx:T[0]-j[0],dy:T[1]-j[1],dispatch:z}),E)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:_n(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:_n(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:_n(w),d):n},d.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:_n(!!w),d):r},d.on=function(){var w=o.on.apply(o,arguments);return w===o?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}function ys(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yn(){}var tn=.7,Yn=1/tn,Mt="\\s*([+-]?\\d+)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Df=/^#([0-9a-f]{3,8})$/,Rf=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),zf=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),Of=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${nn}\\)$`),Hf=new RegExp(`^rgba\\(${ze},${ze},${ze},${nn}\\)$`),Bf=new RegExp(`^hsl\\(${nn},${ze},${ze}\\)$`),Ff=new RegExp(`^hsla\\(${nn},${ze},${ze},${nn}\\)$`),Zs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ys(yn,xt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Js,formatHex:Js,formatHex8:Vf,formatHsl:qf,formatRgb:eo,toString:eo});function Js(){return this.rgb().formatHex()}function Vf(){return this.rgb().formatHex8()}function qf(){return Vi(this).formatHsl()}function eo(){return this.rgb().formatRgb()}function xt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Df.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?to(t):n===3?new ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?En(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?En(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Rf.exec(e))?new ve(t[1],t[2],t[3],1):(t=zf.exec(e))?new ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Of.exec(e))?En(t[1],t[2],t[3],t[4]):(t=Hf.exec(e))?En(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bf.exec(e))?so(t[1],t[2]/100,t[3]/100,1):(t=Ff.exec(e))?so(t[1],t[2]/100,t[3]/100,t[4]):Zs.hasOwnProperty(e)?to(Zs[e]):e==="transparent"?new ve(NaN,NaN,NaN,0):null}function to(e){return new ve(e>>16&255,e>>8&255,e&255,1)}function En(e,t,n,r){return r<=0&&(e=t=n=NaN),new ve(e,t,n,r)}function Xf(e){return e instanceof yn||(e=xt(e)),e?(e=e.rgb(),new ve(e.r,e.g,e.b,e.opacity)):new ve}function Jr(e,t,n,r){return arguments.length===1?Xf(e):new ve(e,t,n,r??1)}function ve(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ys(ve,Jr,Fi(yn,{brighter(e){return e=e==null?Yn:Math.pow(Yn,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ve(pt(this.r),pt(this.g),pt(this.b),Wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:no,formatHex:no,formatHex8:Yf,formatRgb:ro,toString:ro}));function no(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}`}function Yf(){return`#${ft(this.r)}${ft(this.g)}${ft(this.b)}${ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function ro(){const e=Wn(this.opacity);return`${e===1?"rgb(":"rgba("}${pt(this.r)}, ${pt(this.g)}, ${pt(this.b)}${e===1?")":`, ${e})`}`}function Wn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ft(e){return e=pt(e),(e<16?"0":"")+e.toString(16)}function so(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ie(e,t,n,r)}function Vi(e){if(e instanceof Ie)return new Ie(e.h,e.s,e.l,e.opacity);if(e instanceof yn||(e=xt(e)),!e)return new Ie;if(e instanceof Ie)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,a=o-s,c=(o+s)/2;return a?(t===o?i=(n-r)/a+(n<r)*6:n===o?i=(r-t)/a+2:i=(t-n)/a+4,a/=c<.5?o+s:2-o-s,i*=60):a=c>0&&c<1?0:i,new Ie(i,a,c,e.opacity)}function Wf(e,t,n,r){return arguments.length===1?Vi(e):new Ie(e,t,n,r??1)}function Ie(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ys(Ie,Wf,Fi(yn,{brighter(e){return e=e==null?Yn:Math.pow(Yn,e),new Ie(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tn:Math.pow(tn,e),new Ie(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new ve(_r(e>=240?e-240:e+120,s,r),_r(e,s,r),_r(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Ie(oo(this.h),Mn(this.s),Mn(this.l),Wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wn(this.opacity);return`${e===1?"hsl(":"hsla("}${oo(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oo(e){return e=(e||0)%360,e<0?e+360:e}function Mn(e){return Math.max(0,Math.min(1,e||0))}function _r(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xs=e=>()=>e;function Qf(e,t){return function(n){return e+n*t}}function Uf(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Kf(e){return(e=+e)==1?qi:function(t,n){return n-t?Uf(t,n,e):xs(isNaN(t)?n:t)}}function qi(e,t){var n=t-e;return n?Qf(e,n):xs(isNaN(e)?t:e)}const Qn=function e(t){var n=Kf(t);function r(s,o){var i=n((s=Jr(s)).r,(o=Jr(o)).r),a=n(s.g,o.g),c=n(s.b,o.b),u=qi(s.opacity,o.opacity);return function(l){return s.r=i(l),s.g=a(l),s.b=c(l),s.opacity=u(l),s+""}}return r.gamma=e,r}(1);function Gf(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(o){for(s=0;s<n;++s)r[s]=e[s]*(1-o)+t[s]*o;return r}}function Zf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Jf(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),o=new Array(n),i;for(i=0;i<r;++i)s[i]=Zt(e[i],t[i]);for(;i<n;++i)o[i]=t[i];return function(a){for(i=0;i<r;++i)o[i]=s[i](a);return o}}function eh(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function De(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function th(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Zt(e[s],t[s]):r[s]=t[s];return function(o){for(s in n)r[s]=n[s](o);return r}}var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Er=new RegExp(es.source,"g");function nh(e){return function(){return e}}function rh(e){return function(t){return e(t)+""}}function Xi(e,t){var n=es.lastIndex=Er.lastIndex=0,r,s,o,i=-1,a=[],c=[];for(e=e+"",t=t+"";(r=es.exec(e))&&(s=Er.exec(t));)(o=s.index)>n&&(o=t.slice(n,o),a[i]?a[i]+=o:a[++i]=o),(r=r[0])===(s=s[0])?a[i]?a[i]+=s:a[++i]=s:(a[++i]=null,c.push({i,x:De(r,s)})),n=Er.lastIndex;return n<t.length&&(o=t.slice(n),a[i]?a[i]+=o:a[++i]=o),a.length<2?c[0]?rh(c[0].x):nh(t):(t=c.length,function(u){for(var l=0,f;l<t;++l)a[(f=c[l]).i]=f.x(u);return a.join("")})}function Zt(e,t){var n=typeof t,r;return t==null||n==="boolean"?xs(t):(n==="number"?De:n==="string"?(r=xt(t))?(t=r,Qn):Xi:t instanceof xt?Qn:t instanceof Date?eh:Zf(t)?Gf:Array.isArray(t)?Jf:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?th:De)(e,t)}var io=180/Math.PI,ts={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yi(e,t,n,r,s,o){var i,a,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:s,translateY:o,rotate:Math.atan2(t,e)*io,skewX:Math.atan(c)*io,scaleX:i,scaleY:a}}var In;function sh(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ts:Yi(t.a,t.b,t.c,t.d,t.e,t.f)}function oh(e){return e==null||(In||(In=document.createElementNS("http://www.w3.org/2000/svg","g")),In.setAttribute("transform",e),!(e=In.transform.baseVal.consolidate()))?ts:(e=e.matrix,Yi(e.a,e.b,e.c,e.d,e.e,e.f))}function Wi(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function o(u,l,f,d,h,y){if(u!==f||l!==d){var p=h.push("translate(",null,t,null,n);y.push({i:p-4,x:De(u,f)},{i:p-2,x:De(l,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function i(u,l,f,d){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),d.push({i:f.push(s(f)+"rotate(",null,r)-2,x:De(u,l)})):l&&f.push(s(f)+"rotate("+l+r)}function a(u,l,f,d){u!==l?d.push({i:f.push(s(f)+"skewX(",null,r)-2,x:De(u,l)}):l&&f.push(s(f)+"skewX("+l+r)}function c(u,l,f,d,h,y){if(u!==f||l!==d){var p=h.push(s(h)+"scale(",null,",",null,")");y.push({i:p-4,x:De(u,f)},{i:p-2,x:De(l,d)})}else(f!==1||d!==1)&&h.push(s(h)+"scale("+f+","+d+")")}return function(u,l){var f=[],d=[];return u=e(u),l=e(l),o(u.translateX,u.translateY,l.translateX,l.translateY,f,d),i(u.rotate,l.rotate,f,d),a(u.skewX,l.skewX,f,d),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,d),u=l=null,function(h){for(var y=-1,p=d.length,x;++y<p;)f[(x=d[y]).i]=x.x(h);return f.join("")}}}var ih=Wi(sh,"px, ","px)","deg)"),ah=Wi(oh,", ",")",")"),ch=1e-12;function ao(e){return((e=Math.exp(e))+1/e)/2}function lh(e){return((e=Math.exp(e))-1/e)/2}function uh(e){return((e=Math.exp(2*e))-1)/(e+1)}const Rn=function e(t,n,r){function s(o,i){var a=o[0],c=o[1],u=o[2],l=i[0],f=i[1],d=i[2],h=l-a,y=f-c,p=h*h+y*y,x,b;if(p<ch)b=Math.log(d/u)/t,x=function(E){return[a+E*h,c+E*y,u*Math.exp(t*E*b)]};else{var C=Math.sqrt(p),g=(d*d-u*u+r*p)/(2*u*n*C),w=(d*d-u*u-r*p)/(2*d*n*C),S=Math.log(Math.sqrt(g*g+1)-g),_=Math.log(Math.sqrt(w*w+1)-w);b=(_-S)/t,x=function(E){var M=E*b,L=ao(S),z=u/(n*C)*(L*uh(t*M+S)-lh(S));return[a+z*h,c+z*y,u*L/ao(t*M+S)]}}return x.duration=b*1e3*t/Math.SQRT2,x}return s.rho=function(o){var i=Math.max(.001,+o),a=i*i,c=a*a;return e(i,a,c)},s}(Math.SQRT2,2,4);var Pt=0,Ut=0,Yt=0,Qi=1e3,Un,Kt,Kn=0,bt=0,ur=0,rn=typeof performance=="object"&&performance.now?performance:Date,Ui=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bs(){return bt||(Ui(dh),bt=rn.now()+ur)}function dh(){bt=0}function Gn(){this._call=this._time=this._next=null}Gn.prototype=Ki.prototype={constructor:Gn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bs():+n)+(t==null?0:+t),!this._next&&Kt!==this&&(Kt?Kt._next=this:Un=this,Kt=this),this._call=e,this._time=n,ns()},stop:function(){this._call&&(this._call=null,this._time=1/0,ns())}};function Ki(e,t,n){var r=new Gn;return r.restart(e,t,n),r}function fh(){bs(),++Pt;for(var e=Un,t;e;)(t=bt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pt}function co(){bt=(Kn=rn.now())+ur,Pt=Ut=0;try{fh()}finally{Pt=0,mh(),bt=0}}function hh(){var e=rn.now(),t=e-Kn;t>Qi&&(ur-=t,Kn=e)}function mh(){for(var e,t=Un,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Un=n);Kt=e,ns(r)}function ns(e){if(!Pt){Ut&&(Ut=clearTimeout(Ut));var t=e-bt;t>24?(e<1/0&&(Ut=setTimeout(co,e-rn.now()-ur)),Yt&&(Yt=clearInterval(Yt))):(Yt||(Kn=rn.now(),Yt=setInterval(hh,Qi)),Pt=1,Ui(co))}}function lo(e,t,n){var r=new Gn;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var gh=cr("start","end","cancel","interrupt"),ph=[],Gi=0,uo=1,rs=2,zn=3,fo=4,ss=5,On=6;function dr(e,t,n,r,s,o){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;yh(e,n,{name:t,index:r,group:s,on:gh,tween:ph,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Gi})}function ws(e,t){var n=Te(e,t);if(n.state>Gi)throw new Error("too late; already scheduled");return n}function Ve(e,t){var n=Te(e,t);if(n.state>zn)throw new Error("too late; already running");return n}function Te(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function yh(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Ki(o,0,n.time);function o(u){n.state=uo,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var l,f,d,h;if(n.state!==uo)return c();for(l in r)if(h=r[l],h.name===n.name){if(h.state===zn)return lo(i);h.state===fo?(h.state=On,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[l]):+l<t&&(h.state=On,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[l])}if(lo(function(){n.state===zn&&(n.state=fo,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=rs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rs){for(n.state=zn,s=new Array(d=n.tween.length),l=0,f=-1;l<d;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=h);s.length=f+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=ss,1),f=-1,d=s.length;++f<d;)s[f].call(e,l);n.state===ss&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=On,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Hn(e,t){var n=e.__transition,r,s,o=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){o=!1;continue}s=r.state>rs&&r.state<ss,r.state=On,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}o&&delete e.__transition}}function xh(e){return this.each(function(){Hn(this,e)})}function bh(e,t){var n,r;return function(){var s=Ve(this,e),o=s.tween;if(o!==n){r=n=o;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function wh(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=Ve(this,e),i=o.tween;if(i!==r){s=(r=i).slice();for(var a={name:t,value:n},c=0,u=s.length;c<u;++c)if(s[c].name===t){s[c]=a;break}c===u&&s.push(a)}o.tween=s}}function vh(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Te(this.node(),n).tween,s=0,o=r.length,i;s<o;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?bh:wh)(n,e,t))}function vs(e,t,n){var r=e._id;return e.each(function(){var s=Ve(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Te(s,r).value[t]}}function Zi(e,t){var n;return(typeof t=="number"?De:t instanceof xt?Qn:(n=xt(t))?(t=n,Qn):Xi)(e,t)}function Ch(e){return function(){this.removeAttribute(e)}}function Sh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kh(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttribute(e);return i===s?null:i===r?o:o=t(r=i,n)}}function Nh(e,t,n){var r,s=n+"",o;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?o:o=t(r=i,n)}}function _h(e,t,n){var r,s,o;return function(){var i,a=n(this),c;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=a+"",i===c?null:i===r&&c===s?o:(s=c,o=t(r=i,a)))}}function Eh(e,t,n){var r,s,o;return function(){var i,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=a+"",i===c?null:i===r&&c===s?o:(s=c,o=t(r=i,a)))}}function Mh(e,t){var n=lr(e),r=n==="transform"?ah:Zi;return this.attrTween(e,typeof t=="function"?(n.local?Eh:_h)(n,r,vs(this,"attr."+e,t)):t==null?(n.local?Sh:Ch)(n):(n.local?Nh:kh)(n,r,t))}function Ih(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ah(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function jh(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Ah(e,o)),n}return s._value=t,s}function Lh(e,t){var n,r;function s(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Ih(e,o)),n}return s._value=t,s}function Th(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=lr(e);return this.tween(n,(r.local?jh:Lh)(r,t))}function Ph(e,t){return function(){ws(this,e).delay=+t.apply(this,arguments)}}function $h(e,t){return t=+t,function(){ws(this,e).delay=t}}function Dh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ph:$h)(t,e)):Te(this.node(),t).delay}function Rh(e,t){return function(){Ve(this,e).duration=+t.apply(this,arguments)}}function zh(e,t){return t=+t,function(){Ve(this,e).duration=t}}function Oh(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rh:zh)(t,e)):Te(this.node(),t).duration}function Hh(e,t){if(typeof t!="function")throw new Error;return function(){Ve(this,e).ease=t}}function Bh(e){var t=this._id;return arguments.length?this.each(Hh(t,e)):Te(this.node(),t).ease}function Fh(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ve(this,e).ease=n}}function Vh(e){if(typeof e!="function")throw new Error;return this.each(Fh(this._id,e))}function qh(e){typeof e!="function"&&(e=Ii(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var o=t[s],i=o.length,a=r[s]=[],c,u=0;u<i;++u)(c=o[u])&&e.call(c,c.__data__,u,o)&&a.push(c);return new Ge(r,this._parents,this._name,this._id)}function Xh(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,o=Math.min(r,s),i=new Array(r),a=0;a<o;++a)for(var c=t[a],u=n[a],l=c.length,f=i[a]=new Array(l),d,h=0;h<l;++h)(d=c[h]||u[h])&&(f[h]=d);for(;a<r;++a)i[a]=t[a];return new Ge(i,this._parents,this._name,this._id)}function Yh(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Wh(e,t,n){var r,s,o=Yh(t)?ws:Ve;return function(){var i=o(this,e),a=i.on;a!==r&&(s=(r=a).copy()).on(t,n),i.on=s}}function Qh(e,t){var n=this._id;return arguments.length<2?Te(this.node(),n).on.on(e):this.each(Wh(n,e,t))}function Uh(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Kh(){return this.on("end.remove",Uh(this._id))}function Gh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gs(e));for(var r=this._groups,s=r.length,o=new Array(s),i=0;i<s;++i)for(var a=r[i],c=a.length,u=o[i]=new Array(c),l,f,d=0;d<c;++d)(l=a[d])&&(f=e.call(l,l.__data__,d,a))&&("__data__"in l&&(f.__data__=l.__data__),u[d]=f,dr(u[d],t,n,d,u,Te(l,n)));return new Ge(o,this._parents,t,n)}function Zh(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mi(e));for(var r=this._groups,s=r.length,o=[],i=[],a=0;a<s;++a)for(var c=r[a],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var d=e.call(l,l.__data__,f,c),h,y=Te(l,n),p=0,x=d.length;p<x;++p)(h=d[p])&&dr(h,t,n,p,d,y);o.push(d),i.push(l)}return new Ge(o,i,t,n)}var Jh=pn.prototype.constructor;function em(){return new Jh(this._groups,this._parents)}function tm(e,t){var n,r,s;return function(){var o=Tt(this,e),i=(this.style.removeProperty(e),Tt(this,e));return o===i?null:o===n&&i===r?s:s=t(n=o,r=i)}}function Ji(e){return function(){this.style.removeProperty(e)}}function nm(e,t,n){var r,s=n+"",o;return function(){var i=Tt(this,e);return i===s?null:i===r?o:o=t(r=i,n)}}function rm(e,t,n){var r,s,o;return function(){var i=Tt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Tt(this,e))),i===c?null:i===r&&c===s?o:(s=c,o=t(r=i,a))}}function sm(e,t){var n,r,s,o="style."+t,i="end."+o,a;return function(){var c=Ve(this,e),u=c.on,l=c.value[o]==null?a||(a=Ji(t)):void 0;(u!==n||s!==l)&&(r=(n=u).copy()).on(i,s=l),c.on=r}}function om(e,t,n){var r=(e+="")=="transform"?ih:Zi;return t==null?this.styleTween(e,tm(e,r)).on("end.style."+e,Ji(e)):typeof t=="function"?this.styleTween(e,rm(e,r,vs(this,"style."+e,t))).each(sm(this._id,e)):this.styleTween(e,nm(e,r,t),n).on("end.style."+e,null)}function im(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function am(e,t,n){var r,s;function o(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&im(e,i,n)),r}return o._value=t,o}function cm(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,am(e,t,n??""))}function lm(e){return function(){this.textContent=e}}function um(e){return function(){var t=e(this);this.textContent=t??""}}function dm(e){return this.tween("text",typeof e=="function"?um(vs(this,"text",e)):lm(e==null?"":e+""))}function fm(e){return function(t){this.textContent=e.call(this,t)}}function hm(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&fm(s)),t}return r._value=e,r}function mm(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,hm(e))}function gm(){for(var e=this._name,t=this._id,n=ea(),r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],a=i.length,c,u=0;u<a;++u)if(c=i[u]){var l=Te(c,t);dr(c,e,n,u,i,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ge(r,this._parents,e,n)}function pm(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(o,i){var a={value:i},c={value:function(){--s===0&&o()}};n.each(function(){var u=Ve(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),s===0&&o()})}var ym=0;function Ge(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ea(){return++ym}var Xe=pn.prototype;Ge.prototype={constructor:Ge,select:Gh,selectAll:Zh,selectChild:Xe.selectChild,selectChildren:Xe.selectChildren,filter:qh,merge:Xh,selection:em,transition:gm,call:Xe.call,nodes:Xe.nodes,node:Xe.node,size:Xe.size,empty:Xe.empty,each:Xe.each,on:Qh,attr:Mh,attrTween:Th,style:om,styleTween:cm,text:dm,textTween:mm,remove:Kh,tween:vh,delay:Dh,duration:Oh,ease:Bh,easeVarying:Vh,end:pm,[Symbol.iterator]:Xe[Symbol.iterator]};function xm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var bm={time:null,delay:0,duration:250,ease:xm};function wm(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function vm(e){var t,n;e instanceof Ge?(t=e._id,e=e._name):(t=ea(),(n=bm).time=bs(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var i=r[o],a=i.length,c,u=0;u<a;++u)(c=i[u])&&dr(c,e,t,u,i,n||wm(c,t));return new Ge(r,this._parents,e,t)}pn.prototype.interrupt=xh;pn.prototype.transition=vm;const An=e=>()=>e;function Cm(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Ue(e,t,n){this.k=e,this.x=t,this.y=n}Ue.prototype={constructor:Ue,scale:function(e){return e===1?this:new Ue(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ue(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var fr=new Ue(1,0,0);ta.prototype=Ue.prototype;function ta(e){for(;!e.__zoom;)if(!(e=e.parentNode))return fr;return e.__zoom}function Mr(e){e.stopImmediatePropagation()}function Wt(e){e.preventDefault(),e.stopImmediatePropagation()}function Sm(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function km(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ho(){return this.__zoom||fr}function Nm(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function _m(){return navigator.maxTouchPoints||"ontouchstart"in this}function Em(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}function na(){var e=Sm,t=km,n=Em,r=Nm,s=_m,o=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Rn,u=cr("start","zoom","end"),l,f,d,h=500,y=150,p=0,x=10;function b(v){v.property("__zoom",ho).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",z).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",P).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(v,I,N,A){var $=v.selection?v.selection():v;$.property("__zoom",ho),v!==$?S(v,I,N,A):$.interrupt().each(function(){_(this,arguments).event(A).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},b.scaleBy=function(v,I,N,A){b.scaleTo(v,function(){var $=this.__zoom.k,j=typeof I=="function"?I.apply(this,arguments):I;return $*j},N,A)},b.scaleTo=function(v,I,N,A){b.transform(v,function(){var $=t.apply(this,arguments),j=this.__zoom,D=N==null?w($):typeof N=="function"?N.apply(this,arguments):N,O=j.invert(D),B=typeof I=="function"?I.apply(this,arguments):I;return n(g(C(j,B),D,O),$,i)},N,A)},b.translateBy=function(v,I,N,A){b.transform(v,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),i)},null,A)},b.translateTo=function(v,I,N,A,$){b.transform(v,function(){var j=t.apply(this,arguments),D=this.__zoom,O=A==null?w(j):typeof A=="function"?A.apply(this,arguments):A;return n(fr.translate(O[0],O[1]).scale(D.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof N=="function"?-N.apply(this,arguments):-N),j,i)},A,$)};function C(v,I){return I=Math.max(o[0],Math.min(o[1],I)),I===v.k?v:new Ue(I,v.x,v.y)}function g(v,I,N){var A=I[0]-N[0]*v.k,$=I[1]-N[1]*v.k;return A===v.x&&$===v.y?v:new Ue(v.k,A,$)}function w(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function S(v,I,N,A){v.on("start.zoom",function(){_(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(A).end()}).tween("zoom",function(){var $=this,j=arguments,D=_($,j).event(A),O=t.apply($,j),B=N==null?w(O):typeof N=="function"?N.apply($,j):N,X=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),V=$.__zoom,Q=typeof I=="function"?I.apply($,j):I,U=c(V.invert(B).concat(X/V.k),Q.invert(B).concat(X/Q.k));return function(W){if(W===1)W=Q;else{var q=U(W),Z=X/q[2];W=new Ue(Z,B[0]-q[0]*Z,B[1]-q[1]*Z)}D.zoom(null,W)}})}function _(v,I,N){return!N&&v.__zooming||new E(v,I)}function E(v,I){this.that=v,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,I),this.taps=0}E.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,I){return this.mouse&&v!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var I=Se(this.that).datum();u.call(v,this.that,new Cm(v,{sourceEvent:this.sourceEvent,target:b,transform:this.that.__zoom,dispatch:u}),I)}};function M(v,...I){if(!e.apply(this,arguments))return;var N=_(this,I).event(v),A=this.__zoom,$=Math.max(o[0],Math.min(o[1],A.k*Math.pow(2,r.apply(this,arguments)))),j=Me(v);if(N.wheel)(N.mouse[0][0]!==j[0]||N.mouse[0][1]!==j[1])&&(N.mouse[1]=A.invert(N.mouse[0]=j)),clearTimeout(N.wheel);else{if(A.k===$)return;N.mouse=[j,A.invert(j)],Hn(this),N.start()}Wt(v),N.wheel=setTimeout(D,y),N.zoom("mouse",n(g(C(A,$),N.mouse[0],N.mouse[1]),N.extent,i));function D(){N.wheel=null,N.end()}}function L(v,...I){if(d||!e.apply(this,arguments))return;var N=v.currentTarget,A=_(this,I,!0).event(v),$=Se(v.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",X,!0),j=Me(v,N),D=v.clientX,O=v.clientY;Oi(v.view),Mr(v),A.mouse=[j,this.__zoom.invert(j)],Hn(this),A.start();function B(V){if(Wt(V),!A.moved){var Q=V.clientX-D,U=V.clientY-O;A.moved=Q*Q+U*U>p}A.event(V).zoom("mouse",n(g(A.that.__zoom,A.mouse[0]=Me(V,N),A.mouse[1]),A.extent,i))}function X(V){$.on("mousemove.zoom mouseup.zoom",null),Hi(V.view,A.moved),Wt(V),A.event(V).end()}}function z(v,...I){if(e.apply(this,arguments)){var N=this.__zoom,A=Me(v.changedTouches?v.changedTouches[0]:v,this),$=N.invert(A),j=N.k*(v.shiftKey?.5:2),D=n(g(C(N,j),A,$),t.apply(this,I),i);Wt(v),a>0?Se(this).transition().duration(a).call(S,D,A,v):Se(this).call(b.transform,D,A,v)}}function T(v,...I){if(e.apply(this,arguments)){var N=v.touches,A=N.length,$=_(this,I,v.changedTouches.length===A).event(v),j,D,O,B;for(Mr(v),D=0;D<A;++D)O=N[D],B=Me(O,this),B=[B,this.__zoom.invert(B),O.identifier],$.touch0?!$.touch1&&$.touch0[2]!==B[2]&&($.touch1=B,$.taps=0):($.touch0=B,j=!0,$.taps=1+!!l);l&&(l=clearTimeout(l)),j&&($.taps<2&&(f=B[0],l=setTimeout(function(){l=null},h)),Hn(this),$.start())}}function P(v,...I){if(this.__zooming){var N=_(this,I).event(v),A=v.changedTouches,$=A.length,j,D,O,B;for(Wt(v),j=0;j<$;++j)D=A[j],O=Me(D,this),N.touch0&&N.touch0[2]===D.identifier?N.touch0[0]=O:N.touch1&&N.touch1[2]===D.identifier&&(N.touch1[0]=O);if(D=N.that.__zoom,N.touch1){var X=N.touch0[0],V=N.touch0[1],Q=N.touch1[0],U=N.touch1[1],W=(W=Q[0]-X[0])*W+(W=Q[1]-X[1])*W,q=(q=U[0]-V[0])*q+(q=U[1]-V[1])*q;D=C(D,Math.sqrt(W/q)),O=[(X[0]+Q[0])/2,(X[1]+Q[1])/2],B=[(V[0]+U[0])/2,(V[1]+U[1])/2]}else if(N.touch0)O=N.touch0[0],B=N.touch0[1];else return;N.zoom("touch",n(g(D,O,B),N.extent,i))}}function R(v,...I){if(this.__zooming){var N=_(this,I).event(v),A=v.changedTouches,$=A.length,j,D;for(Mr(v),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),j=0;j<$;++j)D=A[j],N.touch0&&N.touch0[2]===D.identifier?delete N.touch0:N.touch1&&N.touch1[2]===D.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(D=Me(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<x)){var O=Se(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return b.wheelDelta=function(v){return arguments.length?(r=typeof v=="function"?v:An(+v),b):r},b.filter=function(v){return arguments.length?(e=typeof v=="function"?v:An(!!v),b):e},b.touchable=function(v){return arguments.length?(s=typeof v=="function"?v:An(!!v),b):s},b.extent=function(v){return arguments.length?(t=typeof v=="function"?v:An([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),b):t},b.scaleExtent=function(v){return arguments.length?(o[0]=+v[0],o[1]=+v[1],b):[o[0],o[1]]},b.translateExtent=function(v){return arguments.length?(i[0][0]=+v[0][0],i[1][0]=+v[1][0],i[0][1]=+v[0][1],i[1][1]=+v[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(v){return arguments.length?(n=v,b):n},b.duration=function(v){return arguments.length?(a=+v,b):a},b.interpolate=function(v){return arguments.length?(c=v,b):c},b.on=function(){var v=u.on.apply(u,arguments);return v===u?b:v},b.clickDistance=function(v){return arguments.length?(p=(v=+v)*v,b):Math.sqrt(p)},b.tapDistance=function(v){return arguments.length?(x=+v,b):x},b}const Oe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},sn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ra=["Enter"," ","Escape"],sa={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var $t;(function(e){e.Strict="strict",e.Loose="loose"})($t||($t={}));var yt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(yt||(yt={}));var on;(function(e){e.Partial="partial",e.Full="full"})(on||(on={}));const oa={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var st;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(st||(st={}));var an;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(an||(an={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));const mo={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top};function ia(e){return e===null?null:e?"valid":"invalid"}const aa=e=>"id"in e&&"source"in e&&"target"in e,Mm=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Cs=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),xn=(e,t=[0,0])=>{const{width:n,height:r}=et(e),s=e.origin??t,o=n*s[0],i=r*s[1];return{x:e.position.x-o,y:e.position.y-i}},Im=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const o=typeof s=="string";let i=!t.nodeLookup&&!o?s:void 0;t.nodeLookup&&(i=o?t.nodeLookup.get(s):Cs(s)?s:t.nodeLookup.get(s.id));const a=i?Zn(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return hr(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return mr(n)},bn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const s=Zn(r);n=hr(n,s)}}),mr(n)},Ss=(e,t,[n,r,s]=[0,0,1],o=!1,i=!1)=>{const a={...wn(t,[n,r,s]),width:t.width/s,height:t.height/s},c=[];for(const u of e.values()){const{measured:l,selectable:f=!0,hidden:d=!1}=u;if(i&&!f||d)continue;const h=l.width??u.width??u.initialWidth??null,y=l.height??u.height??u.initialHeight??null,p=cn(a,Rt(u)),x=(h??0)*(y??0),b=o&&p>0;(!u.internals.handleBounds||b||p>=x||u.dragging)&&c.push(u)}return c},Am=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function jm(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function Lm({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:o},i){if(e.size===0)return Promise.resolve(!0);const a=jm(e,i),c=bn(a),u=ks(c,t,n,(i==null?void 0:i.minZoom)??s,(i==null?void 0:i.maxZoom)??o,(i==null?void 0:i.padding)??.1);return await r.setViewport(u,{duration:i==null?void 0:i.duration,ease:i==null?void 0:i.ease,interpolate:i==null?void 0:i.interpolate}),Promise.resolve(!0)}function ca({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:o}){const i=n.get(e),a=i.parentId?n.get(i.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},l=i.origin??r;let f=i.extent||s;if(i.extent==="parent"&&!i.expandParent)if(!a)o==null||o("005",Oe.error005());else{const h=a.measured.width,y=a.measured.height;h&&y&&(f=[[c,u],[c+h,u+y]])}else a&&zt(i.extent)&&(f=[[i.extent[0][0]+c,i.extent[0][1]+u],[i.extent[1][0]+c,i.extent[1][1]+u]]);const d=zt(f)?wt(t,f,i.measured):t;return(i.measured.width===void 0||i.measured.height===void 0)&&(o==null||o("015",Oe.error015())),{position:{x:d.x-c+(i.measured.width??0)*l[0],y:d.y-u+(i.measured.height??0)*l[1]},positionAbsolute:d}}async function Tm({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const o=new Set(e.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const h=o.has(d.id),y=!h&&d.parentId&&i.find(p=>p.id===d.parentId);(h||y)&&i.push(d)}const a=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),l=Am(i,c);for(const d of c)a.has(d.id)&&!l.find(y=>y.id===d.id)&&l.push(d);if(!s)return{edges:l,nodes:i};const f=await s({nodes:i,edges:l});return typeof f=="boolean"?f?{edges:l,nodes:i}:{edges:[],nodes:[]}:f}const Dt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),wt=(e={x:0,y:0},t,n)=>({x:Dt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Dt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function la(e,t,n){const{width:r,height:s}=et(n),{x:o,y:i}=n.internals.positionAbsolute;return wt(e,[[o,i],[o+r,i+s]],t)}const go=(e,t,n)=>e<t?Dt(Math.abs(e-t),1,t)/t:e>n?-Dt(Math.abs(e-n),1,t)/t:0,ua=(e,t,n=15,r=40)=>{const s=go(e.x,r,t.width-r)*n,o=go(e.y,r,t.height-r)*n;return[s,o]},hr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),os=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),mr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Rt=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Cs(e)?e.internals.positionAbsolute:xn(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0}},Zn=(e,t=[0,0])=>{var s,o;const{x:n,y:r}=Cs(e)?e.internals.positionAbsolute:xn(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((o=e.measured)==null?void 0:o.height)??e.height??e.initialHeight??0)}},da=(e,t)=>mr(hr(os(e),os(t))),cn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},po=e=>Ae(e.width)&&Ae(e.height)&&Ae(e.x)&&Ae(e.y),Ae=e=>!isNaN(e)&&isFinite(e),Pm=(e,t)=>{},gr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),wn=({x:e,y:t},[n,r,s],o=!1,i=[1,1])=>{const a={x:(e-n)/s,y:(t-r)/s};return o?gr(a,i):a},Jn=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r});function kt(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function $m(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=kt(e,n),s=kt(e,t);return{top:r,right:s,bottom:r,left:s,x:s*2,y:r*2}}if(typeof e=="object"){const r=kt(e.top??e.y??0,n),s=kt(e.bottom??e.y??0,n),o=kt(e.left??e.x??0,t),i=kt(e.right??e.x??0,t);return{top:r,right:i,bottom:s,left:o,x:o+i,y:r+s}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Dm(e,t,n,r,s,o){const{x:i,y:a}=Jn(e,[t,n,r]),{x:c,y:u}=Jn({x:e.x+e.width,y:e.y+e.height},[t,n,r]),l=s-c,f=o-u;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(l),bottom:Math.floor(f)}}const ks=(e,t,n,r,s,o)=>{const i=$m(o,t,n),a=(t-i.x)/e.width,c=(n-i.y)/e.height,u=Math.min(a,c),l=Dt(u,r,s),f=e.x+e.width/2,d=e.y+e.height/2,h=t/2-f*l,y=n/2-d*l,p=Dm(e,h,y,l,t,n),x={left:Math.min(p.left-i.left,0),top:Math.min(p.top-i.top,0),right:Math.min(p.right-i.right,0),bottom:Math.min(p.bottom-i.bottom,0)};return{x:h-x.left+x.right,y:y-x.top+x.bottom,zoom:l}},er=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function zt(e){return e!==void 0&&e!=="parent"}function et(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function fa(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function ha(e,t={width:0,height:0},n,r,s){const o={...e},i=r.get(n);if(i){const a=i.origin||s;o.x+=i.internals.positionAbsolute.x-(t.width??0)*a[0],o.y+=i.internals.positionAbsolute.y-(t.height??0)*a[1]}return o}function yo(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Rm(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}function zm(e){return{...sa,...e||{}}}function Jt(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:s}){const{x:o,y:i}=Re(e),a=wn({x:o-((s==null?void 0:s.left)??0),y:i-((s==null?void 0:s.top)??0)},r),{x:c,y:u}=n?gr(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const Ns=e=>({width:e.offsetWidth,height:e.offsetHeight}),ma=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Om=["INPUT","SELECT","TEXTAREA"];function ga(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Om.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const pa=e=>"clientX"in e,Re=(e,t)=>{var o,i;const n=pa(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},xo=(e,t,n,r,s)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:s,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Ns(i)}})};function ya({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:i,targetControlY:a}){const c=e*.125+s*.375+i*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,l=Math.abs(c-e),f=Math.abs(u-t);return[c,u,l,f]}function jn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function bo({pos:e,x1:t,y1:n,x2:r,y2:s,c:o}){switch(e){case Y.Left:return[t-jn(t-r,o),n];case Y.Right:return[t+jn(r-t,o),n];case Y.Top:return[t,n-jn(n-s,o)];case Y.Bottom:return[t,n+jn(s-n,o)]}}function xa({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:s,targetPosition:o=Y.Top,curvature:i=.25}){const[a,c]=bo({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[u,l]=bo({pos:o,x1:r,y1:s,x2:e,y2:t,c:i}),[f,d,h,y]=ya({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${r},${s}`,f,d,h,y]}function ba({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,o=n<e?n+s:n-s,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[o,a,s,i]}function Hm({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:s=!1}){if(r!==void 0)return r;const o=s&&n?1e3:0,i=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return o+i}function Bm({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const o=hr(Zn(e),Zn(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const i={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return cn(i,mr(o))>0}const Fm=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Vm=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),wa=(e,t)=>{if(!e.source||!e.target)return t;let n;return aa(e)?n={...e}:n={...e,id:Fm(e)},Vm(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function va({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,o,i,a]=ba({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,o,i,a]}const wo={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},qm=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},vo=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Xm({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:s,offset:o,stepPosition:i}){const a=wo[t],c=wo[r],u={x:e.x+a.x*o,y:e.y+a.y*o},l={x:n.x+c.x*o,y:n.y+c.y*o},f=qm({source:u,sourcePosition:t,target:l}),d=f.x!==0?"x":"y",h=f[d];let y=[],p,x;const b={x:0,y:0},C={x:0,y:0},[,,g,w]=ba({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*c[d]===-1){d==="x"?(p=s.x??u.x+(l.x-u.x)*i,x=s.y??(u.y+l.y)/2):(p=s.x??(u.x+l.x)/2,x=s.y??u.y+(l.y-u.y)*i);const _=[{x:p,y:u.y},{x:p,y:l.y}],E=[{x:u.x,y:x},{x:l.x,y:x}];a[d]===h?y=d==="x"?_:E:y=d==="x"?E:_}else{const _=[{x:u.x,y:l.y}],E=[{x:l.x,y:u.y}];if(d==="x"?y=a.x===h?E:_:y=a.y===h?_:E,t===r){const P=Math.abs(e[d]-n[d]);if(P<=o){const R=Math.min(o-1,o-P);a[d]===h?b[d]=(u[d]>e[d]?-1:1)*R:C[d]=(l[d]>n[d]?-1:1)*R}}if(t!==r){const P=d==="x"?"y":"x",R=a[d]===c[P],v=u[P]>l[P],I=u[P]<l[P];(a[d]===1&&(!R&&v||R&&I)||a[d]!==1&&(!R&&I||R&&v))&&(y=d==="x"?_:E)}const M={x:u.x+b.x,y:u.y+b.y},L={x:l.x+C.x,y:l.y+C.y},z=Math.max(Math.abs(M.x-y[0].x),Math.abs(L.x-y[0].x)),T=Math.max(Math.abs(M.y-y[0].y),Math.abs(L.y-y[0].y));z>=T?(p=(M.x+L.x)/2,x=y[0].y):(p=y[0].x,x=(M.y+L.y)/2)}return[[e,{x:u.x+b.x,y:u.y+b.y},...y,{x:l.x+C.x,y:l.y+C.y},n],p,x,g,w]}function Ym(e,t,n,r){const s=Math.min(vo(e,t)/2,vo(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${o+s*u},${i}Q ${o},${i} ${o},${i+s*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${i+s*c}Q ${o},${i} ${o+s*a},${i}`}function is({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:s,targetPosition:o=Y.Top,borderRadius:i=5,centerX:a,centerY:c,offset:u=20,stepPosition:l=.5}){const[f,d,h,y,p]=Xm({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:a,y:c},offset:u,stepPosition:l});return[f.reduce((b,C,g)=>{let w="";return g>0&&g<f.length-1?w=Ym(f[g-1],C,f[g+1],i):w=`${g===0?"M":"L"}${C.x} ${C.y}`,b+=w,b},""),d,h,y,p]}function Co(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Wm(e){var f;const{sourceNode:t,targetNode:n}=e;if(!Co(t)||!Co(n))return null;const r=t.internals.handleBounds||So(t.handles),s=n.internals.handleBounds||So(n.handles),o=ko((r==null?void 0:r.source)??[],e.sourceHandle),i=ko(e.connectionMode===$t.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!o||!i)return(f=e.onError)==null||f.call(e,"008",Oe.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(o==null?void 0:o.position)||Y.Bottom,c=(i==null?void 0:i.position)||Y.Top,u=ln(t,o,a),l=ln(n,i,c);return{sourceX:u.x,sourceY:u.y,targetX:l.x,targetY:l.y,sourcePosition:a,targetPosition:c}}function So(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ln(e,t,n=Y.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,o=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:a}=t??et(e);if(r)return{x:s+i/2,y:o+a/2};switch((t==null?void 0:t.position)??n){case Y.Top:return{x:s+i/2,y:o};case Y.Right:return{x:s+i,y:o+a/2};case Y.Bottom:return{x:s+i/2,y:o+a};case Y.Left:return{x:s,y:o+a/2}}}function ko(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function as(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Qm(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const o=new Set;return e.reduce((i,a)=>([a.markerStart||r,a.markerEnd||s].forEach(c=>{if(c&&typeof c=="object"){const u=as(c,t);o.has(u)||(i.push({id:u,color:c.color||n,...c}),o.add(u))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const _s={nodeOrigin:[0,0],nodeExtent:sn,elevateNodesOnSelect:!0,defaults:{}},Um={..._s,checkEquality:!0};function Es(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Km(e,t,n){const r=Es(_s,n);for(const s of e.values())if(s.parentId)Ms(s,e,t,r);else{const o=xn(s,r.nodeOrigin),i=zt(s.extent)?s.extent:r.nodeExtent,a=wt(o,i,et(s));s.internals.positionAbsolute=a}}function cs(e,t,n,r){var c,u;const s=Es(Um,r);let o=e.length>0;const i=new Map(t),a=s!=null&&s.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const l of e){let f=i.get(l.id);if(s.checkEquality&&l===(f==null?void 0:f.internals.userNode))t.set(l.id,f);else{const d=xn(l,s.nodeOrigin),h=zt(l.extent)?l.extent:s.nodeExtent,y=wt(d,h,et(l));f={...s.defaults,...l,measured:{width:(c=l.measured)==null?void 0:c.width,height:(u=l.measured)==null?void 0:u.height},internals:{positionAbsolute:y,handleBounds:l.measured?f==null?void 0:f.internals.handleBounds:void 0,z:Ca(l,a),userNode:l}},t.set(l.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(o=!1),l.parentId&&Ms(f,t,n,r)}return o}function Gm(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ms(e,t,n,r){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:i}=Es(_s,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Gm(e,n);const u=s?1e3:0,{x:l,y:f,z:d}=Zm(e,c,o,i,u),{positionAbsolute:h}=e.internals,y=l!==h.x||f!==h.y;(y||d!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:y?{x:l,y:f}:h,z:d}})}function Ca(e,t){return(Ae(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Zm(e,t,n,r,s){const{x:o,y:i}=t.internals.positionAbsolute,a=et(e),c=xn(e,n),u=zt(e.extent)?wt(c,e.extent,a):c;let l=wt({x:o+u.x,y:i+u.y},r,a);e.extent==="parent"&&(l=la(l,a,t));const f=Ca(e,s),d=t.internals.z??0;return{x:l.x,y:l.y,z:d>=f?d+1:f}}function Is(e,t,n,r=[0,0]){var i;const s=[],o=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((i=o.get(a.parentId))==null?void 0:i.expandedRect)??Rt(c),l=da(u,a.rect);o.set(a.parentId,{expandedRect:l,parent:c})}return o.size>0&&o.forEach(({expandedRect:a,parent:c},u)=>{var g;const l=c.internals.positionAbsolute,f=et(c),d=c.origin??r,h=a.x<l.x?Math.round(Math.abs(l.x-a.x)):0,y=a.y<l.y?Math.round(Math.abs(l.y-a.y)):0,p=Math.max(f.width,Math.round(a.width)),x=Math.max(f.height,Math.round(a.height)),b=(p-f.width)*d[0],C=(x-f.height)*d[1];(h>0||y>0||b||C)&&(s.push({id:u,type:"position",position:{x:c.position.x-h+b,y:c.position.y-y+C}}),(g=n.get(u))==null||g.forEach(w=>{e.some(S=>S.id===w.id)||s.push({id:w.id,type:"position",position:{x:w.position.x+h,y:w.position.y+y}})})),(f.width<a.width||f.height<a.height||h||y)&&s.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:p+(h?d[0]*h-b:0),height:x+(y?d[1]*y-C:0)}})}),s}function Jm(e,t,n,r,s,o){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!i)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(i),{m22:l}=new window.DOMMatrixReadOnly(u.transform),f=[];for(const d of e.values()){const h=t.get(d.id);if(!h)continue;if(h.hidden){t.set(h.id,{...h,internals:{...h.internals,handleBounds:void 0}}),a=!0;continue}const y=Ns(d.nodeElement),p=h.measured.width!==y.width||h.measured.height!==y.height;if(!!(y.width&&y.height&&(p||!h.internals.handleBounds||d.force))){const b=d.nodeElement.getBoundingClientRect(),C=zt(h.extent)?h.extent:o;let{positionAbsolute:g}=h.internals;h.parentId&&h.extent==="parent"?g=la(g,y,t.get(h.parentId)):C&&(g=wt(g,C,y));const w={...h,measured:y,internals:{...h.internals,positionAbsolute:g,handleBounds:{source:xo("source",d.nodeElement,b,l,h.id),target:xo("target",d.nodeElement,b,l,h.id)}}};t.set(h.id,w),h.parentId&&Ms(w,t,n,{nodeOrigin:s}),a=!0,p&&(c.push({id:h.id,type:"dimensions",dimensions:y}),h.expandParent&&h.parentId&&f.push({id:h.id,parentId:h.parentId,rect:Rt(w,s)}))}}if(f.length>0){const d=Is(f,t,n,s);c.push(...d)}return{changes:c,updatedInternals:a}}async function eg({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,o]],r),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function No(e,t,n,r,s,o){let i=s;const a=r.get(i)||new Map;r.set(i,a.set(n,t)),i=`${s}-${e}`;const c=r.get(i)||new Map;if(r.set(i,c.set(n,t)),o){i=`${s}-${e}-${o}`;const u=r.get(i)||new Map;r.set(i,u.set(n,t))}}function Sa(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:o,sourceHandle:i=null,targetHandle:a=null}=r,c={edgeId:r.id,source:s,target:o,sourceHandle:i,targetHandle:a},u=`${s}-${i}--${o}-${a}`,l=`${o}-${a}--${s}-${i}`;No("source",c,l,e,s,i),No("target",c,u,e,o,a),t.set(r.id,r)}}function ka(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:ka(n,t):!1}function _o(e,t,n){var s;let r=e;do{if((s=r==null?void 0:r.matches)!=null&&s.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function tg(e,t,n,r){const s=new Map;for(const[o,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!ka(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const a=e.get(o);a&&s.set(o,{id:o,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return s}function Ir({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,a,c;const s=[];for(const[u,l]of t){const f=(i=n.get(u))==null?void 0:i.internals.userNode;f&&s.push({...f,position:l.position,dragging:r})}if(!e)return[s[0],s];const o=(a=n.get(e))==null?void 0:a.internals.userNode;return[o?{...o,position:((c=t.get(e))==null?void 0:c.position)||o.position,dragging:r}:s[0],s]}function ng({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let o={x:null,y:null},i=0,a=new Map,c=!1,u={x:0,y:0},l=null,f=!1,d=null,h=!1,y=!1;function p({noDragClassName:b,handleSelector:C,domNode:g,isSelectable:w,nodeId:S,nodeClickDistance:_=0}){d=Se(g);function E({x:T,y:P},R){const{nodeLookup:v,nodeExtent:I,snapGrid:N,snapToGrid:A,nodeOrigin:$,onNodeDrag:j,onSelectionDrag:D,onError:O,updateNodePositions:B}=t();o={x:T,y:P};let X=!1,V={x:0,y:0,x2:0,y2:0};if(a.size>1&&I){const Q=bn(a);V=os(Q)}for(const[Q,U]of a){if(!v.has(Q))continue;let W={x:T-U.distance.x,y:P-U.distance.y};A&&(W=gr(W,N));let q=[[I[0][0],I[0][1]],[I[1][0],I[1][1]]];if(a.size>1&&I&&!U.extent){const{positionAbsolute:ne}=U.internals,J=ne.x-V.x+I[0][0],te=ne.x+U.measured.width-V.x2+I[1][0],ee=ne.y-V.y+I[0][1],le=ne.y+U.measured.height-V.y2+I[1][1];q=[[J,ee],[te,le]]}const{position:Z,positionAbsolute:oe}=ca({nodeId:Q,nextPosition:W,nodeLookup:v,nodeExtent:q,nodeOrigin:$,onError:O});X=X||U.position.x!==Z.x||U.position.y!==Z.y,U.position=Z,U.internals.positionAbsolute=oe}if(y=y||X,!!X&&(B(a,!0),R&&(r||j||!S&&D))){const[Q,U]=Ir({nodeId:S,dragItems:a,nodeLookup:v});r==null||r(R,a,Q,U),j==null||j(R,Q,U),S||D==null||D(R,U)}}async function M(){if(!l)return;const{transform:T,panBy:P,autoPanSpeed:R,autoPanOnNodeDrag:v}=t();if(!v){c=!1,cancelAnimationFrame(i);return}const[I,N]=ua(u,l,R);(I!==0||N!==0)&&(o.x=(o.x??0)-I/T[2],o.y=(o.y??0)-N/T[2],await P({x:I,y:N})&&E(o,null)),i=requestAnimationFrame(M)}function L(T){var X;const{nodeLookup:P,multiSelectionActive:R,nodesDraggable:v,transform:I,snapGrid:N,snapToGrid:A,selectNodesOnDrag:$,onNodeDragStart:j,onSelectionDragStart:D,unselectNodesAndEdges:O}=t();f=!0,(!$||!w)&&!R&&S&&((X=P.get(S))!=null&&X.selected||O()),w&&$&&S&&(e==null||e(S));const B=Jt(T.sourceEvent,{transform:I,snapGrid:N,snapToGrid:A,containerBounds:l});if(o=B,a=tg(P,v,B,S),a.size>0&&(n||j||!S&&D)){const[V,Q]=Ir({nodeId:S,dragItems:a,nodeLookup:P});n==null||n(T.sourceEvent,a,V,Q),j==null||j(T.sourceEvent,V,Q),S||D==null||D(T.sourceEvent,Q)}}const z=Bi().clickDistance(_).on("start",T=>{const{domNode:P,nodeDragThreshold:R,transform:v,snapGrid:I,snapToGrid:N}=t();l=(P==null?void 0:P.getBoundingClientRect())||null,h=!1,y=!1,R===0&&L(T),o=Jt(T.sourceEvent,{transform:v,snapGrid:I,snapToGrid:N,containerBounds:l}),u=Re(T.sourceEvent,l)}).on("drag",T=>{const{autoPanOnNodeDrag:P,transform:R,snapGrid:v,snapToGrid:I,nodeDragThreshold:N,nodeLookup:A}=t(),$=Jt(T.sourceEvent,{transform:R,snapGrid:v,snapToGrid:I,containerBounds:l});if((T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1||S&&!A.has(S))&&(h=!0),!h){if(!c&&P&&f&&(c=!0,M()),!f){const j=$.xSnapped-(o.x??0),D=$.ySnapped-(o.y??0);Math.sqrt(j*j+D*D)>N&&L(T)}(o.x!==$.xSnapped||o.y!==$.ySnapped)&&a&&f&&(u=Re(T.sourceEvent,l),E($,T.sourceEvent))}}).on("end",T=>{if(!(!f||h)&&(c=!1,f=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:P,updateNodePositions:R,onNodeDragStop:v,onSelectionDragStop:I}=t();if(y&&(R(a,!1),y=!1),s||v||!S&&I){const[N,A]=Ir({nodeId:S,dragItems:a,nodeLookup:P,dragging:!1});s==null||s(T.sourceEvent,a,N,A),v==null||v(T.sourceEvent,N,A),S||I==null||I(T.sourceEvent,A)}}}).filter(T=>{const P=T.target;return!T.button&&(!b||!_o(P,`.${b}`,g))&&(!C||_o(P,C,g))});d.call(z)}function x(){d==null||d.on(".drag",null)}return{update:p,destroy:x}}function rg(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const o of t.values())cn(s,Rt(o))>0&&r.push(o);return r}const sg=250;function og(e,t,n,r){var a,c;let s=[],o=1/0;const i=rg(e,n,t+sg);for(const u of i){const l=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const f of l){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:d,y:h}=ln(u,f,f.position,!0),y=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(h-e.y,2));y>t||(y<o?(s=[{...f,x:d,y:h}],o=y):y===o&&s.push({...f,x:d,y:h}))}}if(!s.length)return null;if(s.length>1){const u=r.type==="source"?"target":"source";return s.find(l=>l.type===u)??s[0]}return s[0]}function Na(e,t,n,r,s,o=!1){var u,l,f;const i=r.get(e);if(!i)return null;const a=s==="strict"?(u=i.internals.handleBounds)==null?void 0:u[t]:[...((l=i.internals.handleBounds)==null?void 0:l.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],c=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return c&&o?{...c,...ln(i,c,c.position,!0)}:c}function _a(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function ig(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Ea=()=>!0;function ag(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:o,isTarget:i,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:l,flowId:f,panBy:d,cancelConnection:h,onConnectStart:y,onConnect:p,onConnectEnd:x,isValidConnection:b=Ea,onReconnectEnd:C,updateConnection:g,getTransform:w,getFromHandle:S,autoPanSpeed:_,dragThreshold:E=1}){const M=ma(e.target);let L=0,z;const{x:T,y:P}=Re(e),R=M==null?void 0:M.elementFromPoint(T,P),v=_a(o,R),I=a==null?void 0:a.getBoundingClientRect();let N=!1;if(!I||!v)return;const A=Na(s,v,r,c,t);if(!A)return;let $=Re(e,I),j=!1,D=null,O=!1,B=null;function X(){if(!l||!I)return;const[ne,J]=ua($,I,_);d({x:ne,y:J}),L=requestAnimationFrame(X)}const V={...A,nodeId:s,type:v,position:A.position},Q=c.get(s);let W={inProgress:!0,isValid:null,from:ln(Q,V,Y.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:Q,to:$,toHandle:null,toPosition:mo[V.position],toNode:null};function q(){N=!0,g(W),y==null||y(e,{nodeId:s,handleId:r,handleType:v})}E===0&&q();function Z(ne){if(!N){const{x:le,y:me}=Re(ne),qe=le-T,Ct=me-P;if(!(qe*qe+Ct*Ct>E*E))return;q()}if(!S()||!V){oe(ne);return}const J=w();$=Re(ne,I),z=og(wn($,J,!1,[1,1]),n,c,V),j||(X(),j=!0);const te=Ma(ne,{handle:z,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:M,lib:u,flowId:f,nodeLookup:c});B=te.handleDomNode,D=te.connection,O=ig(!!z,te.isValid);const ee={...W,isValid:O,to:te.toHandle&&O?Jn({x:te.toHandle.x,y:te.toHandle.y},J):$,toHandle:te.toHandle,toPosition:O&&te.toHandle?te.toHandle.position:mo[V.position],toNode:te.toHandle?c.get(te.toHandle.nodeId):null};O&&z&&W.toHandle&&ee.toHandle&&W.toHandle.type===ee.toHandle.type&&W.toHandle.nodeId===ee.toHandle.nodeId&&W.toHandle.id===ee.toHandle.id&&W.to.x===ee.to.x&&W.to.y===ee.to.y||(g(ee),W=ee)}function oe(ne){if(N){(z||B)&&D&&O&&(p==null||p(D));const{inProgress:J,...te}=W,ee={...te,toPosition:W.toHandle?W.toPosition:null};x==null||x(ne,ee),o&&(C==null||C(ne,ee))}h(),cancelAnimationFrame(L),j=!1,O=!1,D=null,B=null,M.removeEventListener("mousemove",Z),M.removeEventListener("mouseup",oe),M.removeEventListener("touchmove",Z),M.removeEventListener("touchend",oe)}M.addEventListener("mousemove",Z),M.addEventListener("mouseup",oe),M.addEventListener("touchmove",Z),M.addEventListener("touchend",oe)}function Ma(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:o,doc:i,lib:a,flowId:c,isValidConnection:u=Ea,nodeLookup:l}){const f=o==="target",d=t?i.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:h,y}=Re(e),p=i.elementFromPoint(h,y),x=p!=null&&p.classList.contains(`${a}-flow__handle`)?p:d,b={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const C=_a(void 0,x),g=x.getAttribute("data-nodeid"),w=x.getAttribute("data-handleid"),S=x.classList.contains("connectable"),_=x.classList.contains("connectableend");if(!g||!C)return b;const E={source:f?g:r,sourceHandle:f?w:s,target:f?r:g,targetHandle:f?s:w};b.connection=E;const L=S&&_&&(n===$t.Strict?f&&C==="source"||!f&&C==="target":g!==r||w!==s);b.isValid=L&&u(E),b.toHandle=Na(g,C,w,l,n,!0)}return b}const ls={onPointerDown:ag,isValid:Ma};function cg({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=Se(e);function o({translateExtent:a,width:c,height:u,zoomStep:l=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const y=g=>{const w=n();if(g.sourceEvent.type!=="wheel"||!t)return;const S=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*l,_=w[2]*Math.pow(2,S);t.scaleTo(_)};let p=[0,0];const x=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(p=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},b=g=>{const w=n();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const S=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],_=[S[0]-p[0],S[1]-p[1]];p=S;const E=r()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),M={x:w[0]-_[0]*E,y:w[1]-_[1]*E},L=[[0,0],[c,u]];t.setViewportConstrained({x:M.x,y:M.y,zoom:w[2]},L,a)},C=na().on("start",x).on("zoom",f?b:null).on("zoom.wheel",d?y:null);s.call(C,{})}function i(){s.on("zoom",null)}return{update:o,destroy:i,pointer:Me}}const lg=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,pr=e=>({x:e.x,y:e.y,zoom:e.k}),Ar=({x:e,y:t,zoom:n})=>fr.translate(e,t).scale(n),Nt=(e,t)=>e.target.closest(`.${t}`),Ia=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ug=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,jr=(e,t=0,n=ug,r=()=>{})=>{const s=typeof t=="number"&&t>0;return s||r(),s?e.transition().duration(t).ease(n).on("end",r):e},Aa=e=>{const t=e.ctrlKey&&er()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function dg({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:o,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return l=>{if(Nt(l,t))return!1;l.preventDefault(),l.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(l.ctrlKey&&i){const x=Me(l),b=Aa(l),C=f*Math.pow(2,b);r.scaleTo(n,C,x,l);return}const d=l.deltaMode===1?20:1;let h=s===yt.Vertical?0:l.deltaX*d,y=s===yt.Horizontal?0:l.deltaY*d;!er()&&l.shiftKey&&s!==yt.Vertical&&(h=l.deltaY*d,y=0),r.translateBy(n,-(h/f)*o,-(y/f)*o,{internal:!0});const p=pr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(l,p)),e.isPanScrolling&&(c==null||c(l,p),e.panScrollTimeout=setTimeout(()=>{u==null||u(l,p),e.isPanScrolling=!1},150))}}function fg({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){const o=r.type==="wheel",i=!t&&o&&!r.ctrlKey,a=Nt(r,e);if(r.ctrlKey&&o&&a&&r.preventDefault(),i||a)return null;r.preventDefault(),n.call(this,r,s)}}function hg({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var o,i,a;if((o=r.sourceEvent)!=null&&o.internal)return;const s=pr(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function mg({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return o=>{var i,a;e.usedRightMouseButton=!!(n&&Ia(t,e.mouseButton??0)),(i=o.sourceEvent)!=null&&i.sync||r([o.transform.x,o.transform.y,o.transform.k]),s&&!((a=o.sourceEvent)!=null&&a.internal)&&(s==null||s(o.sourceEvent,pr(o.transform)))}}function gg({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:o}){return i=>{var a;if(!((a=i.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,o&&Ia(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&o(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),s&&lg(e.prevViewport,i.transform))){const c=pr(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(i.sourceEvent,c)},n?150:0)}}}function pg({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:o,userSelectionActive:i,noWheelClassName:a,noPanClassName:c,lib:u}){return l=>{var y;const f=e||t,d=n&&l.ctrlKey;if(l.button===1&&l.type==="mousedown"&&(Nt(l,`${u}-flow__node`)||Nt(l,`${u}-flow__edge`)))return!0;if(!r&&!f&&!s&&!o&&!n||i||Nt(l,a)&&l.type==="wheel"||Nt(l,c)&&(l.type!=="wheel"||s&&l.type==="wheel"&&!e)||!n&&l.ctrlKey&&l.type==="wheel")return!1;if(!n&&l.type==="touchstart"&&((y=l.touches)==null?void 0:y.length)>1)return l.preventDefault(),!1;if(!f&&!s&&!d&&l.type==="wheel"||!r&&(l.type==="mousedown"||l.type==="touchstart")||Array.isArray(r)&&!r.includes(l.button)&&l.type==="mousedown")return!1;const h=Array.isArray(r)&&r.includes(l.button)||!l.button||l.button<=1;return(!l.ctrlKey||l.type==="wheel")&&h}}function yg({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:s,viewport:o,onPanZoom:i,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),d=na().clickDistance(!Ae(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(s),h=Se(e).call(d);g({x:o.x,y:o.y,zoom:Dt(o.zoom,t,n)},[[0,0],[f.width,f.height]],s);const y=h.on("wheel.zoom"),p=h.on("dblclick.zoom");d.wheelDelta(Aa);function x(P,R){return h?new Promise(v=>{d==null||d.interpolate((R==null?void 0:R.interpolate)==="linear"?Zt:Rn).transform(jr(h,R==null?void 0:R.duration,R==null?void 0:R.ease,()=>v(!0)),P)}):Promise.resolve(!1)}function b({noWheelClassName:P,noPanClassName:R,onPaneContextMenu:v,userSelectionActive:I,panOnScroll:N,panOnDrag:A,panOnScrollMode:$,panOnScrollSpeed:j,preventScrolling:D,zoomOnPinch:O,zoomOnScroll:B,zoomOnDoubleClick:X,zoomActivationKeyPressed:V,lib:Q,onTransformChange:U}){I&&!l.isZoomingOrPanning&&C();const q=N&&!V&&!I?dg({zoomPanValues:l,noWheelClassName:P,d3Selection:h,d3Zoom:d,panOnScrollMode:$,panOnScrollSpeed:j,zoomOnPinch:O,onPanZoomStart:a,onPanZoom:i,onPanZoomEnd:c}):fg({noWheelClassName:P,preventScrolling:D,d3ZoomHandler:y});if(h.on("wheel.zoom",q,{passive:!1}),!I){const oe=hg({zoomPanValues:l,onDraggingChange:u,onPanZoomStart:a});d.on("start",oe);const ne=mg({zoomPanValues:l,panOnDrag:A,onPaneContextMenu:!!v,onPanZoom:i,onTransformChange:U});d.on("zoom",ne);const J=gg({zoomPanValues:l,panOnDrag:A,panOnScroll:N,onPaneContextMenu:v,onPanZoomEnd:c,onDraggingChange:u});d.on("end",J)}const Z=pg({zoomActivationKeyPressed:V,panOnDrag:A,zoomOnScroll:B,panOnScroll:N,zoomOnDoubleClick:X,zoomOnPinch:O,userSelectionActive:I,noPanClassName:R,noWheelClassName:P,lib:Q});d.filter(Z),X?h.on("dblclick.zoom",p):h.on("dblclick.zoom",null)}function C(){d.on("zoom",null)}async function g(P,R,v){const I=Ar(P),N=d==null?void 0:d.constrain()(I,R,v);return N&&await x(N),new Promise(A=>A(N))}async function w(P,R){const v=Ar(P);return await x(v,R),new Promise(I=>I(v))}function S(P){if(h){const R=Ar(P),v=h.property("__zoom");(v.k!==P.zoom||v.x!==P.x||v.y!==P.y)&&(d==null||d.transform(h,R,null,{sync:!0}))}}function _(){const P=h?ta(h.node()):{x:0,y:0,k:1};return{x:P.x,y:P.y,zoom:P.k}}function E(P,R){return h?new Promise(v=>{d==null||d.interpolate((R==null?void 0:R.interpolate)==="linear"?Zt:Rn).scaleTo(jr(h,R==null?void 0:R.duration,R==null?void 0:R.ease,()=>v(!0)),P)}):Promise.resolve(!1)}function M(P,R){return h?new Promise(v=>{d==null||d.interpolate((R==null?void 0:R.interpolate)==="linear"?Zt:Rn).scaleBy(jr(h,R==null?void 0:R.duration,R==null?void 0:R.ease,()=>v(!0)),P)}):Promise.resolve(!1)}function L(P){d==null||d.scaleExtent(P)}function z(P){d==null||d.translateExtent(P)}function T(P){const R=!Ae(P)||P<0?0:P;d==null||d.clickDistance(R)}return{update:b,destroy:C,setViewport:w,setViewportConstrained:g,getViewport:_,scaleTo:E,scaleBy:M,setScaleExtent:L,setTranslateExtent:z,syncViewport:S,setClickDistance:T}}var Ot;(function(e){e.Line="line",e.Handle="handle"})(Ot||(Ot={}));function xg({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:o}){const i=e-t,a=n-r,c=[i>0?1:i<0?-1:0,a>0?1:a<0?-1:0];return i&&s&&(c[0]=c[0]*-1),a&&o&&(c[1]=c[1]*-1),c}function bg(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function tt(e,t){return Math.max(0,t-e)}function nt(e,t){return Math.max(0,e-t)}function Ln(e,t,n){return Math.max(0,t-e,e-n)}function Eo(e,t){return e?!t:t}function wg(e,t,n,r,s,o,i,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:l,isVertical:f}=t,d=l&&f,{xSnapped:h,ySnapped:y}=n,{minWidth:p,maxWidth:x,minHeight:b,maxHeight:C}=r,{x:g,y:w,width:S,height:_,aspectRatio:E}=e;let M=Math.floor(l?h-e.pointerX:0),L=Math.floor(f?y-e.pointerY:0);const z=S+(c?-M:M),T=_+(u?-L:L),P=-o[0]*S,R=-o[1]*_;let v=Ln(z,p,x),I=Ln(T,b,C);if(i){let $=0,j=0;c&&M<0?$=tt(g+M+P,i[0][0]):!c&&M>0&&($=nt(g+z+P,i[1][0])),u&&L<0?j=tt(w+L+R,i[0][1]):!u&&L>0&&(j=nt(w+T+R,i[1][1])),v=Math.max(v,$),I=Math.max(I,j)}if(a){let $=0,j=0;c&&M>0?$=nt(g+M,a[0][0]):!c&&M<0&&($=tt(g+z,a[1][0])),u&&L>0?j=nt(w+L,a[0][1]):!u&&L<0&&(j=tt(w+T,a[1][1])),v=Math.max(v,$),I=Math.max(I,j)}if(s){if(l){const $=Ln(z/E,b,C)*E;if(v=Math.max(v,$),i){let j=0;!c&&!u||c&&!u&&d?j=nt(w+R+z/E,i[1][1])*E:j=tt(w+R+(c?M:-M)/E,i[0][1])*E,v=Math.max(v,j)}if(a){let j=0;!c&&!u||c&&!u&&d?j=tt(w+z/E,a[1][1])*E:j=nt(w+(c?M:-M)/E,a[0][1])*E,v=Math.max(v,j)}}if(f){const $=Ln(T*E,p,x)/E;if(I=Math.max(I,$),i){let j=0;!c&&!u||u&&!c&&d?j=nt(g+T*E+P,i[1][0])/E:j=tt(g+(u?L:-L)*E+P,i[0][0])/E,I=Math.max(I,j)}if(a){let j=0;!c&&!u||u&&!c&&d?j=tt(g+T*E,a[1][0])/E:j=nt(g+(u?L:-L)*E,a[0][0])/E,I=Math.max(I,j)}}}L=L+(L<0?I:-I),M=M+(M<0?v:-v),s&&(d?z>T*E?L=(Eo(c,u)?-M:M)/E:M=(Eo(c,u)?-L:L)*E:l?(L=M/E,u=c):(M=L*E,c=u));const N=c?g+M:g,A=u?w+L:w;return{width:S+(c?-M:M),height:_+(u?-L:L),x:o[0]*M*(c?-1:1)+N,y:o[1]*L*(u?-1:1)+A}}const ja={width:0,height:0,x:0,y:0},vg={...ja,pointerX:0,pointerY:0,aspectRatio:1};function Cg(e){return[[0,0],[e.measured.width,e.measured.height]]}function Sg(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,o=e.measured.width??0,i=e.measured.height??0,a=n[0]*o,c=n[1]*i;return[[r-a,s-c],[r+o-a,s+i-c]]}function kg({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const o=Se(e);function i({controlPosition:c,boundaries:u,keepAspectRatio:l,resizeDirection:f,onResizeStart:d,onResize:h,onResizeEnd:y,shouldResize:p}){let x={...ja},b={...vg};const C=bg(c);let g,w=null,S=[],_,E,M;const L=Bi().on("start",z=>{const{nodeLookup:T,transform:P,snapGrid:R,snapToGrid:v,nodeOrigin:I,paneDomNode:N}=n();if(g=T.get(t),!g)return;w=(N==null?void 0:N.getBoundingClientRect())??null;const{xSnapped:A,ySnapped:$}=Jt(z.sourceEvent,{transform:P,snapGrid:R,snapToGrid:v,containerBounds:w});x={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},b={...x,pointerX:A,pointerY:$,aspectRatio:x.width/x.height},_=void 0,g.parentId&&(g.extent==="parent"||g.expandParent)&&(_=T.get(g.parentId),E=_&&g.extent==="parent"?Cg(_):void 0),S=[],M=void 0;for(const[j,D]of T)if(D.parentId===t&&(S.push({id:j,position:{...D.position},extent:D.extent}),D.extent==="parent"||D.expandParent)){const O=Sg(D,g,D.origin??I);M?M=[[Math.min(O[0][0],M[0][0]),Math.min(O[0][1],M[0][1])],[Math.max(O[1][0],M[1][0]),Math.max(O[1][1],M[1][1])]]:M=O}d==null||d(z,{...x})}).on("drag",z=>{const{transform:T,snapGrid:P,snapToGrid:R,nodeOrigin:v}=n(),I=Jt(z.sourceEvent,{transform:T,snapGrid:P,snapToGrid:R,containerBounds:w}),N=[];if(!g)return;const{x:A,y:$,width:j,height:D}=x,O={},B=g.origin??v,{width:X,height:V,x:Q,y:U}=wg(b,C,I,u,l,B,E,M),W=X!==j,q=V!==D,Z=Q!==A&&W,oe=U!==$&&q;if(!Z&&!oe&&!W&&!q)return;if((Z||oe||B[0]===1||B[1]===1)&&(O.x=Z?Q:x.x,O.y=oe?U:x.y,x.x=O.x,x.y=O.y,S.length>0)){const ee=Q-A,le=U-$;for(const me of S)me.position={x:me.position.x-ee+B[0]*(X-j),y:me.position.y-le+B[1]*(V-D)},N.push(me)}if((W||q)&&(O.width=W&&(!f||f==="horizontal")?X:x.width,O.height=q&&(!f||f==="vertical")?V:x.height,x.width=O.width,x.height=O.height),_&&g.expandParent){const ee=B[0]*(O.width??0);O.x&&O.x<ee&&(x.x=ee,b.x=b.x-(O.x-ee));const le=B[1]*(O.height??0);O.y&&O.y<le&&(x.y=le,b.y=b.y-(O.y-le))}const ne=xg({width:x.width,prevWidth:j,height:x.height,prevHeight:D,affectsX:C.affectsX,affectsY:C.affectsY}),J={...x,direction:ne};(p==null?void 0:p(z,J))!==!1&&(h==null||h(z,J),r(O,N))}).on("end",z=>{y==null||y(z,{...x}),s==null||s({...x})});o.call(L)}function a(){o.on(".drag",null)}return{update:i,destroy:a}}var Lr={exports:{}},Tr={},Pr={exports:{}},$r={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo;function Ng(){if(Mo)return $r;Mo=1;var e=ci();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(f,d){var h=d(),y=r({inst:{value:h,getSnapshot:d}}),p=y[0].inst,x=y[1];return o(function(){p.value=h,p.getSnapshot=d,c(p)&&x({inst:p})},[f,h,d]),s(function(){return c(p)&&x({inst:p}),f(function(){c(p)&&x({inst:p})})},[f]),i(h),h}function c(f){var d=f.getSnapshot;f=f.value;try{var h=d();return!n(f,h)}catch{return!0}}function u(f,d){return d()}var l=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return $r.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:l,$r}var Io;function _g(){return Io||(Io=1,Pr.exports=Ng()),Pr.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ao;function Eg(){if(Ao)return Tr;Ao=1;var e=ci(),t=_g();function n(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,o=e.useRef,i=e.useEffect,a=e.useMemo,c=e.useDebugValue;return Tr.useSyncExternalStoreWithSelector=function(u,l,f,d,h){var y=o(null);if(y.current===null){var p={hasValue:!1,value:null};y.current=p}else p=y.current;y=a(function(){function b(_){if(!C){if(C=!0,g=_,_=d(_),h!==void 0&&p.hasValue){var E=p.value;if(h(E,_))return w=E}return w=_}if(E=w,r(g,_))return E;var M=d(_);return h!==void 0&&h(E,M)?(g=_,E):(g=_,w=M)}var C=!1,g,w,S=f===void 0?null:f;return[function(){return b(l())},S===null?void 0:function(){return b(S())}]},[l,f,d,h]);var x=s(u,y[0],y[1]);return i(function(){p.hasValue=!0,p.value=x},[x]),c(x),x},Tr}var jo;function Mg(){return jo||(jo=1,Lr.exports=Eg()),Lr.exports}var Ig=Mg();const Ag=_l(Ig),jg={},Lo=e=>{let t;const n=new Set,r=(l,f)=>{const d=typeof l=="function"?l(t):l;if(!Object.is(d,t)){const h=t;t=f??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(y=>y(t,h))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(jg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,s,c);return c},Lg=e=>e?Lo(e):Lo,{useDebugValue:Tg}=Ne,{useSyncExternalStoreWithSelector:Pg}=Ag,$g=e=>e;function La(e,t=$g,n){const r=Pg(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Tg(r),r}const To=(e,t)=>{const n=Lg(e),r=(s,o=t)=>La(n,s,o);return Object.assign(r,n),r},Dg=(e,t)=>e?To(e,t):To;function fe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const yr=k.createContext(null),Rg=yr.Provider,Ta=Oe.error001();function se(e,t){const n=k.useContext(yr);if(n===null)throw new Error(Ta);return La(n,e,t)}function de(){const e=k.useContext(yr);if(e===null)throw new Error(Ta);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Po={display:"none"},zg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Pa="react-flow__node-desc",$a="react-flow__edge-desc",Og="react-flow__aria-live",Hg=e=>e.ariaLiveMessage,Bg=e=>e.ariaLabelConfig;function Fg({rfId:e}){const t=se(Hg);return m.jsx("div",{id:`${Og}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:zg,children:t})}function Vg({rfId:e,disableKeyboardA11y:t}){const n=se(Bg);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${Pa}-${e}`,style:Po,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${$a}-${e}`,style:Po,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(Fg,{rfId:e})]})}const xr=k.forwardRef(({position:e="top-left",children:t,className:n,style:r,...s},o)=>{const i=`${e}`.split("-");return m.jsx("div",{className:ge(["react-flow__panel",n,...i]),style:r,ref:o,...s,children:t})});xr.displayName="Panel";function qg({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:m.jsx(xr,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Xg=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Tn=e=>e.id;function Yg(e,t){return fe(e.selectedNodes.map(Tn),t.selectedNodes.map(Tn))&&fe(e.selectedEdges.map(Tn),t.selectedEdges.map(Tn))}function Wg({onSelectionChange:e}){const t=de(),{selectedNodes:n,selectedEdges:r}=se(Xg,Yg);return k.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(o=>o(s))},[n,r,e]),null}const Qg=e=>!!e.onSelectionChangeHandlers;function Ug({onSelectionChange:e}){const t=se(Qg);return e||t?m.jsx(Wg,{onSelectionChange:e}):null}const Da=[0,0],Kg={x:0,y:0,zoom:1},Gg=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],$o=[...Gg,"rfId"],Zg=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Do={translateExtent:sn,nodeOrigin:Da,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Jg(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:o,setNodeExtent:i,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=se(Zg,fe),l=de();k.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{f.current=Do,a()}),[]);const f=k.useRef(Do);return k.useEffect(()=>{for(const d of $o){const h=e[d],y=f.current[d];h!==y&&(typeof e[d]>"u"||(d==="nodes"?t(h):d==="edges"?n(h):d==="minZoom"?r(h):d==="maxZoom"?s(h):d==="translateExtent"?o(h):d==="nodeExtent"?i(h):d==="paneClickDistance"?u(h):d==="ariaLabelConfig"?l.setState({ariaLabelConfig:zm(h)}):d==="fitView"?l.setState({fitViewQueued:h}):d==="fitViewOptions"?l.setState({fitViewOptions:h}):l.setState({[d]:h})))}f.current=e},$o.map(d=>e[d])),null}function Ro(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ep(e){var r;const[t,n]=k.useState(e==="system"?null:e);return k.useEffect(()=>{if(e!=="system"){n(e);return}const s=Ro(),o=()=>n(s!=null&&s.matches?"dark":"light");return o(),s==null||s.addEventListener("change",o),()=>{s==null||s.removeEventListener("change",o)}},[e]),t!==null?t:(r=Ro())!=null&&r.matches?"dark":"light"}const zo=typeof document<"u"?document:null;function un(e=null,t={target:zo,actInsideInputWithModifier:!0}){const[n,r]=k.useState(!1),s=k.useRef(!1),o=k.useRef(new Set([])),[i,a]=k.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),l=u.reduce((f,d)=>f.concat(...d),[]);return[u,l]}return[[],[]]},[e]);return k.useEffect(()=>{const c=(t==null?void 0:t.target)??zo,u=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const l=h=>{var x,b;if(s.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!s.current||s.current&&!u)&&ga(h))return!1;const p=Ho(h.code,a);if(o.current.add(h[p]),Oo(i,o.current,!1)){const C=((b=(x=h.composedPath)==null?void 0:x.call(h))==null?void 0:b[0])||h.target,g=(C==null?void 0:C.nodeName)==="BUTTON"||(C==null?void 0:C.nodeName)==="A";t.preventDefault!==!1&&(s.current||!g)&&h.preventDefault(),r(!0)}},f=h=>{const y=Ho(h.code,a);Oo(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(h[y]),h.key==="Meta"&&o.current.clear(),s.current=!1},d=()=>{o.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",l),c==null||c.addEventListener("keyup",f),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",l),c==null||c.removeEventListener("keyup",f),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function Oo(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function Ho(e,t){return t.includes(e)?"code":"key"}const tp=()=>{const e=de();return k.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,o],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:o,maxZoom:i,panZoom:a}=e.getState(),c=ks(t,r,s,o,i,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:s,snapToGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:a,y:c}=i.getBoundingClientRect(),u={x:t.x-a,y:t.y-c},l=n.snapGrid??s,f=n.snapToGrid??o;return wn(u,r,f,l)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:o}=r.getBoundingClientRect(),i=Jn(t,n);return{x:i.x+s,y:i.y+o}}}),[])};function Ra(e,t){const n=[],r=new Map,s=[];for(const o of e)if(o.type==="add"){s.push(o);continue}else if(o.type==="remove"||o.type==="replace")r.set(o.id,[o]);else{const i=r.get(o.id);i?i.push(o):r.set(o.id,[o])}for(const o of t){const i=r.get(o.id);if(!i){n.push(o);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const a={...o};for(const c of i)np(c,a);n.push(a)}return s.length&&s.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function np(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function za(e,t){return Ra(e,t)}function Oa(e,t){return Ra(e,t)}function dt(e,t){return{id:e,type:"select",selected:t}}function _t(e,t=new Set,n=!1){const r=[];for(const[s,o]of e){const i=t.has(s);!(o.selected===void 0&&!i)&&o.selected!==i&&(n&&(o.selected=i),r.push(dt(o.id,i)))}return r}function Bo({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(o=>[o.id,o]));for(const[o,i]of e.entries()){const a=t.get(i.id),c=((s=a==null?void 0:a.internals)==null?void 0:s.userNode)??a;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:o})}for(const[o]of t)r.get(o)===void 0&&n.push({id:o,type:"remove"});return n}function Fo(e){return{id:e.id,type:"remove"}}const Vo=e=>Mm(e),rp=e=>aa(e);function Ha(e){return k.forwardRef(e)}const sp=typeof window<"u"?k.useLayoutEffect:k.useEffect;function qo(e){const[t,n]=k.useState(BigInt(0)),[r]=k.useState(()=>op(()=>n(s=>s+BigInt(1))));return sp(()=>{const s=r.get();s.length&&(e(s),r.reset())},[t]),r}function op(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Ba=k.createContext(null);function ip({children:e}){const t=de(),n=k.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:l,onNodesChange:f,nodeLookup:d,fitViewQueued:h}=t.getState();let y=c;for(const x of a)y=typeof x=="function"?x(y):x;const p=Bo({items:y,lookup:d});l&&u(y),p.length>0?f==null||f(p):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:b,setNodes:C}=t.getState();x&&C(b)})},[]),r=qo(n),s=k.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:l,onEdgesChange:f,edgeLookup:d}=t.getState();let h=c;for(const y of a)h=typeof y=="function"?y(h):y;l?u(h):f&&f(Bo({items:h,lookup:d}))},[]),o=qo(s),i=k.useMemo(()=>({nodeQueue:r,edgeQueue:o}),[]);return m.jsx(Ba.Provider,{value:i,children:e})}function ap(){const e=k.useContext(Ba);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const cp=e=>!!e.panZoom;function As(){const e=tp(),t=de(),n=ap(),r=se(cp),s=k.useMemo(()=>{const o=f=>t.getState().nodeLookup.get(f),i=f=>{n.nodeQueue.push(f)},a=f=>{n.edgeQueue.push(f)},c=f=>{var b,C;const{nodeLookup:d,nodeOrigin:h}=t.getState(),y=Vo(f)?f:d.get(f.id),p=y.parentId?ha(y.position,y.measured,y.parentId,d,h):y.position,x={...y,position:p,width:((b=y.measured)==null?void 0:b.width)??y.width,height:((C=y.measured)==null?void 0:C.height)??y.height};return Rt(x)},u=(f,d,h={replace:!1})=>{i(y=>y.map(p=>{if(p.id===f){const x=typeof d=="function"?d(p):d;return h.replace&&Vo(x)?x:{...p,...x}}return p}))},l=(f,d,h={replace:!1})=>{a(y=>y.map(p=>{if(p.id===f){const x=typeof d=="function"?d(p):d;return h.replace&&rp(x)?x:{...p,...x}}return p}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var d;return(d=o(f))==null?void 0:d.internals.userNode},getInternalNode:o,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(d=>({...d}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:i,setEdges:a,addNodes:f=>{const d=Array.isArray(f)?f:[f];n.nodeQueue.push(h=>[...h,...d])},addEdges:f=>{const d=Array.isArray(f)?f:[f];n.edgeQueue.push(h=>[...h,...d])},toObject:()=>{const{nodes:f=[],edges:d=[],transform:h}=t.getState(),[y,p,x]=h;return{nodes:f.map(b=>({...b})),edges:d.map(b=>({...b})),viewport:{x:y,y:p,zoom:x}}},deleteElements:async({nodes:f=[],edges:d=[]})=>{const{nodes:h,edges:y,onNodesDelete:p,onEdgesDelete:x,triggerNodeChanges:b,triggerEdgeChanges:C,onDelete:g,onBeforeDelete:w}=t.getState(),{nodes:S,edges:_}=await Tm({nodesToRemove:f,edgesToRemove:d,nodes:h,edges:y,onBeforeDelete:w}),E=_.length>0,M=S.length>0;if(E){const L=_.map(Fo);x==null||x(_),C(L)}if(M){const L=S.map(Fo);p==null||p(S),b(L)}return(M||E)&&(g==null||g({nodes:S,edges:_})),{deletedNodes:S,deletedEdges:_}},getIntersectingNodes:(f,d=!0,h)=>{const y=po(f),p=y?f:c(f),x=h!==void 0;return p?(h||t.getState().nodes).filter(b=>{const C=t.getState().nodeLookup.get(b.id);if(C&&!y&&(b.id===f.id||!C.internals.positionAbsolute))return!1;const g=Rt(x?b:C),w=cn(g,p);return d&&w>0||w>=g.width*g.height||w>=p.width*p.height}):[]},isNodeIntersecting:(f,d,h=!0)=>{const p=po(f)?f:c(f);if(!p)return!1;const x=cn(p,d);return h&&x>0||x>=p.width*p.height},updateNode:u,updateNodeData:(f,d,h={replace:!1})=>{u(f,y=>{const p=typeof d=="function"?d(y):d;return h.replace?{...y,data:p}:{...y,data:{...y.data,...p}}},h)},updateEdge:l,updateEdgeData:(f,d,h={replace:!1})=>{l(f,y=>{const p=typeof d=="function"?d(y):d;return h.replace?{...y,data:p}:{...y,data:{...y.data,...p}}},h)},getNodesBounds:f=>{const{nodeLookup:d,nodeOrigin:h}=t.getState();return Im(f,{nodeLookup:d,nodeOrigin:h})},getHandleConnections:({type:f,id:d,nodeId:h})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${h}-${f}${d?`-${d}`:""}`))==null?void 0:y.values())??[])},getNodeConnections:({type:f,handleId:d,nodeId:h})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${h}${f?d?`-${f}-${d}`:`-${f}`:""}`))==null?void 0:y.values())??[])},fitView:async f=>{const d=t.getState().fitViewResolver??Rm();return t.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:d}),n.nodeQueue.push(h=>[...h]),d.promise}}},[]);return k.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const Xo=e=>e.selected,lp=typeof window<"u"?window:void 0;function up({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=de(),{deleteElements:r}=As(),s=un(e,{actInsideInputWithModifier:!1}),o=un(t,{target:lp});k.useEffect(()=>{if(s){const{edges:i,nodes:a}=n.getState();r({nodes:a.filter(Xo),edges:i.filter(Xo)}),n.setState({nodesSelectionActive:!1})}},[s]),k.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function dp(e){const t=de();k.useEffect(()=>{const n=()=>{var s,o;if(!e.current)return!1;const r=Ns(e.current);(r.height===0||r.width===0)&&((o=(s=t.getState()).onError)==null||o.call(s,"004",Oe.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const br={position:"absolute",width:"100%",height:"100%",top:0,left:0},fp=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function hp({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:o=yt.Free,zoomOnDoubleClick:i=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:l,maxZoom:f,zoomActivationKeyCode:d,preventScrolling:h=!0,children:y,noWheelClassName:p,noPanClassName:x,onViewportChange:b,isControlledViewport:C,paneClickDistance:g}){const w=de(),S=k.useRef(null),{userSelectionActive:_,lib:E}=se(fp,fe),M=un(d),L=k.useRef();dp(S);const z=k.useCallback(T=>{b==null||b({x:T[0],y:T[1],zoom:T[2]}),C||w.setState({transform:T})},[b,C]);return k.useEffect(()=>{if(S.current){L.current=yg({domNode:S.current,minZoom:l,maxZoom:f,translateExtent:u,viewport:c,paneClickDistance:g,onDraggingChange:v=>w.setState({paneDragging:v}),onPanZoomStart:(v,I)=>{const{onViewportChangeStart:N,onMoveStart:A}=w.getState();A==null||A(v,I),N==null||N(I)},onPanZoom:(v,I)=>{const{onViewportChange:N,onMove:A}=w.getState();A==null||A(v,I),N==null||N(I)},onPanZoomEnd:(v,I)=>{const{onViewportChangeEnd:N,onMoveEnd:A}=w.getState();A==null||A(v,I),N==null||N(I)}});const{x:T,y:P,zoom:R}=L.current.getViewport();return w.setState({panZoom:L.current,transform:[T,P,R],domNode:S.current.closest(".react-flow")}),()=>{var v;(v=L.current)==null||v.destroy()}}},[]),k.useEffect(()=>{var T;(T=L.current)==null||T.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:o,zoomOnDoubleClick:i,panOnDrag:a,zoomActivationKeyPressed:M,preventScrolling:h,noPanClassName:x,userSelectionActive:_,noWheelClassName:p,lib:E,onTransformChange:z})},[e,t,n,r,s,o,i,a,M,h,x,_,p,E,z]),m.jsx("div",{className:"react-flow__renderer",ref:S,style:br,children:y})}const mp=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function gp(){const{userSelectionActive:e,userSelectionRect:t}=se(mp,fe);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Dr=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},pp=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function yp({isSelecting:e,selectionKeyPressed:t,selectionMode:n=on.Full,panOnDrag:r,selectionOnDrag:s,onSelectionStart:o,onSelectionEnd:i,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:l,onPaneMouseMove:f,onPaneMouseLeave:d,children:h}){const y=de(),{userSelectionActive:p,elementsSelectable:x,dragging:b,connectionInProgress:C}=se(pp,fe),g=x&&(e||p),w=k.useRef(null),S=k.useRef(),_=k.useRef(new Set),E=k.useRef(new Set),M=k.useRef(!1),L=k.useRef(!1),z=A=>{if(M.current||C){M.current=!1;return}a==null||a(A),y.getState().resetSelectedElements(),y.setState({nodesSelectionActive:!1})},T=A=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){A.preventDefault();return}c==null||c(A)},P=u?A=>u(A):void 0,R=A=>{var B,X;const{resetSelectedElements:$,domNode:j}=y.getState();if(S.current=j==null?void 0:j.getBoundingClientRect(),!x||!e||A.button!==0||A.target!==w.current||!S.current)return;(X=(B=A.target)==null?void 0:B.setPointerCapture)==null||X.call(B,A.pointerId),L.current=!0,M.current=!1;const{x:D,y:O}=Re(A.nativeEvent,S.current);$(),y.setState({userSelectionRect:{width:0,height:0,startX:D,startY:O,x:D,y:O}}),o==null||o(A)},v=A=>{const{userSelectionRect:$,transform:j,nodeLookup:D,edgeLookup:O,connectionLookup:B,triggerNodeChanges:X,triggerEdgeChanges:V,defaultEdgeOptions:Q}=y.getState();if(!S.current||!$)return;M.current=!0;const{x:U,y:W}=Re(A.nativeEvent,S.current),{startX:q,startY:Z}=$,oe={startX:q,startY:Z,x:U<q?U:q,y:W<Z?W:Z,width:Math.abs(U-q),height:Math.abs(W-Z)},ne=_.current,J=E.current;_.current=new Set(Ss(D,oe,j,n===on.Partial,!0).map(ee=>ee.id)),E.current=new Set;const te=(Q==null?void 0:Q.selectable)??!0;for(const ee of _.current){const le=B.get(ee);if(le)for(const{edgeId:me}of le.values()){const qe=O.get(me);qe&&(qe.selectable??te)&&E.current.add(me)}}if(!yo(ne,_.current)){const ee=_t(D,_.current,!0);X(ee)}if(!yo(J,E.current)){const ee=_t(O,E.current);V(ee)}y.setState({userSelectionRect:oe,userSelectionActive:!0,nodesSelectionActive:!1})},I=A=>{var j,D;if(A.button!==0||!L.current)return;(D=(j=A.target)==null?void 0:j.releasePointerCapture)==null||D.call(j,A.pointerId);const{userSelectionRect:$}=y.getState();!p&&$&&A.target===w.current&&(z==null||z(A)),y.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),i==null||i(A),(t||s)&&(M.current=!1),L.current=!1},N=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:ge(["react-flow__pane",{draggable:N,dragging:b,selection:e}]),onClick:g?void 0:Dr(z,w),onContextMenu:Dr(T,w),onWheel:Dr(P,w),onPointerEnter:g?void 0:l,onPointerDown:g?R:f,onPointerMove:g?v:f,onPointerUp:g?I:void 0,onPointerLeave:d,ref:w,style:br,children:[h,m.jsx(gp,{})]})}function us({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:i,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Oe.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var l;return(l=r==null?void 0:r.current)==null?void 0:l.blur()})):s([e])}function Fa({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,nodeClickDistance:i}){const a=de(),[c,u]=k.useState(!1),l=k.useRef();return k.useEffect(()=>{l.current=ng({getStoreItems:()=>a.getState(),onNodeMouseDown:f=>{us({id:f,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),k.useEffect(()=>{var f,d;if(t)(f=l.current)==null||f.destroy();else if(e.current)return(d=l.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:o,nodeId:s,nodeClickDistance:i}),()=>{var h;(h=l.current)==null||h.destroy()}},[n,r,t,o,e,s]),c}const xp=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Va(){const e=de();return k.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:o,nodesDraggable:i,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:l}=e.getState(),f=new Map,d=xp(i),h=s?o[0]:5,y=s?o[1]:5,p=n.direction.x*h*n.factor,x=n.direction.y*y*n.factor;for(const[,b]of u){if(!d(b))continue;let C={x:b.internals.positionAbsolute.x+p,y:b.internals.positionAbsolute.y+x};s&&(C=gr(C,o));const{position:g,positionAbsolute:w}=ca({nodeId:b.id,nextPosition:C,nodeLookup:u,nodeExtent:r,nodeOrigin:l,onError:a});b.position=g,b.internals.positionAbsolute=w,f.set(b.id,b)}c(f)},[])}const js=k.createContext(null),bp=js.Provider;js.Consumer;const qa=()=>k.useContext(js),wp=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),vp=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:o,connection:i}=r,{fromHandle:a,toHandle:c,isValid:u}=i,l=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:l,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:o===$t.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!s,valid:l&&u}};function Cp({type:e="source",position:t=Y.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:i,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:f,...d},h){var I,N;const y=i||null,p=e==="target",x=de(),b=qa(),{connectOnClick:C,noPanClassName:g,rfId:w}=se(wp,fe),{connectingFrom:S,connectingTo:_,clickConnecting:E,isPossibleEndHandle:M,connectionInProcess:L,clickConnectionInProcess:z,valid:T}=se(vp(b,y,e),fe);b||(N=(I=x.getState()).onError)==null||N.call(I,"010",Oe.error010());const P=A=>{const{defaultEdgeOptions:$,onConnect:j,hasDefaultEdges:D}=x.getState(),O={...$,...A};if(D){const{edges:B,setEdges:X}=x.getState();X(wa(O,B))}j==null||j(O),a==null||a(O)},R=A=>{if(!b)return;const $=pa(A.nativeEvent);if(s&&($&&A.button===0||!$)){const j=x.getState();ls.onPointerDown(A.nativeEvent,{autoPanOnConnect:j.autoPanOnConnect,connectionMode:j.connectionMode,connectionRadius:j.connectionRadius,domNode:j.domNode,nodeLookup:j.nodeLookup,lib:j.lib,isTarget:p,handleId:y,nodeId:b,flowId:j.rfId,panBy:j.panBy,cancelConnection:j.cancelConnection,onConnectStart:j.onConnectStart,onConnectEnd:j.onConnectEnd,updateConnection:j.updateConnection,onConnect:P,isValidConnection:n||j.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:j.autoPanSpeed,dragThreshold:j.connectionDragThreshold})}$?l==null||l(A):f==null||f(A)},v=A=>{const{onClickConnectStart:$,onClickConnectEnd:j,connectionClickStartHandle:D,connectionMode:O,isValidConnection:B,lib:X,rfId:V,nodeLookup:Q,connection:U}=x.getState();if(!b||!D&&!s)return;if(!D){$==null||$(A.nativeEvent,{nodeId:b,handleId:y,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:b,type:e,id:y}});return}const W=ma(A.target),q=n||B,{connection:Z,isValid:oe}=ls.isValid(A.nativeEvent,{handle:{nodeId:b,id:y,type:e},connectionMode:O,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:q,flowId:V,doc:W,lib:X,nodeLookup:Q});oe&&Z&&P(Z);const ne=structuredClone(U);delete ne.inProgress,ne.toPosition=ne.toHandle?ne.toHandle.position:null,j==null||j(A,ne),x.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":y,"data-nodeid":b,"data-handlepos":t,"data-id":`${w}-${b}-${y}-${e}`,className:ge(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,u,{source:!p,target:p,connectable:r,connectablestart:s,connectableend:o,clickconnecting:E,connectingfrom:S,connectingto:_,valid:T,connectionindicator:r&&(!L||M)&&(L||z?o:s)}]),onMouseDown:R,onTouchStart:R,onClick:C?v:void 0,ref:h,...d,children:c})}const Ht=k.memo(Ha(Cp));function Sp({data:e,isConnectable:t,sourcePosition:n=Y.Bottom}){return m.jsxs(m.Fragment,{children:[e==null?void 0:e.label,m.jsx(Ht,{type:"source",position:n,isConnectable:t})]})}function kp({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(Ht,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,m.jsx(Ht,{type:"source",position:r,isConnectable:t})]})}function Np(){return null}function _p({data:e,isConnectable:t,targetPosition:n=Y.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(Ht,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const tr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Yo={input:Sp,default:kp,output:_p,group:Np};function Ep(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const Mp=e=>{const{width:t,height:n,x:r,y:s}=bn(e.nodeLookup,{filter:o=>!!o.selected});return{width:Ae(t)?t:null,height:Ae(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function Ip({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=de(),{width:s,height:o,transformString:i,userSelectionActive:a}=se(Mp,fe),c=Va(),u=k.useRef(null);if(k.useEffect(()=>{var d;n||(d=u.current)==null||d.focus({preventScroll:!0})},[n]),Fa({nodeRef:u}),a||!s||!o)return null;const l=e?d=>{const h=r.getState().nodes.filter(y=>y.selected);e(d,h)}:void 0,f=d=>{Object.prototype.hasOwnProperty.call(tr,d.key)&&(d.preventDefault(),c({direction:tr[d.key],factor:d.shiftKey?4:1}))};return m.jsx("div",{className:ge(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:m.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:l,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:s,height:o}})})}const Wo=typeof window<"u"?window:void 0,Ap=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Xa({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:l,selectionMode:f,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:y,panActivationKeyCode:p,zoomActivationKeyCode:x,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:g,panOnScroll:w,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:E,panOnDrag:M,defaultViewport:L,translateExtent:z,minZoom:T,maxZoom:P,preventScrolling:R,onSelectionContextMenu:v,noWheelClassName:I,noPanClassName:N,disableKeyboardA11y:A,onViewportChange:$,isControlledViewport:j}){const{nodesSelectionActive:D,userSelectionActive:O}=se(Ap),B=un(u,{target:Wo}),X=un(p,{target:Wo}),V=X||M,Q=X||w,U=l&&V!==!0,W=B||O||U;return up({deleteKeyCode:c,multiSelectionKeyCode:y}),m.jsx(hp,{onPaneContextMenu:o,elementsSelectable:b,zoomOnScroll:C,zoomOnPinch:g,panOnScroll:Q,panOnScrollSpeed:S,panOnScrollMode:_,zoomOnDoubleClick:E,panOnDrag:!B&&V,defaultViewport:L,translateExtent:z,minZoom:T,maxZoom:P,zoomActivationKeyCode:x,preventScrolling:R,noWheelClassName:I,noPanClassName:N,onViewportChange:$,isControlledViewport:j,paneClickDistance:a,children:m.jsxs(yp,{onSelectionStart:d,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:V,isSelecting:!!W,selectionMode:f,selectionKeyPressed:B,selectionOnDrag:U,children:[e,D&&m.jsx(Ip,{onSelectionContextMenu:v,noPanClassName:N,disableKeyboardA11y:A})]})})}Xa.displayName="FlowRenderer";const jp=k.memo(Xa),Lp=e=>t=>e?Ss(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Tp(e){return se(k.useCallback(Lp(e),[e]),fe)}const Pp=e=>e.updateNodeInternals;function $p(){const e=se(Pp),[t]=k.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const o=s.target.getAttribute("data-id");r.set(o,{id:o,nodeElement:s.target,force:!0})}),e(r)}));return k.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function Dp({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=de(),o=k.useRef(null),i=k.useRef(null),a=k.useRef(e.sourcePosition),c=k.useRef(e.targetPosition),u=k.useRef(t),l=n&&!!e.internals.handleBounds;return k.useEffect(()=>{o.current&&!e.hidden&&(!l||i.current!==o.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(o.current),i.current=o.current)},[l,e.hidden]),k.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),k.useEffect(()=>{if(o.current){const f=u.current!==t,d=a.current!==e.sourcePosition,h=c.current!==e.targetPosition;(f||d||h)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function Rp({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:o,onDoubleClick:i,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:l,resizeObserver:f,noDragClassName:d,noPanClassName:h,disableKeyboardA11y:y,rfId:p,nodeTypes:x,nodeClickDistance:b,onError:C}){const{node:g,internals:w,isParent:S}=se(q=>{const Z=q.nodeLookup.get(e),oe=q.parentLookup.has(e);return{node:Z,internals:Z.internals,isParent:oe}},fe);let _=g.type||"default",E=(x==null?void 0:x[_])||Yo[_];E===void 0&&(C==null||C("003",Oe.error003(_)),_="default",E=(x==null?void 0:x.default)||Yo.default);const M=!!(g.draggable||a&&typeof g.draggable>"u"),L=!!(g.selectable||c&&typeof g.selectable>"u"),z=!!(g.connectable||u&&typeof g.connectable>"u"),T=!!(g.focusable||l&&typeof g.focusable>"u"),P=de(),R=fa(g),v=Dp({node:g,nodeType:_,hasDimensions:R,resizeObserver:f}),I=Fa({nodeRef:v,disabled:g.hidden||!M,noDragClassName:d,handleSelector:g.dragHandle,nodeId:e,isSelectable:L,nodeClickDistance:b}),N=Va();if(g.hidden)return null;const A=et(g),$=Ep(g),j=L||M||t||n||r||s,D=n?q=>n(q,{...w.userNode}):void 0,O=r?q=>r(q,{...w.userNode}):void 0,B=s?q=>s(q,{...w.userNode}):void 0,X=o?q=>o(q,{...w.userNode}):void 0,V=i?q=>i(q,{...w.userNode}):void 0,Q=q=>{const{selectNodesOnDrag:Z,nodeDragThreshold:oe}=P.getState();L&&(!Z||!M||oe>0)&&us({id:e,store:P,nodeRef:v}),t&&t(q,{...w.userNode})},U=q=>{if(!(ga(q.nativeEvent)||y)){if(ra.includes(q.key)&&L){const Z=q.key==="Escape";us({id:e,store:P,unselect:Z,nodeRef:v})}else if(M&&g.selected&&Object.prototype.hasOwnProperty.call(tr,q.key)){q.preventDefault();const{ariaLabelConfig:Z}=P.getState();P.setState({ariaLiveMessage:Z["node.a11yDescription.ariaLiveMessage"]({direction:q.key.replace("Arrow","").toLowerCase(),x:~~w.positionAbsolute.x,y:~~w.positionAbsolute.y})}),N({direction:tr[q.key],factor:q.shiftKey?4:1})}}},W=()=>{var ee;if(y||!((ee=v.current)!=null&&ee.matches(":focus-visible")))return;const{transform:q,width:Z,height:oe,autoPanOnNodeFocus:ne,setCenter:J}=P.getState();if(!ne)return;Ss(new Map([[e,g]]),{x:0,y:0,width:Z,height:oe},q,!0).length>0||J(g.position.x+A.width/2,g.position.y+A.height/2,{zoom:q[2]})};return m.jsx("div",{className:ge(["react-flow__node",`react-flow__node-${_}`,{[h]:M},g.className,{selected:g.selected,selectable:L,parent:S,draggable:M,dragging:I}]),ref:v,style:{zIndex:w.z,transform:`translate(${w.positionAbsolute.x}px,${w.positionAbsolute.y}px)`,pointerEvents:j?"all":"none",visibility:R?"visible":"hidden",...g.style,...$},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:D,onMouseMove:O,onMouseLeave:B,onContextMenu:X,onClick:Q,onDoubleClick:V,onKeyDown:T?U:void 0,tabIndex:T?0:void 0,onFocus:T?W:void 0,role:g.ariaRole??(T?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${Pa}-${p}`,"aria-label":g.ariaLabel,...g.domAttributes,children:m.jsx(bp,{value:e,children:m.jsx(E,{id:e,data:g.data,type:_,positionAbsoluteX:w.positionAbsolute.x,positionAbsoluteY:w.positionAbsolute.y,selected:g.selected??!1,selectable:L,draggable:M,deletable:g.deletable??!0,isConnectable:z,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:I,dragHandle:g.dragHandle,zIndex:w.z,parentId:g.parentId,...A})})})}const zp=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ya(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:o}=se(zp,fe),i=Tp(e.onlyRenderVisibleElements),a=$p();return m.jsx("div",{className:"react-flow__nodes",style:br,children:i.map(c=>m.jsx(Rp,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:o},c))})}Ya.displayName="NodeRenderer";const Op=k.memo(Ya);function Hp(e){return se(k.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const o=n.nodeLookup.get(s.source),i=n.nodeLookup.get(s.target);o&&i&&Bm({sourceNode:o,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),fe)}const Bp=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Fp=({color:e="none",strokeWidth:t=1})=>m.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Qo={[an.Arrow]:Bp,[an.ArrowClosed]:Fp};function Vp(e){const t=de();return k.useMemo(()=>{var s,o;return Object.prototype.hasOwnProperty.call(Qo,e)?Qo[e]:((o=(s=t.getState()).onError)==null||o.call(s,"009",Oe.error009(e)),null)},[e])}const qp=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=Vp(t);return c?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:m.jsx(c,{color:n,strokeWidth:i})}):null},Wa=({defaultColor:e,rfId:t})=>{const n=se(o=>o.edges),r=se(o=>o.defaultEdgeOptions),s=k.useMemo(()=>Qm(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:s.map(o=>m.jsx(qp,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};Wa.displayName="MarkerDefinitions";var Xp=k.memo(Wa);function Qa({x:e,y:t,label:n,labelStyle:r,labelShowBg:s=!0,labelBgStyle:o,labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l}){const[f,d]=k.useState({x:1,y:0,width:0,height:0}),h=ge(["react-flow__edge-textwrapper",u]),y=k.useRef(null);return k.useEffect(()=>{if(y.current){const p=y.current.getBBox();d({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:h,visibility:f.width?"visible":"hidden",...l,children:[s&&m.jsx("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),m.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]}):null}Qa.displayName="EdgeText";const Yp=k.memo(Qa);function wr({path:e,labelX:t,labelY:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...l}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...l,d:e,fill:"none",className:ge(["react-flow__edge-path",l.className])}),u&&m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&Ae(t)&&Ae(n)?m.jsx(Yp,{x:t,y:n,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function Uo({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function Ua({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:s,targetPosition:o=Y.Top}){const[i,a]=Uo({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,u]=Uo({pos:o,x1:r,y1:s,x2:e,y2:t}),[l,f,d,h]=ya({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${a} ${c},${u} ${r},${s}`,l,f,d,h]}function Ka(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:i,targetPosition:a,label:c,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:y,markerEnd:p,markerStart:x,interactionWidth:b})=>{const[C,g,w]=Ua({sourceX:n,sourceY:r,sourcePosition:i,targetX:s,targetY:o,targetPosition:a}),S=e.isInternal?void 0:t;return m.jsx(wr,{id:S,path:C,labelX:g,labelY:w,label:c,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:y,markerEnd:p,markerStart:x,interactionWidth:b})})}const Wp=Ka({isInternal:!1}),Ga=Ka({isInternal:!0});Wp.displayName="SimpleBezierEdge";Ga.displayName="SimpleBezierEdgeInternal";function Za(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,sourcePosition:h=Y.Bottom,targetPosition:y=Y.Top,markerEnd:p,markerStart:x,pathOptions:b,interactionWidth:C})=>{const[g,w,S]=is({sourceX:n,sourceY:r,sourcePosition:h,targetX:s,targetY:o,targetPosition:y,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset,stepPosition:b==null?void 0:b.stepPosition}),_=e.isInternal?void 0:t;return m.jsx(wr,{id:_,path:g,labelX:w,labelY:S,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:C})})}const Ja=Za({isInternal:!1}),ec=Za({isInternal:!0});Ja.displayName="SmoothStepEdge";ec.displayName="SmoothStepEdgeInternal";function tc(e){return k.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return m.jsx(Ja,{...n,id:r,pathOptions:k.useMemo(()=>{var o;return{borderRadius:0,offset:(o=n.pathOptions)==null?void 0:o.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const Qp=tc({isInternal:!1}),nc=tc({isInternal:!0});Qp.displayName="StepEdge";nc.displayName="StepEdgeInternal";function rc(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:y,interactionWidth:p})=>{const[x,b,C]=va({sourceX:n,sourceY:r,targetX:s,targetY:o}),g=e.isInternal?void 0:t;return m.jsx(wr,{id:g,path:x,labelX:b,labelY:C,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:y,interactionWidth:p})})}const Up=rc({isInternal:!1}),sc=rc({isInternal:!0});Up.displayName="StraightEdge";sc.displayName="StraightEdgeInternal";function oc(e){return k.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:o,sourcePosition:i=Y.Bottom,targetPosition:a=Y.Top,label:c,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:y,markerEnd:p,markerStart:x,pathOptions:b,interactionWidth:C})=>{const[g,w,S]=xa({sourceX:n,sourceY:r,sourcePosition:i,targetX:s,targetY:o,targetPosition:a,curvature:b==null?void 0:b.curvature}),_=e.isInternal?void 0:t;return m.jsx(wr,{id:_,path:g,labelX:w,labelY:S,label:c,labelStyle:u,labelShowBg:l,labelBgStyle:f,labelBgPadding:d,labelBgBorderRadius:h,style:y,markerEnd:p,markerStart:x,interactionWidth:C})})}const Kp=oc({isInternal:!1}),ic=oc({isInternal:!0});Kp.displayName="BezierEdge";ic.displayName="BezierEdgeInternal";const Ko={default:ic,straight:sc,step:nc,smoothstep:ec,simplebezier:Ga},Go={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Gp=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Zp=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,Zo="react-flow__edgeupdater";function Jo({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:i,type:a}){return m.jsx("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:i,className:ge([Zo,`${Zo}-${a}`]),cx:Gp(t,r,e),cy:Zp(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Jp({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:o,targetY:i,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:l,onReconnectEnd:f,setReconnecting:d,setUpdateHover:h}){const y=de(),p=(w,S)=>{if(w.button!==0)return;const{autoPanOnConnect:_,domNode:E,isValidConnection:M,connectionMode:L,connectionRadius:z,lib:T,onConnectStart:P,onConnectEnd:R,cancelConnection:v,nodeLookup:I,rfId:N,panBy:A,updateConnection:$}=y.getState(),j=S.type==="target",D=(X,V)=>{d(!1),f==null||f(X,n,S.type,V)},O=X=>u==null?void 0:u(n,X),B=(X,V)=>{d(!0),l==null||l(w,n,S.type),P==null||P(X,V)};ls.onPointerDown(w.nativeEvent,{autoPanOnConnect:_,connectionMode:L,connectionRadius:z,domNode:E,handleId:S.id,nodeId:S.nodeId,nodeLookup:I,isTarget:j,edgeUpdaterType:S.type,lib:T,flowId:N,cancelConnection:v,panBy:A,isValidConnection:M,onConnect:O,onConnectStart:B,onConnectEnd:R,onReconnectEnd:D,updateConnection:$,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold})},x=w=>p(w,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=w=>p(w,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),C=()=>h(!0),g=()=>h(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(Jo,{position:a,centerX:r,centerY:s,radius:t,onMouseDown:x,onMouseEnter:C,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&m.jsx(Jo,{position:c,centerX:o,centerY:i,radius:t,onMouseDown:b,onMouseEnter:C,onMouseOut:g,type:"target"})]})}function e0({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:o,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:l,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,rfId:y,edgeTypes:p,noPanClassName:x,onError:b,disableKeyboardA11y:C}){let g=se(J=>J.edgeLookup.get(e));const w=se(J=>J.defaultEdgeOptions);g=w?{...w,...g}:g;let S=g.type||"default",_=(p==null?void 0:p[S])||Ko[S];_===void 0&&(b==null||b("011",Oe.error011(S)),S="default",_=(p==null?void 0:p.default)||Ko.default);const E=!!(g.focusable||t&&typeof g.focusable>"u"),M=typeof f<"u"&&(g.reconnectable||n&&typeof g.reconnectable>"u"),L=!!(g.selectable||r&&typeof g.selectable>"u"),z=k.useRef(null),[T,P]=k.useState(!1),[R,v]=k.useState(!1),I=de(),{zIndex:N,sourceX:A,sourceY:$,targetX:j,targetY:D,sourcePosition:O,targetPosition:B}=se(k.useCallback(J=>{const te=J.nodeLookup.get(g.source),ee=J.nodeLookup.get(g.target);if(!te||!ee)return{zIndex:g.zIndex,...Go};const le=Wm({id:e,sourceNode:te,targetNode:ee,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:J.connectionMode,onError:b});return{zIndex:Hm({selected:g.selected,zIndex:g.zIndex,sourceNode:te,targetNode:ee,elevateOnSelect:J.elevateEdgesOnSelect}),...le||Go}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),fe),X=k.useMemo(()=>g.markerStart?`url('#${as(g.markerStart,y)}')`:void 0,[g.markerStart,y]),V=k.useMemo(()=>g.markerEnd?`url('#${as(g.markerEnd,y)}')`:void 0,[g.markerEnd,y]);if(g.hidden||A===null||$===null||j===null||D===null)return null;const Q=J=>{var me;const{addSelectedEdges:te,unselectNodesAndEdges:ee,multiSelectionActive:le}=I.getState();L&&(I.setState({nodesSelectionActive:!1}),g.selected&&le?(ee({nodes:[],edges:[g]}),(me=z.current)==null||me.blur()):te([e])),s&&s(J,g)},U=o?J=>{o(J,{...g})}:void 0,W=i?J=>{i(J,{...g})}:void 0,q=a?J=>{a(J,{...g})}:void 0,Z=c?J=>{c(J,{...g})}:void 0,oe=u?J=>{u(J,{...g})}:void 0,ne=J=>{var te;if(!C&&ra.includes(J.key)&&L){const{unselectNodesAndEdges:ee,addSelectedEdges:le}=I.getState();J.key==="Escape"?((te=z.current)==null||te.blur(),ee({edges:[g]})):le([e])}};return m.jsx("svg",{style:{zIndex:N},children:m.jsxs("g",{className:ge(["react-flow__edge",`react-flow__edge-${S}`,g.className,x,{selected:g.selected,animated:g.animated,inactive:!L&&!s,updating:T,selectable:L}]),onClick:Q,onDoubleClick:U,onContextMenu:W,onMouseEnter:q,onMouseMove:Z,onMouseLeave:oe,onKeyDown:E?ne:void 0,tabIndex:E?0:void 0,role:g.ariaRole??(E?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":E?`${$a}-${y}`:void 0,ref:z,...g.domAttributes,children:[!R&&m.jsx(_,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:L,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:A,sourceY:$,targetX:j,targetY:D,sourcePosition:O,targetPosition:B,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:X,markerEnd:V,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),M&&m.jsx(Jp,{edge:g,isReconnectable:M,reconnectRadius:l,onReconnect:f,onReconnectStart:d,onReconnectEnd:h,sourceX:A,sourceY:$,targetX:j,targetY:D,sourcePosition:O,targetPosition:B,setUpdateHover:P,setReconnecting:v})]})})}const t0=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function ac({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:o,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,reconnectRadius:f,onEdgeDoubleClick:d,onReconnectStart:h,onReconnectEnd:y,disableKeyboardA11y:p}){const{edgesFocusable:x,edgesReconnectable:b,elementsSelectable:C,onError:g}=se(t0,fe),w=Hp(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(Xp,{defaultColor:e,rfId:n}),w.map(S=>m.jsx(e0,{id:S,edgesFocusable:x,edgesReconnectable:b,elementsSelectable:C,noPanClassName:s,onReconnect:o,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,reconnectRadius:f,onDoubleClick:d,onReconnectStart:h,onReconnectEnd:y,rfId:n,onError:g,edgeTypes:r,disableKeyboardA11y:p},S))]})}ac.displayName="EdgeRenderer";const n0=k.memo(ac),r0=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function s0({children:e}){const t=se(r0);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function o0(e){const t=As(),n=k.useRef(!1);k.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const i0=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function a0(e){const t=se(i0),n=de();return k.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function c0(e){return e.connection.inProgress?{...e.connection,to:wn(e.connection.to,e.transform)}:{...e.connection}}function l0(e){return c0}function u0(e){const t=l0();return se(t,fe)}const d0=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function f0({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:o,height:i,isValid:a,inProgress:c}=se(d0,fe);return!(o&&s&&c)?null:m.jsx("svg",{style:e,width:o,height:i,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:ge(["react-flow__connection",ia(a)]),children:m.jsx(cc,{style:t,type:n,CustomComponent:r,isValid:a})})})}const cc=({style:e,type:t=st.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:o,fromNode:i,fromHandle:a,fromPosition:c,to:u,toNode:l,toHandle:f,toPosition:d}=u0();if(!s)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:a,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:d,connectionStatus:ia(r),toNode:l,toHandle:f});let h="";const y={sourceX:o.x,sourceY:o.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:d};switch(t){case st.Bezier:[h]=xa(y);break;case st.SimpleBezier:[h]=Ua(y);break;case st.Step:[h]=is({...y,borderRadius:0});break;case st.SmoothStep:[h]=is(y);break;default:[h]=va(y)}return m.jsx("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};cc.displayName="ConnectionLine";const h0={};function ei(e=h0){k.useRef(e),de(),k.useEffect(()=>{},[e])}function m0(){de(),k.useRef(!1),k.useEffect(()=>{},[])}function lc({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:o,onEdgeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:l,onSelectionContextMenu:f,onSelectionStart:d,onSelectionEnd:h,connectionLineType:y,connectionLineStyle:p,connectionLineComponent:x,connectionLineContainerStyle:b,selectionKeyCode:C,selectionOnDrag:g,selectionMode:w,multiSelectionKeyCode:S,panActivationKeyCode:_,zoomActivationKeyCode:E,deleteKeyCode:M,onlyRenderVisibleElements:L,elementsSelectable:z,defaultViewport:T,translateExtent:P,minZoom:R,maxZoom:v,preventScrolling:I,defaultMarkerColor:N,zoomOnScroll:A,zoomOnPinch:$,panOnScroll:j,panOnScrollSpeed:D,panOnScrollMode:O,zoomOnDoubleClick:B,panOnDrag:X,onPaneClick:V,onPaneMouseEnter:Q,onPaneMouseMove:U,onPaneMouseLeave:W,onPaneScroll:q,onPaneContextMenu:Z,paneClickDistance:oe,nodeClickDistance:ne,onEdgeContextMenu:J,onEdgeMouseEnter:te,onEdgeMouseMove:ee,onEdgeMouseLeave:le,reconnectRadius:me,onReconnect:qe,onReconnectStart:Ct,onReconnectEnd:vn,noDragClassName:Cn,noWheelClassName:Sn,noPanClassName:Vt,disableKeyboardA11y:qt,nodeExtent:vr,rfId:kn,viewport:St,onViewportChange:Xt}){return ei(e),ei(t),m0(),o0(n),a0(St),m.jsx(jp,{onPaneClick:V,onPaneMouseEnter:Q,onPaneMouseMove:U,onPaneMouseLeave:W,onPaneContextMenu:Z,onPaneScroll:q,paneClickDistance:oe,deleteKeyCode:M,selectionKeyCode:C,selectionOnDrag:g,selectionMode:w,onSelectionStart:d,onSelectionEnd:h,multiSelectionKeyCode:S,panActivationKeyCode:_,zoomActivationKeyCode:E,elementsSelectable:z,zoomOnScroll:A,zoomOnPinch:$,zoomOnDoubleClick:B,panOnScroll:j,panOnScrollSpeed:D,panOnScrollMode:O,panOnDrag:X,defaultViewport:T,translateExtent:P,minZoom:R,maxZoom:v,onSelectionContextMenu:f,preventScrolling:I,noDragClassName:Cn,noWheelClassName:Sn,noPanClassName:Vt,disableKeyboardA11y:qt,onViewportChange:Xt,isControlledViewport:!!St,children:m.jsxs(s0,{children:[m.jsx(n0,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:i,onReconnect:qe,onReconnectStart:Ct,onReconnectEnd:vn,onlyRenderVisibleElements:L,onEdgeContextMenu:J,onEdgeMouseEnter:te,onEdgeMouseMove:ee,onEdgeMouseLeave:le,reconnectRadius:me,defaultMarkerColor:N,noPanClassName:Vt,disableKeyboardA11y:qt,rfId:kn}),m.jsx(f0,{style:p,type:y,component:x,containerStyle:b}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(Op,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:o,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:l,nodeClickDistance:ne,onlyRenderVisibleElements:L,noPanClassName:Vt,noDragClassName:Cn,disableKeyboardA11y:qt,nodeExtent:vr,rfId:kn}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}lc.displayName="GraphView";const g0=k.memo(lc),ti=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:i,fitViewOptions:a,minZoom:c=.5,maxZoom:u=2,nodeOrigin:l,nodeExtent:f}={})=>{const d=new Map,h=new Map,y=new Map,p=new Map,x=r??t??[],b=n??e??[],C=l??[0,0],g=f??sn;Sa(y,p,x);const w=cs(b,d,h,{nodeOrigin:C,nodeExtent:g,elevateNodesOnSelect:!1});let S=[0,0,1];if(i&&s&&o){const _=bn(d,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:E,y:M,zoom:L}=ks(_,s,o,c,u,(a==null?void 0:a.padding)??.1);S=[E,M,L]}return{rfId:"1",width:0,height:0,transform:S,nodes:b,nodesInitialized:w,nodeLookup:d,parentLookup:h,edges:x,edgeLookup:p,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:u,translateExtent:sn,nodeExtent:g,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:$t.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:C,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:i??!1,fitViewOptions:a,fitViewResolver:null,connection:{...oa},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Pm,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:sa}},p0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:i,fitViewOptions:a,minZoom:c,maxZoom:u,nodeOrigin:l,nodeExtent:f})=>Dg((d,h)=>{async function y(){const{nodeLookup:p,panZoom:x,fitViewOptions:b,fitViewResolver:C,width:g,height:w,minZoom:S,maxZoom:_}=h();x&&(await Lm({nodes:p,width:g,height:w,panZoom:x,minZoom:S,maxZoom:_},b),C==null||C.resolve(!0),d({fitViewResolver:null}))}return{...ti({nodes:e,edges:t,width:s,height:o,fitView:i,fitViewOptions:a,minZoom:c,maxZoom:u,nodeOrigin:l,nodeExtent:f,defaultNodes:n,defaultEdges:r}),setNodes:p=>{const{nodeLookup:x,parentLookup:b,nodeOrigin:C,elevateNodesOnSelect:g,fitViewQueued:w}=h(),S=cs(p,x,b,{nodeOrigin:C,nodeExtent:f,elevateNodesOnSelect:g,checkEquality:!0});w&&S?(y(),d({nodes:p,nodesInitialized:S,fitViewQueued:!1,fitViewOptions:void 0})):d({nodes:p,nodesInitialized:S})},setEdges:p=>{const{connectionLookup:x,edgeLookup:b}=h();Sa(x,b,p),d({edges:p})},setDefaultNodesAndEdges:(p,x)=>{if(p){const{setNodes:b}=h();b(p),d({hasDefaultNodes:!0})}if(x){const{setEdges:b}=h();b(x),d({hasDefaultEdges:!0})}},updateNodeInternals:p=>{const{triggerNodeChanges:x,nodeLookup:b,parentLookup:C,domNode:g,nodeOrigin:w,nodeExtent:S,debug:_,fitViewQueued:E}=h(),{changes:M,updatedInternals:L}=Jm(p,b,C,g,w,S);L&&(Km(b,C,{nodeOrigin:w,nodeExtent:S}),E?(y(),d({fitViewQueued:!1,fitViewOptions:void 0})):d({}),(M==null?void 0:M.length)>0&&(_&&console.log("React Flow: trigger node changes",M),x==null||x(M)))},updateNodePositions:(p,x=!1)=>{const b=[],C=[],{nodeLookup:g,triggerNodeChanges:w}=h();for(const[S,_]of p){const E=g.get(S),M=!!(E!=null&&E.expandParent&&(E!=null&&E.parentId)&&(_!=null&&_.position)),L={id:S,type:"position",position:M?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:x};M&&E.parentId&&b.push({id:S,parentId:E.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),C.push(L)}if(b.length>0){const{parentLookup:S,nodeOrigin:_}=h(),E=Is(b,g,S,_);C.push(...E)}w(C)},triggerNodeChanges:p=>{const{onNodesChange:x,setNodes:b,nodes:C,hasDefaultNodes:g,debug:w}=h();if(p!=null&&p.length){if(g){const S=za(p,C);b(S)}w&&console.log("React Flow: trigger node changes",p),x==null||x(p)}},triggerEdgeChanges:p=>{const{onEdgesChange:x,setEdges:b,edges:C,hasDefaultEdges:g,debug:w}=h();if(p!=null&&p.length){if(g){const S=Oa(p,C);b(S)}w&&console.log("React Flow: trigger edge changes",p),x==null||x(p)}},addSelectedNodes:p=>{const{multiSelectionActive:x,edgeLookup:b,nodeLookup:C,triggerNodeChanges:g,triggerEdgeChanges:w}=h();if(x){const S=p.map(_=>dt(_,!0));g(S);return}g(_t(C,new Set([...p]),!0)),w(_t(b))},addSelectedEdges:p=>{const{multiSelectionActive:x,edgeLookup:b,nodeLookup:C,triggerNodeChanges:g,triggerEdgeChanges:w}=h();if(x){const S=p.map(_=>dt(_,!0));w(S);return}w(_t(b,new Set([...p]))),g(_t(C,new Set,!0))},unselectNodesAndEdges:({nodes:p,edges:x}={})=>{const{edges:b,nodes:C,nodeLookup:g,triggerNodeChanges:w,triggerEdgeChanges:S}=h(),_=p||C,E=x||b,M=_.map(z=>{const T=g.get(z.id);return T&&(T.selected=!1),dt(z.id,!1)}),L=E.map(z=>dt(z.id,!1));w(M),S(L)},setMinZoom:p=>{const{panZoom:x,maxZoom:b}=h();x==null||x.setScaleExtent([p,b]),d({minZoom:p})},setMaxZoom:p=>{const{panZoom:x,minZoom:b}=h();x==null||x.setScaleExtent([b,p]),d({maxZoom:p})},setTranslateExtent:p=>{var x;(x=h().panZoom)==null||x.setTranslateExtent(p),d({translateExtent:p})},setPaneClickDistance:p=>{var x;(x=h().panZoom)==null||x.setClickDistance(p)},resetSelectedElements:()=>{const{edges:p,nodes:x,triggerNodeChanges:b,triggerEdgeChanges:C,elementsSelectable:g}=h();if(!g)return;const w=x.reduce((_,E)=>E.selected?[..._,dt(E.id,!1)]:_,[]),S=p.reduce((_,E)=>E.selected?[..._,dt(E.id,!1)]:_,[]);b(w),C(S)},setNodeExtent:p=>{const{nodes:x,nodeLookup:b,parentLookup:C,nodeOrigin:g,elevateNodesOnSelect:w,nodeExtent:S}=h();p[0][0]===S[0][0]&&p[0][1]===S[0][1]&&p[1][0]===S[1][0]&&p[1][1]===S[1][1]||(cs(x,b,C,{nodeOrigin:g,nodeExtent:p,elevateNodesOnSelect:w,checkEquality:!1}),d({nodeExtent:p}))},panBy:p=>{const{transform:x,width:b,height:C,panZoom:g,translateExtent:w}=h();return eg({delta:p,panZoom:g,transform:x,translateExtent:w,width:b,height:C})},setCenter:async(p,x,b)=>{const{width:C,height:g,maxZoom:w,panZoom:S}=h();if(!S)return Promise.resolve(!1);const _=typeof(b==null?void 0:b.zoom)<"u"?b.zoom:w;return await S.setViewport({x:C/2-p*_,y:g/2-x*_,zoom:_},{duration:b==null?void 0:b.duration,ease:b==null?void 0:b.ease,interpolate:b==null?void 0:b.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{d({connection:{...oa}})},updateConnection:p=>{d({connection:p})},reset:()=>d({...ti()})}},Object.is);function y0({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:o,initialMinZoom:i,initialMaxZoom:a,initialFitViewOptions:c,fitView:u,nodeOrigin:l,nodeExtent:f,children:d}){const[h]=k.useState(()=>p0({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:o,fitView:u,minZoom:i,maxZoom:a,fitViewOptions:c,nodeOrigin:l,nodeExtent:f}));return m.jsx(Rg,{value:h,children:m.jsx(ip,{children:d})})}function x0({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:o,height:i,fitView:a,fitViewOptions:c,minZoom:u,maxZoom:l,nodeOrigin:f,nodeExtent:d}){return k.useContext(yr)?m.jsx(m.Fragment,{children:e}):m.jsx(y0,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:o,initialHeight:i,fitView:a,initialFitViewOptions:c,initialMinZoom:u,initialMaxZoom:l,nodeOrigin:f,nodeExtent:d,children:e})}const b0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function w0({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o,edgeTypes:i,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:y,onConnectEnd:p,onClickConnectStart:x,onClickConnectEnd:b,onNodeMouseEnter:C,onNodeMouseMove:g,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:_,onNodeDragStart:E,onNodeDrag:M,onNodeDragStop:L,onNodesDelete:z,onEdgesDelete:T,onDelete:P,onSelectionChange:R,onSelectionDragStart:v,onSelectionDrag:I,onSelectionDragStop:N,onSelectionContextMenu:A,onSelectionStart:$,onSelectionEnd:j,onBeforeDelete:D,connectionMode:O,connectionLineType:B=st.Bezier,connectionLineStyle:X,connectionLineComponent:V,connectionLineContainerStyle:Q,deleteKeyCode:U="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:q=!1,selectionMode:Z=on.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ne=er()?"Meta":"Control",zoomActivationKeyCode:J=er()?"Meta":"Control",snapToGrid:te,snapGrid:ee,onlyRenderVisibleElements:le=!1,selectNodesOnDrag:me,nodesDraggable:qe,autoPanOnNodeFocus:Ct,nodesConnectable:vn,nodesFocusable:Cn,nodeOrigin:Sn=Da,edgesFocusable:Vt,edgesReconnectable:qt,elementsSelectable:vr=!0,defaultViewport:kn=Kg,minZoom:St=.5,maxZoom:Xt=2,translateExtent:Ls=sn,preventScrolling:pc=!0,nodeExtent:Cr,defaultMarkerColor:yc="#b1b1b7",zoomOnScroll:xc=!0,zoomOnPinch:bc=!0,panOnScroll:wc=!1,panOnScrollSpeed:vc=.5,panOnScrollMode:Cc=yt.Free,zoomOnDoubleClick:Sc=!0,panOnDrag:kc=!0,onPaneClick:Nc,onPaneMouseEnter:_c,onPaneMouseMove:Ec,onPaneMouseLeave:Mc,onPaneScroll:Ic,onPaneContextMenu:Ac,paneClickDistance:Ts=0,nodeClickDistance:jc=0,children:Lc,onReconnect:Tc,onReconnectStart:Pc,onReconnectEnd:$c,onEdgeContextMenu:Dc,onEdgeDoubleClick:Rc,onEdgeMouseEnter:zc,onEdgeMouseMove:Oc,onEdgeMouseLeave:Hc,reconnectRadius:Bc=10,onNodesChange:Fc,onEdgesChange:Vc,noDragClassName:qc="nodrag",noWheelClassName:Xc="nowheel",noPanClassName:Ps="nopan",fitView:$s,fitViewOptions:Ds,connectOnClick:Yc,attributionPosition:Wc,proOptions:Qc,defaultEdgeOptions:Uc,elevateNodesOnSelect:Kc,elevateEdgesOnSelect:Gc,disableKeyboardA11y:Rs=!1,autoPanOnConnect:Zc,autoPanOnNodeDrag:Jc,autoPanSpeed:el,connectionRadius:tl,isValidConnection:nl,onError:rl,style:sl,id:zs,nodeDragThreshold:ol,connectionDragThreshold:il,viewport:al,onViewportChange:cl,width:ll,height:ul,colorMode:dl="light",debug:fl,onScroll:Nn,ariaLabelConfig:hl,...ml},gl){const Sr=zs||"1",pl=ep(dl),yl=k.useCallback(Os=>{Os.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Nn==null||Nn(Os)},[Nn]);return m.jsx("div",{"data-testid":"rf__wrapper",...ml,onScroll:yl,style:{...sl,...b0},ref:gl,className:ge(["react-flow",s,pl]),id:zs,role:"application",children:m.jsxs(x0,{nodes:e,edges:t,width:ll,height:ul,fitView:$s,fitViewOptions:Ds,minZoom:St,maxZoom:Xt,nodeOrigin:Sn,nodeExtent:Cr,children:[m.jsx(g0,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:C,onNodeMouseMove:g,onNodeMouseLeave:w,onNodeContextMenu:S,onNodeDoubleClick:_,nodeTypes:o,edgeTypes:i,connectionLineType:B,connectionLineStyle:X,connectionLineComponent:V,connectionLineContainerStyle:Q,selectionKeyCode:W,selectionOnDrag:q,selectionMode:Z,deleteKeyCode:U,multiSelectionKeyCode:ne,panActivationKeyCode:oe,zoomActivationKeyCode:J,onlyRenderVisibleElements:le,defaultViewport:kn,translateExtent:Ls,minZoom:St,maxZoom:Xt,preventScrolling:pc,zoomOnScroll:xc,zoomOnPinch:bc,zoomOnDoubleClick:Sc,panOnScroll:wc,panOnScrollSpeed:vc,panOnScrollMode:Cc,panOnDrag:kc,onPaneClick:Nc,onPaneMouseEnter:_c,onPaneMouseMove:Ec,onPaneMouseLeave:Mc,onPaneScroll:Ic,onPaneContextMenu:Ac,paneClickDistance:Ts,nodeClickDistance:jc,onSelectionContextMenu:A,onSelectionStart:$,onSelectionEnd:j,onReconnect:Tc,onReconnectStart:Pc,onReconnectEnd:$c,onEdgeContextMenu:Dc,onEdgeDoubleClick:Rc,onEdgeMouseEnter:zc,onEdgeMouseMove:Oc,onEdgeMouseLeave:Hc,reconnectRadius:Bc,defaultMarkerColor:yc,noDragClassName:qc,noWheelClassName:Xc,noPanClassName:Ps,rfId:Sr,disableKeyboardA11y:Rs,nodeExtent:Cr,viewport:al,onViewportChange:cl}),m.jsx(Jg,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:y,onConnectEnd:p,onClickConnectStart:x,onClickConnectEnd:b,nodesDraggable:qe,autoPanOnNodeFocus:Ct,nodesConnectable:vn,nodesFocusable:Cn,edgesFocusable:Vt,edgesReconnectable:qt,elementsSelectable:vr,elevateNodesOnSelect:Kc,elevateEdgesOnSelect:Gc,minZoom:St,maxZoom:Xt,nodeExtent:Cr,onNodesChange:Fc,onEdgesChange:Vc,snapToGrid:te,snapGrid:ee,connectionMode:O,translateExtent:Ls,connectOnClick:Yc,defaultEdgeOptions:Uc,fitView:$s,fitViewOptions:Ds,onNodesDelete:z,onEdgesDelete:T,onDelete:P,onNodeDragStart:E,onNodeDrag:M,onNodeDragStop:L,onSelectionDrag:I,onSelectionDragStart:v,onSelectionDragStop:N,onMove:l,onMoveStart:f,onMoveEnd:d,noPanClassName:Ps,nodeOrigin:Sn,rfId:Sr,autoPanOnConnect:Zc,autoPanOnNodeDrag:Jc,autoPanSpeed:el,onError:rl,connectionRadius:tl,isValidConnection:nl,selectNodesOnDrag:me,nodeDragThreshold:ol,connectionDragThreshold:il,onBeforeDelete:D,paneClickDistance:Ts,debug:fl,ariaLabelConfig:hl}),m.jsx(Ug,{onSelectionChange:R}),Lc,m.jsx(qg,{proOptions:Qc,position:Wc}),m.jsx(Vg,{rfId:Sr,disableKeyboardA11y:Rs})]})})}var v0=Ha(w0);function C0({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ge(["react-flow__background-pattern",n,r])})}function S0({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:ge(["react-flow__background-pattern","dots",t])})}var ut;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ut||(ut={}));const k0={[ut.Dots]:1,[ut.Lines]:1,[ut.Cross]:6},N0=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function uc({id:e,variant:t=ut.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=0,color:i,bgColor:a,style:c,className:u,patternClassName:l}){const f=k.useRef(null),{transform:d,patternId:h}=se(N0,fe),y=r||k0[t],p=t===ut.Dots,x=t===ut.Cross,b=Array.isArray(n)?n:[n,n],C=[b[0]*d[2]||1,b[1]*d[2]||1],g=y*d[2],w=Array.isArray(o)?o:[o,o],S=x?[g,g]:C,_=[w[0]*d[2]||1+S[0]/2,w[1]*d[2]||1+S[1]/2],E=`${h}${e||""}`;return m.jsxs("svg",{className:ge(["react-flow__background",u]),style:{...c,...br,"--xy-background-color-props":a,"--xy-background-pattern-color-props":i},ref:f,"data-testid":"rf__background",children:[m.jsx("pattern",{id:E,x:d[0]%C[0],y:d[1]%C[1],width:C[0],height:C[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:p?m.jsx(S0,{radius:g/2,className:l}):m.jsx(C0,{dimensions:S,lineWidth:s,variant:t,className:l})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}uc.displayName="Background";k.memo(uc);function _0(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function E0(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function M0(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function I0(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function A0(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Pn({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:ge(["react-flow__controls-button",t]),...n,children:e})}const j0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function dc({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:u,children:l,position:f="bottom-left",orientation:d="vertical","aria-label":h}){const y=de(),{isInteractive:p,minZoomReached:x,maxZoomReached:b,ariaLabelConfig:C}=se(j0,fe),{zoomIn:g,zoomOut:w,fitView:S}=As(),_=()=>{g(),o==null||o()},E=()=>{w(),i==null||i()},M=()=>{S(s),a==null||a()},L=()=>{y.setState({nodesDraggable:!p,nodesConnectable:!p,elementsSelectable:!p}),c==null||c(!p)},z=d==="horizontal"?"horizontal":"vertical";return m.jsxs(xr,{className:ge(["react-flow__controls",z,u]),position:f,style:e,"data-testid":"rf__controls","aria-label":h??C["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(Pn,{onClick:_,className:"react-flow__controls-zoomin",title:C["controls.zoomIn.ariaLabel"],"aria-label":C["controls.zoomIn.ariaLabel"],disabled:b,children:m.jsx(_0,{})}),m.jsx(Pn,{onClick:E,className:"react-flow__controls-zoomout",title:C["controls.zoomOut.ariaLabel"],"aria-label":C["controls.zoomOut.ariaLabel"],disabled:x,children:m.jsx(E0,{})})]}),n&&m.jsx(Pn,{className:"react-flow__controls-fitview",onClick:M,title:C["controls.fitView.ariaLabel"],"aria-label":C["controls.fitView.ariaLabel"],children:m.jsx(M0,{})}),r&&m.jsx(Pn,{className:"react-flow__controls-interactive",onClick:L,title:C["controls.interactive.ariaLabel"],"aria-label":C["controls.interactive.ariaLabel"],children:p?m.jsx(A0,{}):m.jsx(I0,{})}),l]})}dc.displayName="Controls";k.memo(dc);function L0({id:e,x:t,y:n,width:r,height:s,style:o,color:i,strokeColor:a,strokeWidth:c,className:u,borderRadius:l,shapeRendering:f,selected:d,onClick:h}){const{background:y,backgroundColor:p}=o||{},x=i||y||p;return m.jsx("rect",{className:ge(["react-flow__minimap-node",{selected:d},u]),x:t,y:n,rx:l,ry:l,width:r,height:s,style:{fill:x,stroke:a,strokeWidth:c},shapeRendering:f,onClick:h?b=>h(b,e):void 0})}const T0=k.memo(L0),P0=e=>e.nodes.map(t=>t.id),Rr=e=>e instanceof Function?e:()=>e;function $0({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:o=T0,onClick:i}){const a=se(P0,fe),c=Rr(t),u=Rr(e),l=Rr(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:a.map(d=>m.jsx(R0,{id:d,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:l,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:o,onClick:i,shapeRendering:f},d))})}function D0({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:o,shapeRendering:i,NodeComponent:a,onClick:c}){const{node:u,x:l,y:f,width:d,height:h}=se(y=>{const{internals:p}=y.nodeLookup.get(e),x=p.userNode,{x:b,y:C}=p.positionAbsolute,{width:g,height:w}=et(x);return{node:x,x:b,y:C,width:g,height:w}},fe);return!u||u.hidden||!fa(u)?null:m.jsx(a,{x:l,y:f,width:d,height:h,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:s,strokeColor:n(u),strokeWidth:o,shapeRendering:i,onClick:c,id:u.id})}const R0=k.memo(D0);var z0=k.memo($0);const O0=200,H0=150,B0=e=>!e.hidden,F0=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?da(bn(e.nodeLookup,{filter:B0}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},V0="react-flow__minimap-desc";function fc({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:o=5,nodeStrokeWidth:i,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:l,maskStrokeWidth:f,position:d="bottom-right",onClick:h,onNodeClick:y,pannable:p=!1,zoomable:x=!1,ariaLabel:b,inversePan:C,zoomStep:g=10,offsetScale:w=5}){const S=de(),_=k.useRef(null),{boundingRect:E,viewBB:M,rfId:L,panZoom:z,translateExtent:T,flowWidth:P,flowHeight:R,ariaLabelConfig:v}=se(F0,fe),I=(e==null?void 0:e.width)??O0,N=(e==null?void 0:e.height)??H0,A=E.width/I,$=E.height/N,j=Math.max(A,$),D=j*I,O=j*N,B=w*j,X=E.x-(D-E.width)/2-B,V=E.y-(O-E.height)/2-B,Q=D+B*2,U=O+B*2,W=`${V0}-${L}`,q=k.useRef(0),Z=k.useRef();q.current=j,k.useEffect(()=>{if(_.current&&z)return Z.current=cg({domNode:_.current,panZoom:z,getTransform:()=>S.getState().transform,getViewScale:()=>q.current}),()=>{var te;(te=Z.current)==null||te.destroy()}},[z]),k.useEffect(()=>{var te;(te=Z.current)==null||te.update({translateExtent:T,width:P,height:R,inversePan:C,pannable:p,zoomStep:g,zoomable:x})},[p,x,C,g,T,P,R]);const oe=h?te=>{var me;const[ee,le]=((me=Z.current)==null?void 0:me.pointer(te))||[0,0];h(te,{x:ee,y:le})}:void 0,ne=y?k.useCallback((te,ee)=>{const le=S.getState().nodeLookup.get(ee).internals.userNode;y(te,le)},[]):void 0,J=b??v["minimap.ariaLabel"];return m.jsx(xr,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*j:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="number"?i:void 0},className:ge(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:I,height:N,viewBox:`${X} ${V} ${Q} ${U}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":W,ref:_,onClick:oe,children:[J&&m.jsx("title",{id:W,children:J}),m.jsx(z0,{onClick:ne,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:s,nodeStrokeWidth:i,nodeComponent:a}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-B},${V-B}h${Q+B*2}v${U+B*2}h${-Q-B*2}z
        M${M.x},${M.y}h${M.width}v${M.height}h${-M.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}fc.displayName="MiniMap";k.memo(fc);const q0=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,X0={[Ot.Line]:"right",[Ot.Handle]:"bottom-right"};function Y0({nodeId:e,position:t,variant:n=Ot.Handle,className:r,style:s=void 0,children:o,color:i,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:l=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:d,autoScale:h=!0,shouldResize:y,onResizeStart:p,onResize:x,onResizeEnd:b}){const C=qa(),g=typeof e=="string"?e:C,w=de(),S=k.useRef(null),_=n===Ot.Handle,E=se(k.useCallback(q0(_&&h),[_,h]),fe),M=k.useRef(null),L=t??X0[n];k.useEffect(()=>{if(!(!S.current||!g))return M.current||(M.current=kg({domNode:S.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:T,transform:P,snapGrid:R,snapToGrid:v,nodeOrigin:I,domNode:N}=w.getState();return{nodeLookup:T,transform:P,snapGrid:R,snapToGrid:v,nodeOrigin:I,paneDomNode:N}},onChange:(T,P)=>{const{triggerNodeChanges:R,nodeLookup:v,parentLookup:I,nodeOrigin:N}=w.getState(),A=[],$={x:T.x,y:T.y},j=v.get(g);if(j&&j.expandParent&&j.parentId){const D=j.origin??N,O=T.width??j.measured.width??0,B=T.height??j.measured.height??0,X={id:j.id,parentId:j.parentId,rect:{width:O,height:B,...ha({x:T.x??j.position.x,y:T.y??j.position.y},{width:O,height:B},j.parentId,v,D)}},V=Is([X],v,I,N);A.push(...V),$.x=T.x?Math.max(D[0]*O,T.x):void 0,$.y=T.y?Math.max(D[1]*B,T.y):void 0}if($.x!==void 0&&$.y!==void 0){const D={id:g,type:"position",position:{...$}};A.push(D)}if(T.width!==void 0&&T.height!==void 0){const O={id:g,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:T.width,height:T.height}};A.push(O)}for(const D of P){const O={...D,type:"position"};A.push(O)}R(A)},onEnd:({width:T,height:P})=>{const R={id:g,type:"dimensions",resizing:!1,dimensions:{width:T,height:P}};w.getState().triggerNodeChanges([R])}})),M.current.update({controlPosition:L,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:l},keepAspectRatio:f,resizeDirection:d,onResizeStart:p,onResize:x,onResizeEnd:b,shouldResize:y}),()=>{var T;(T=M.current)==null||T.destroy()}},[L,a,c,u,l,f,p,x,b,y]);const z=L.split("-");return m.jsx("div",{className:ge(["react-flow__resize-control","nodrag",...z,n,r]),ref:S,style:{...s,scale:E,...i&&{[_?"backgroundColor":"borderColor"]:i}},children:o})}k.memo(Y0);const Ft={borderRadius:" 14px"},W0={...Ft,backgroundColor:"#828282"},K={...Ft,backgroundColor:"#828282"},zr={...Ft,backgroundColor:"#a87716"},Pe={...Ft,backgroundColor:"#0f3460"},rt={...Ft,backgroundColor:"#166e25"},ni={...Ft,backgroundColor:"#631d3b"},Q0=[{id:"root",value:"2022 - الخطة الشجرية لهندسة الحاسوب"},{id:"physics",value:"الفيزياء العامة 1"},{id:"Discrete Mathematics",value:"رياضيات منفصلة"},{id:"csBasics",value:"أساسيات الحاسوب"},{id:"statistics",value:"مبادئ الإحصاء"},{id:"chemistry",value:"الكيمياء العامة 1"},{id:"calculus1",value:"تفاضل وتكامل 1"},{id:"calculus2",value:"تفاضل وتكامل 2"},{id:"linearAlgebra",value:"الجبر الخطي"},{id:"calculus3",value:"تفاضل وتكامل 3"},{id:"probability",value:"احتمالات ومتغيرات عشوائية"},{id:"numericalAnalysisLab",value:"التحليل العددي العملي"},{id:"physicsLab1",value:"الفيزيا العملية 1"},{id:"physics2",value:"الفيزياء العامة 2"},{id:"electricCircuits",value:"دارات كهربائية"},{id:"physicsLab2",value:"الفيزيا العملية 2"},{id:"electronics1",value:"الكترونيات 1"},{id:"electricCircuitsLab",value:"مختبر الدارات الكهربائية"},{id:"signalsSystems",value:"تحليل اشارات وانظمة"},{id:"electricalMachines",value:"الالات الكهربائية"},{id:"digitalElectronicsVLSI",value:"الاكترونيات الرقمية و دوائر التكامل الكبير جدا"},{id:"digitalElectronicsVLSILab",value:"مختبر الاكترونيات الرقمية و دوائر التكامل الكبير جدا"},{id:"c++",value:"المهارات الحاسوبية للمهندسين"},{id:"digitalLogic",value:"المنطق الرقمي"},{id:"java",value:"حل المشاكل بالبرمجة الشيئية"},{id:"python",value:"مختبر تطبيقات الحاسوب"},{id:"softwareEngineering",value:"هندسة البرمجيات (اختياري)"},{id:"dataStructuresAlgorithms",value:"تراكيب البيانات والخوارزميات"},{id:"mobileComputing",value:"حوسبة الهواتف الخلوية (اختياري)"},{id:"databaseSystems",value:"نظم قواعد البيانات"},{id:"modernOperatingSystems",value:"نظم التشغيل الحديثة"},{id:"competitiveProgramming",value:"البرمجة التنافسية (اختياري)"},{id:"parallelProcessors",value:"معالجات متوازية"},{id:"parallelProcessorsLab",value:"مختبر المعالجات المتوازية"},{id:"digitalImageProcessing",value:"تحليل ومعالجة الصور الرقمية (اختياري)"},{id:"aiAndMachineLearning",value:"الذكاء الاصطناعي وتعلم الالة"},{id:"computerVision",value:"رؤية الحاسوب (اختياري)"},{id:"computationalIntelligence",value:"الذكاء الحسابي (اختياري)"},{id:"advancedMLTopics",value:"مواضيع متقدمة في تعلم الالة (اختياري)"},{id:"dataScience",value:"علم البيانات (اختياري)"},{id:"digitalLogicLab",value:"مختبر المنطق الرقمي"},{id:"computerArchitecture",value:"1 معمارية وتنظيم الحاسوب"},{id:"advancedDigitalDesign",value:"التصميم الرقمي المتقدم (اختياري)"},{id:"design",value:"معمارية وتنظيم الحاسوب 2"},{id:"computerOrganizationLab",value:"مختبر تنظيم الحاسوب"},{id:"optimizedCompilers",value:"المترجمات المحسنة الكفاءة (اختياري)"},{id:"embeddedSystems",value:"الانظمة المضمنة"},{id:"computerNetworks",value:"شبكات الحاسوب"},{id:"embeddedSystemsLab",value:"مختبر الانظمة المضمنة"},{id:"internetOfThings",value:"انترنت الاشياء (اختياري)"},{id:"controlSystems",value:"انظمة التحكم"},{id:"mobileRobots",value:"الروبوتات المتنقلة (اختياري)"},{id:"wirelessNetworks",value:"الشبكات الاسلكية (اختياري)"},{id:"computerNetworksLab",value:"مختبر شبكات الحاسوب"},{id:"cloudComputing",value:"الحوسبة السحابية(اختياري)"},{id:"informationSecurity",value:"امن المعلومات والشبكات"},{id:"dataCommunicationSystems",value:"أنظمة اتصالات البيانات"},{id:"selectedTopicsInCE",value:"مواضيع مختارة في هندسة الحاسوب(اختياري)"},{id:"advancedNetworksLab",value:"مختبر الشبكات المتقدم"},{id:"networkProtocolsProgramming",value:"برمجة بروتوكولات الشبكات"},{id:"digitalForensics",value:"الادلة الرقمية (اختياري)"}],F=new Map(Q0.map(e=>[e.id,e.value])),U0=[{id:"root",position:{x:-150,y:-400},data:{label:F.get("root"),title:"root"},type:"input",style:{width:1500,...W0,fontSize:30,padding:15,borderRadius:15}},{id:"physics",position:{x:-950,y:-200},type:"custom",data:{label:`${F.get("physics")} `,courseId:1,title:"physics"},style:Pe},{id:"Discrete Mathematics",position:{x:-100,y:-200},type:"custom",data:{label:`${F.get("Discrete Mathematics")} `,courseId:2,title:"Discrete Mathematics"},style:zr},{id:"csBasics",position:{x:450,y:-200},type:"custom",data:{label:`${F.get("csBasics")} `,courseId:3,title:"Computer Basics"},style:zr},{id:"statistics",position:{x:800,y:-200},type:"custom",data:{label:`${F.get("statistics")} `,courseId:4,title:"statistics"},style:Pe},{id:"chemistry",position:{x:1200,y:-200},type:"custom",data:{label:`${F.get("chemistry")} `,courseId:5,title:"chemistry"},style:Pe},{id:"calculus1",position:{x:1750,y:-200},type:"custom",data:{label:`${F.get("calculus1")} `,courseId:6,title:"calculus1"},style:Pe},{id:"calculus2",position:{x:1550,y:-50},type:"custom",data:{label:F.get("calculus2"),courseId:7,title:"calculus2"},style:Pe},{id:"linearAlgebra",type:"custom",position:{x:1940,y:-50},data:{label:F.get("linearAlgebra"),courseId:8,title:"linearAlgebra"},style:Pe},{id:"calculus3",position:{x:1750,y:200},type:"custom",data:{label:F.get("calculus3"),courseId:9,title:"calculus3"},style:Pe},{id:"probability",type:"custom",position:{x:1400,y:200},data:{label:F.get("probability"),courseId:10,title:"probability"},style:{...K}},{id:"numericalAnalysisLab",type:"custom",position:{x:1932,y:100},data:{label:F.get("numericalAnalysisLab"),courseId:11,title:"numericalAnalysisLab"},style:K},{id:"physicsLab1",type:"custom",position:{x:-1050,y:-75},data:{label:F.get("physicsLab1"),courseId:12,title:"physicsLab1"},style:Pe},{id:"physics2",position:{x:-850,y:-75},type:"custom",data:{label:F.get("physics2"),courseId:13,title:"physics2"},style:Pe},{id:"electricCircuits",type:"custom",position:{x:-975,y:50},data:{label:F.get("electricCircuits"),courseId:14,title:"electricCircuits"},style:rt},{id:"physicsLab2",type:"custom",position:{x:-750,y:50},data:{label:F.get("physicsLab2"),courseId:15,title:"physicsLab2"},style:Pe},{id:"electronics1",type:"custom",position:{x:-1350,y:200},data:{label:F.get("electronics1"),courseId:16,title:"electronics1"},style:rt},{id:"electricCircuitsLab",type:"custom",position:{x:-1150,y:200},data:{label:F.get("electricCircuitsLab"),courseId:17,title:"electricCircuitsLab"},style:rt},{id:"signalsSystems",type:"custom",position:{x:-900,y:200},data:{label:F.get("signalsSystems"),courseId:18,title:"signalsSystems"},style:rt},{id:"electricalMachines",type:"custom",position:{x:-650,y:200},data:{label:F.get("electricalMachines"),courseId:19,title:"electricalMachines"},style:ni},{id:"digitalElectronicsVLSI",type:"custom",position:{x:-1435,y:350},data:{label:F.get("digitalElectronicsVLSI"),courseId:20,title:"digitalElectronicsVLSI"},style:K},{id:"digitalElectronicsVLSILab",type:"custom",position:{x:-1458,y:500},data:{label:F.get("digitalElectronicsVLSILab"),courseId:21,title:"digitalElectronicsVLSILab"},style:K},{id:"c++",type:"custom",position:{x:-200,y:-50},data:{label:F.get("c++"),courseId:22,title:"c++"},style:K},{id:"digitalLogic",type:"custom",position:{x:975,y:-50},data:{label:F.get("digitalLogic"),courseId:23,title:"digitalLogic"},style:K},{id:"java",type:"custom",position:{x:-450,y:100},data:{label:F.get("java"),courseId:24,title:"java"},style:K},{id:"python",type:"custom",position:{x:-50,y:100},data:{label:F.get("python"),courseId:25,title:"python"},style:K},{id:"softwareEngineering",type:"custom",position:{x:-625,y:400},data:{label:F.get("softwareEngineering"),courseId:26,title:"softwareEngineering"},style:K},{id:"dataStructuresAlgorithms",type:"custom",position:{x:-448,y:500},data:{label:F.get("dataStructuresAlgorithms"),courseId:27,title:"dataStructuresAlgorithms"},style:K},{id:"mobileComputing",type:"custom",position:{x:-1400,y:700},data:{label:F.get("mobileComputing"),courseId:28,title:"mobileComputing"},style:K},{id:"databaseSystems",type:"custom",position:{x:-1075,y:700},data:{label:F.get("databaseSystems"),courseId:29,title:"databaseSystems"},style:zr},{id:"modernOperatingSystems",type:"custom",position:{x:-850,y:700},data:{label:F.get("modernOperatingSystems"),courseId:30,title:"modernOperatingSystems"},style:K},{id:"computerArchitecture2",type:"custom",position:{x:-600,y:700},data:{label:F.get("design"),courseId:43,title:"design"},style:K},{id:"competitiveProgramming",type:"custom",position:{x:-300,y:700},data:{label:F.get("competitiveProgramming"),courseId:31,title:"competitiveProgramming"},style:K},{id:"parallelProcessors",type:"custom",position:{x:-574,y:850},data:{label:F.get("parallelProcessors"),courseId:32,title:"parallelProcessors"},style:K},{id:"parallelProcessorsLab",type:"custom",position:{x:-593,y:1e3},data:{label:F.get("parallelProcessorsLab"),courseId:33,title:"parallelProcessorsLab"},style:K},{id:"signalsSystems2",type:"custom",position:{x:-200,y:225},data:{label:F.get("signalsSystems"),courseId:18,title:"signalsSystems"},style:rt},{id:"linearAlgebra2",type:"custom",position:{x:70,y:225},data:{label:F.get("linearAlgebra"),courseId:8,title:"linearAlgebra"},style:K},{id:"digitalImageProcessing",type:"custom",position:{x:-263,y:410},data:{label:F.get("digitalImageProcessing"),courseId:34,title:"digitalImageProcessing"},style:K},{id:"aiAndMachineLearning",type:"custom",position:{x:-50,y:600},data:{label:F.get("aiAndMachineLearning"),courseId:35,title:"aiAndMachineLearning"},style:K},{id:"computerVision",type:"custom",position:{x:-350,y:900},data:{label:F.get("computerVision"),courseId:36,title:"computerVision"},style:K},{id:"computationalIntelligence",type:"custom",position:{x:-100,y:900},data:{label:F.get("computationalIntelligence"),courseId:37,title:"computationalIntelligence"},style:K},{id:"advancedMLTopics",type:"custom",position:{x:150,y:900},data:{label:F.get("advancedMLTopics"),courseId:38,title:"advancedMLTopics"},style:K},{id:"dataScience",type:"custom",position:{x:500,y:900},data:{label:F.get("dataScience"),courseId:39,title:"dataScience"},style:K},{id:"c++2",type:"custom",position:{x:300,y:100},data:{label:F.get("c++"),courseId:22,title:"c++"},style:K},{id:"digitalLogicLab",type:"custom",position:{x:675,y:100},data:{label:F.get("digitalLogicLab"),courseId:40,title:"digitalLogicLab"},style:K},{id:"electronics2",type:"custom",position:{x:970,y:100},data:{label:F.get("electronics1"),courseId:16,title:"electronics1"},style:rt},{id:"signalsSystems3",type:"custom",position:{x:1240,y:100},data:{label:F.get("signalsSystems"),courseId:18,title:"signalsSystems"},style:rt},{id:"computerArchitecture",type:"custom",position:{x:310,y:300},data:{label:F.get("computerArchitecture"),courseId:41,title:"computerArchitecture"},style:K},{id:"advancedDigitalDesign",type:"custom",position:{x:115,y:450},data:{label:F.get("advancedDigitalDesign"),courseId:42,title:"advancedDigitalDesign"},style:K},{id:"digitalLogicLab2",type:"custom",position:{x:440,y:450},data:{label:F.get("digitalLogicLab"),courseId:40,title:"digitalLogicLab"},style:K},{id:"design",type:"custom",position:{x:665,y:450},data:{label:F.get("design"),courseId:43,title:"design"},style:K},{id:"computerOrganizationLab",type:"custom",position:{x:438,y:600},data:{label:F.get("computerOrganizationLab"),courseId:44,title:"computerOrganizationLab"},style:K},{id:"java2",type:"custom",position:{x:662,y:650},data:{label:F.get("java"),courseId:24,title:"java"},style:K},{id:"optimizedCompilers",type:"custom",position:{x:635,y:815},data:{label:F.get("optimizedCompilers"),courseId:45,title:"optimizedCompilers"},style:K},{id:"embeddedSystems",type:"custom",position:{x:970,y:250},data:{label:F.get("embeddedSystems"),courseId:46,title:"embeddedSystems"},style:K},{id:"computerNetworks",type:"custom",position:{x:852,y:375},data:{label:F.get("computerNetworks"),courseId:47,title:"computerNetworks"},style:K},{id:"embeddedSystemsLab",type:"custom",position:{x:1050,y:375},data:{label:F.get("embeddedSystemsLab"),courseId:48,title:"embeddedSystemsLab"},style:K},{id:"internetOfThings",type:"custom",position:{x:844,y:535},data:{label:F.get("internetOfThings"),courseId:49,title:"internetOfThings"},style:K},{id:"signalsAndSystems",type:"custom",position:{x:1058,y:535},data:{label:F.get("signalsSystems"),courseId:18,title:"signalsSystems"},style:rt},{id:"controlSystems",type:"custom",position:{x:1059,y:670},data:{label:F.get("controlSystems"),courseId:50,title:"controlSystems"},style:K},{id:"mobileRobots",type:"custom",position:{x:1035,y:825},data:{label:F.get("mobileRobots"),courseId:51,title:"mobileRobots"},style:ni},{id:"computerNetworks2",type:"custom",position:{x:1242,y:725},data:{label:F.get("computerNetworks"),courseId:47,title:"computerNetworks"},style:K},{id:"computerArchitecture2+",type:"custom",position:{x:600,y:1050},data:{label:F.get("computerArchitecture"),courseId:41,title:"computerArchitecture"},style:K},{id:"wirelessNetworks",type:"custom",position:{x:875,y:1050},data:{label:F.get("wirelessNetworks"),courseId:52,title:"wirelessNetworks"},style:K},{id:"computerNetworksLab",type:"custom",position:{x:1150,y:1050},data:{label:F.get("computerNetworksLab"),courseId:53,title:"computerNetworksLab"},style:K},{id:"objectOrientedProblemSolving",type:"custom",position:{x:1402,y:1050},data:{label:F.get("java"),courseId:24,title:"java"},style:K},{id:"cloudComputing",type:"custom",position:{x:1700,y:1050},data:{label:F.get("cloudComputing"),courseId:54,title:"cloudComputing"},style:K},{id:"informationSecurity",type:"custom",position:{x:1975,y:1050},data:{label:F.get("informationSecurity"),courseId:55,title:"informationSecurity"},style:K},{id:"dataCommunicationSystems",type:"custom",position:{x:2250,y:1050},data:{label:F.get("dataCommunicationSystems"),courseId:56,title:"dataCommunicationSystems"},style:K},{id:"selectedTopicsInCE",type:"custom",position:{x:535,y:1225},data:{label:F.get("selectedTopicsInCE"),courseId:57,title:"selectedTopicsInCE"},style:K},{id:"advancedNetworksLab",type:"custom",position:{x:1150,y:1225},data:{label:F.get("advancedNetworksLab"),courseId:58,title:"advancedNetworksLab"},style:K},{id:"networkProtocolsProgramming",type:"custom",position:{x:1409,y:1225},data:{label:F.get("networkProtocolsProgramming"),courseId:59,title:"networkProtocolsProgramming"},style:K},{id:"digitalForensics",type:"custom",position:{x:1985,y:1225},data:{label:F.get("digitalForensics"),courseId:60,title:"digitalForensics"},style:K}],G={strokeWidth:4,stroke:"#000000"},Ye={strokeWidth:4,stroke:"#008000"},$e={strokeWidth:4,stroke:"#079cba"},Or={strokeWidth:4,stroke:"#ffa500"},ri={strokeWidth:4,stroke:"#641d4b"},K0=[{id:"r-physics",source:"root",target:"physics",type:"smoothstep",style:$e},{id:"r-Discrete Mathematics",source:"root",target:"Discrete Mathematics",type:"smoothstep",style:Or},{id:"r-csBasics",source:"root",target:"csBasics",type:"smoothstep",style:Or},{id:"r-statistics",source:"root",target:"statistics",type:"smoothstep",style:$e},{id:"r-chemistry",source:"root",target:"chemistry",type:"smoothstep",style:$e},{id:"r-calculus1",source:"root",target:"calculus1",type:"smoothstep",style:$e},{id:"calculus1-linearAlgebra",source:"calculus1",target:"linearAlgebra",type:"smoothstep",style:$e},{id:"calculus1-calculus2",source:"calculus1",target:"calculus2",type:"smoothstep",style:$e},{id:"calculus2-calculus3",source:"calculus2",target:"calculus3",type:"smoothstep",style:$e},{id:"calculus2-probability",source:"calculus2",target:"probability",type:"smoothstep",style:G},{id:"linearAlgebra-numericalAnalysisLab",source:"linearAlgebra",target:"numericalAnalysisLab",type:"smoothstep",style:G},{id:"physics-physicsLab1",source:"physics",target:"physicsLab1",type:"smoothstep",style:{...$e,strokeDasharray:"5,5"}},{id:"physics-physics2",source:"physics",target:"physics2",type:"smoothstep",style:$e},{id:"physics2-physicsLab2",source:"physics2",target:"physicsLab2",type:"smoothstep",style:{...$e,strokeDasharray:"5,5"}},{id:"physics2-electricCircuits",source:"physics2",target:"electricCircuits",type:"smoothstep",style:Ye},{id:"electricCircuits-to-electronics1",source:"electricCircuits",target:"electronics1",type:"smoothstep",style:Ye},{id:"electricCircuits-to-electricCircuitsLab",source:"electricCircuits",target:"electricCircuitsLab",type:"smoothstep",style:Ye},{id:"electricCircuits-to-signalsSystems",source:"electricCircuits",target:"signalsSystems",type:"smoothstep",style:Ye},{id:"math2-to-signalsSystems",source:"math2",target:"signalsSystems",type:"smoothstep",style:Ye},{id:"electricCircuits-to-electricalMachines",source:"electricCircuits",target:"electricalMachines",type:"smoothstep",style:ri},{id:"electronics1-to-digitalElectronicsVLSI",source:"electronics1",target:"digitalElectronicsVLSI",type:"smoothstep",style:G},{id:"digitalElectronicsVLSI-to-digitalElectronicsVLSILab",source:"digitalElectronicsVLSI",target:"digitalElectronicsVLSILab",type:"smoothstep",style:G},{id:"csBasics-to-c++",source:"csBasics",target:"c++",type:"smoothstep",style:G},{id:"csBasics-to-digitalLogic",source:"csBasics",target:"digitalLogic",type:"smoothstep",style:G},{id:"c++-to-java",source:"c++",target:"java",type:"smoothstep",style:G},{id:"c++-to-python",source:"c++",target:"python",type:"smoothstep",style:G},{id:"java-to-softwareEngineering",source:"java",target:"softwareEngineering",type:"smoothstep",style:G},{id:"java-to-dataStructuresAlgorithms",source:"java",target:"dataStructuresAlgorithms",type:"smoothstep",style:G},{id:"dataStructuresAlgorithms-to-mobileComputing",source:"dataStructuresAlgorithms",target:"mobileComputing",type:"smoothstep",style:G},{id:"dataStructuresAlgorithms-to-databaseSystems",source:"dataStructuresAlgorithms",target:"databaseSystems",type:"smoothstep",style:Or},{id:"dataStructuresAlgorithms-to-modernOperatingSystems",source:"dataStructuresAlgorithms",target:"modernOperatingSystems",type:"smoothstep",style:G},{id:"dataStructuresAlgorithms-to-computerArchitecture2",source:"dataStructuresAlgorithms",target:"computerArchitecture2",type:"smoothstep",style:G},{id:"dataStructuresAlgorithms-to-competitiveProgramming",source:"dataStructuresAlgorithms",target:"competitiveProgramming",type:"smoothstep",style:G},{id:"computerArchitecture2-to-parallelProcessors",source:"computerArchitecture2",target:"parallelProcessors",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:"parallelProcessors-to-parallelProcessorsLab",source:"parallelProcessors",target:"parallelProcessorsLab",type:"smoothstep",style:G},{id:"python-to-signalsSystems2",source:"python",target:"signalsSystems2",type:"smoothstep",style:Ye},{id:"python-to-linearAlgebra2",source:"python",target:"linearAlgebra2",type:"smoothstep",style:G},{id:"signalsSystems2-to-digitalImageProcessing",source:"signalsSystems2",target:"digitalImageProcessing",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:"linearAlgebra2-to-aiAndMachineLearning",source:"linearAlgebra2",target:"aiAndMachineLearning",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:"aiAndMachineLearning-to-computerVision",source:"aiAndMachineLearning",target:"computerVision",type:"smoothstep",style:G},{id:"aiAndMachineLearning-to-computationalIntelligence",source:"aiAndMachineLearning",target:"computationalIntelligence",type:"smoothstep",style:G},{id:"aiAndMachineLearning-to-advancedMLTopics",source:"aiAndMachineLearning",target:"advancedMLTopics",type:"smoothstep",style:G},{id:"aiAndMachineLearning-to-dataScience",source:"aiAndMachineLearning",target:"dataScience",type:"smoothstep",style:G},{id:"digitalLogic-to-c++2",source:"digitalLogic",target:"c++2",type:"smoothstep",style:G},{id:"digitalLogic-to-digitalLogicLab",source:"digitalLogic",target:"digitalLogicLab",type:"smoothstep",style:G},{id:"digitalLogic-to-electronics2",source:"digitalLogic",target:"electronics2",type:"smoothstep",style:Ye},{id:"digitalLogic-to-signalsSystems3",source:"digitalLogic",target:"signalsSystems3",type:"smoothstep",style:Ye},{id:" c++2-to-computerArchitecture",source:"c++2",target:"computerArchitecture",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" computerArchitecture-to-advancedDigitalDesign",source:"computerArchitecture",target:"advancedDigitalDesign",type:"smoothstep",style:G},{id:" computerArchitecture-to-digitalLogicLab2",source:"computerArchitecture",target:"digitalLogicLab2",type:"smoothstep",style:G},{id:" computerArchitecture-to-design",source:"computerArchitecture",target:"design",type:"smoothstep",style:G},{id:" digitalLogicLab2-to-computerOrganizationLab",source:"digitalLogicLab2",target:"computerOrganizationLab",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" design-to-java2",source:"design",target:"java2",type:"smoothstep",style:G},{id:" java2-to-optimizedCompilers",source:"java2",target:"optimizedCompilers",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" electronics2-to-embeddedSystems",source:"electronics2",target:"embeddedSystems",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" embeddedSystems-to-computerNetworks",source:"embeddedSystems",target:"computerNetworks",type:"smoothstep",style:G},{id:" embeddedSystems-to-embeddedSystemsLab",source:"embeddedSystems",target:"embeddedSystemsLab",type:"smoothstep",style:G},{id:" computerNetworks-to-internetOfThings",source:"computerNetworks",target:"internetOfThings",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" embeddedSystemsLab-to-signalsAndSystems",source:"embeddedSystemsLab",target:"signalsAndSystems",type:"smoothstep",style:Ye},{id:" signalsAndSystems-to-controlSystems",source:"signalsAndSystems",target:"controlSystems",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" controlSystems-to-mobileRobots",source:"controlSystems",target:"mobileRobots",type:"smoothstep",style:ri},{id:" signalsSystems3-to-computerNetworks2",source:"signalsSystems3",target:"computerNetworks2",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" computerNetworks2-to-computerArchitecture2+",source:"computerNetworks2",target:"computerArchitecture2+",type:"smoothstep",style:G},{id:" computerNetworks2-to-wirelessNetworks",source:"computerNetworks2",target:"wirelessNetworks",type:"smoothstep",style:G},{id:" computerNetworks2-to-computerNetworksLab",source:"computerNetworks2",target:"computerNetworksLab",type:"smoothstep",style:G},{id:" computerNetworks2-to-objectOrientedProblemSolving",source:"computerNetworks2",target:"objectOrientedProblemSolving",type:"smoothstep",style:G},{id:" computerNetworks2-to-cloudComputing",source:"computerNetworks2",target:"cloudComputing",type:"smoothstep",style:G},{id:" computerNetworks2-to-informationSecurity",source:"computerNetworks2",target:"informationSecurity",type:"smoothstep",style:G},{id:" computerNetworks2-to-dataCommunicationSystems",source:"computerNetworks2",target:"dataCommunicationSystems",type:"smoothstep",style:G},{id:" computerArchitecture2+-to-selectedTopicsInCE",source:"computerArchitecture2+",target:"selectedTopicsInCE",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" computerNetworksLab-to-advancedNetworksLab",source:"computerNetworksLab",target:"advancedNetworksLab",type:"smoothstep",style:G},{id:" objectOrientedProblemSolving-to-networkProtocolsProgramming",source:"objectOrientedProblemSolving",target:"networkProtocolsProgramming",type:"smoothstep",style:{...G,stroke:"black",strokeDasharray:"5,5"}},{id:" informationSecurity-to-digitalForensics",source:"informationSecurity",target:"digitalForensics",type:"smoothstep",style:G}],hc=()=>{const{accessToken:e}=Je(i=>i.auth);return{completeCourse:async({courseId:i,completed:a})=>{const c={completed:a};return(await pe.post(`/api/courses/${i}/complete`,c,{headers:{Authorization:`Bearer ${e}`}})).data},getCompletedCourses:async()=>(await pe.get("/api/courses/user/completed",{headers:{Authorization:`Bearer ${e}`}})).data,getAllCourses:async()=>(await pe.get("/api/courses",{headers:{Authorization:`Bearer ${e}`}})).data,getCourseById:async i=>(await pe.get(`/api/courses/${i}`,{headers:{Authorization:`Bearer ${e}`}})).data,getMarkCourses:async()=>(await pe.get("/api/courses/user/mark",{headers:{Authorization:`Bearer ${e}`}})).data}},xe={all:["courses"],lists:()=>[...xe.all,"list"],list:e=>[...xe.lists(),{filters:e}],details:()=>[...xe.all,"detail"],detail:e=>[...xe.details(),e],completed:()=>[...xe.all,"completed"],marked:()=>[...xe.all,"marked"]},G0=()=>{const{getCompletedCourses:e,getAllCourses:t,getCourseById:n,getMarkCourses:r}=hc(),{accessToken:s}=Je(u=>u.auth);return{useCoursesQuery:()=>Qe({queryKey:xe.lists(),queryFn:t,staleTime:5*60*1e3,gcTime:10*60*1e3,enabled:!!s,retry:1}),useCourseQuery:u=>Qe({queryKey:xe.detail(u),queryFn:()=>n(u),enabled:!!u&&!!s,staleTime:5*60*1e3}),useCompletedCoursesQuery:()=>Qe({queryKey:xe.completed(),queryFn:e,staleTime:2*60*1e3,gcTime:5*60*1e3,enabled:!!s}),useMarkCoursesQuery:()=>Qe({queryKey:xe.marked(),queryFn:r,staleTime:2*60*1e3,gcTime:5*60*1e3,enabled:!!s})}},Z0=()=>{const{completeCourse:e}=hc(),t=Ze();return Bt({mutationFn:async({courseId:n,completed:r})=>(await e({courseId:n,completed:r}),{courseId:n,completed:r}),onMutate:async({courseId:n,completed:r})=>{await t.cancelQueries({queryKey:xe.completed()});const s=t.getQueryData(xe.completed());return t.setQueryData(xe.completed(),(o=[])=>r?[...o,n]:o.filter(i=>i!==n)),{previousCompleted:s}},onError:(n,r,s)=>{s!=null&&s.previousCompleted&&t.setQueryData(xe.completed(),s.previousCompleted)},onSettled:()=>{t.invalidateQueries({queryKey:xe.completed()})}})},J0=()=>{const{useCompletedCoursesQuery:e}=G0(),{data:t=[],isLoading:n,error:r,refetch:s}=e(),o=Z0(),i=k.useMemo(()=>new Set(t),[t]),a=async c=>{const l=!i.has(c);try{await o.mutateAsync({courseId:c,completed:l})}catch(f){console.error("Failed to update course completion:",f)}};return{completedCourses:i,loading:n,error:(r==null?void 0:r.message)||null,toggleCourseCompletion:a,refreshCompletedCourses:s,isMutating:o.isPending,mutationError:o.error}},ey=()=>{const{accessToken:e}=ar(),t=async()=>(await pe.get("/api/courses/user/marks/batch",{headers:{Authorization:`Bearer ${e}`}})).data,{data:n={},isLoading:r,error:s}=Qe({queryKey:["allUserMarks"],queryFn:t,enabled:!!e,staleTime:3e3});return{allMarks:n,isLoading:r,error:s}},ty=()=>{const[e,t]=k.useState(U0),[n,r]=k.useState(K0),{setCourseId:s,setNodeName:o,setTitle:i,setDrawerOpen:a}=vt(),{allMarks:c,isLoading:u}=ey(),{completedCourses:l,loading:f,error:d,toggleCourseCompletion:h,isMutating:y,mutationError:p}=J0(),x=k.useCallback(async L=>{if(y)return;const z=e.find(P=>P.id===L);if(!z||!z.data.courseId){console.warn("Node or courseId not found for:",L);return}const T=Number(z.data.courseId);await h(T)},[e,h,y]),b=k.useMemo(()=>e.map(L=>{if(L.type==="custom"&&L.data.courseId){const z=l.has(Number(L.data.courseId)),T=Number(L.data.courseId),P=c[T];return{...L,data:{...L.data,isStrikethrough:z,onClose:x,isUpdating:y,mark:P}}}return L}),[e,l,x,y,c]),C=k.useCallback(L=>t(z=>za(L,z)),[]),g=k.useCallback(L=>r(z=>Oa(L,z)),[]),w=k.useCallback(L=>r(z=>wa(L,z)),[]),[S,_]=k.useState(!1),E=k.useCallback((L,z)=>{s(z.data.courseId),o(z.id),z.data.title==="root"?_(!0):(i(z.data.title),a(!0))},[s,o,i,a]),M=d||(p==null?void 0:p.message);return{nodes:b,edges:n,setNodes:t,onNodesChange:C,onEdgesChange:g,onConnect:w,handleNodeClick:E,setDrawerOpen:a,rootModalOpen:S,setRootModalOpen:_,loading:f||u,error:M,isMutating:y,completedCoursesCount:l.size,totalNodes:e.length,completedCourseIds:Array.from(l)}},ny=({data:e,id:t})=>{const n=k.useCallback(u=>{u.stopPropagation(),e.onClose&&e.onClose(t)},[e.onClose,t]),r=k.useCallback(u=>{(u.key==="Delete"||u.key==="Backspace")&&(u.stopPropagation(),e.onClose&&e.onClose(t))},[e.onClose,t]),s=k.useCallback(()=>{let u="custom-node";return e.isClosing&&(u+=" closing"),e.isStrikethrough&&!e.isClosing&&(u+=" strikethrough"),u},[e.isClosing,e.isStrikethrough]),o=k.useCallback(()=>`Node: ${e.label}`,[e.label]),i=k.useCallback(()=>e.isStrikethrough?`Really close ${e.label}`:`Close ${e.label}`,[e.isStrikethrough,e.label]),a=k.useCallback(()=>e.isStrikethrough?"Click to remove strikethrough":"Click to add strikethrough",[e.isStrikethrough]),c=k.useCallback(()=>e.mark?`Mark: ${e.mark}`:"",[e.mark]);return{handleClose:n,handleKeyDown:r,getClassName:s,getAriaLabel:o,getCloseButtonAriaLabel:i,getCloseButtonTitle:a,getMarkAriaLabel:c}},mc=k.memo(({data:e,id:t})=>{const{handleClose:n,handleKeyDown:r,getClassName:s,getAriaLabel:o,getCloseButtonAriaLabel:i,getCloseButtonTitle:a,getMarkAriaLabel:c}=ny({data:e,id:t});return m.jsxs("div",{className:s(),style:e.style,tabIndex:0,onKeyDown:r,role:"button","aria-label":o(),children:[m.jsx("span",{children:e.label}),m.jsx("button",{className:"close-btn",onClick:n,"aria-label":i(),title:a(),tabIndex:-1,children:m.jsx($u,{className:"text-2xl"})}),e.mark&&m.jsx("div",{className:"mark-container",children:m.jsx("span",{className:"mark","aria-label":c(),children:e.mark})}),m.jsx(Ht,{type:"source",position:Y.Bottom,"aria-label":"Source handle"}),m.jsx(Ht,{type:"target",position:Y.Top,"aria-label":"Target handle"})]})});mc.displayName="CustomNode";const gc=k.memo(()=>{const{courseId:e,drawerOpen:t,title:n}=vt(),{nodes:r,edges:s,onNodesChange:o,onEdgesChange:i,onConnect:a,handleNodeClick:c,setDrawerOpen:u,rootModalOpen:l,setRootModalOpen:f}=ty(),d=k.useMemo(()=>({custom:mc}),[]),h=k.useMemo(()=>({markerEnd:{type:an.ArrowClosed}}),[]);return m.jsxs("div",{className:"w-full h-screen px-2 sm:px-6 md:px-10 overflow-auto bg-transparent",children:[m.jsx(v0,{nodes:r,edges:s,onNodesChange:o,onEdgesChange:i,onConnect:a,onNodeClick:c,defaultEdgeOptions:h,minZoom:.3,fitView:!0,fitViewOptions:{padding:.2},style:{background:"transparent"},proOptions:{hideAttribution:!0},nodeTypes:d,nodesDraggable:!1}),l&&m.jsx(mu,{isOpen:l,onClose:()=>f(!1)}),!l&&n!=="root"&&m.jsx(Wu,{isOpen:t,onClose:()=>u(!1),title:typeof n=="string"?n:void 0,courseId:e})]})});gc.displayName="TreeFlowInner";function ry(){return m.jsx(Bl,{children:m.jsx(gc,{})})}const dy=()=>m.jsx(m.Fragment,{children:m.jsx(ry,{})});export{dy as default};
